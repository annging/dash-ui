(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-39d8417a"],{"04c9":function(t,e,i){"use strict";i("2929")},"09f4":function(t,e,i){"use strict";i.d(e,"a",(function(){return l})),Math.easeInOutQuad=function(t,e,i,a){return t/=a/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var a=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function n(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function l(t,e,i){var l=s(),c=t-l,o=20,r=0;e="undefined"===typeof e?500:e;var u=function t(){r+=o;var s=Math.easeInOutQuad(r,l,c,e);n(s),r<e?a(t):i&&"function"===typeof i&&i()};u()}},"0a00":function(t,e,i){},"0f28":function(t,e,i){"use strict";i("6ba9")},"101d":function(t,e,i){"use strict";i("eee9")},"104b":function(t,e,i){},"10ea":function(t,e,i){"use strict";i("120a")},"120a":function(t,e,i){},1215:function(t,e,i){"use strict";i("6c51")},1628:function(t,e,i){},1631:function(t,e,i){"use strict";i("7072")},"18b2":function(t,e,i){"use strict";i("5349")},"1b63":function(t,e,i){},"1c18":function(t,e,i){},"21e5":function(t,e,i){},"28b5":function(t,e,i){"use strict";i("104b")},2929:function(t,e,i){},"2c00":function(t,e,i){"use strict";i("f2d8")},"2e71":function(t,e,i){"use strict";i("8c5e")},3123:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var a=i("b775");function n(){return Object(a["a"])({url:Object({VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:"/dash-ui/"}).VUE_APP_XIAOCHENGXU_API+"/api/v1/upload/token",method:"get"})}},"333d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[i("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},n=[],s=(i("a9e3"),i("09f4")),l={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&Object(s["a"])(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&Object(s["a"])(0,800)}}},c=l,o=(i("e498"),i("2877")),r=Object(o["a"])(c,a,n,!1,null,"6af373ef",null);e["a"]=r.exports},"3bb9":function(t,e,i){"use strict";i("4492")},4492:function(t,e,i){},5302:function(t,e,i){"use strict";i.d(e,"c",(function(){return n})),i.d(e,"e",(function(){return s})),i.d(e,"b",(function(){return l})),i.d(e,"d",(function(){return c})),i.d(e,"a",(function(){return o}));i("e9c4"),i("b64b");var a=i("b775");function n(t,e){return Object(a["a"])({url:"/system/management/music/getMusic",method:"post",params:t,data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var i in t)""===t[i]&&delete t[i];return t=JSON.stringify(t),t}]})}function s(t){return Object(a["a"])({url:"/system/management/music/saveOrUpdate",method:"post",data:t,transformRequest:[function(t){console.log(t);var e=Object.keys(t).length,i=0,a="";for(var n in t)a+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]),i<e-1&&(a+="&",i++);return a}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function l(t){return Object(a["a"])({url:"/system/management/music/deleteMusic",method:"get",params:t})}function c(t,e){return Object(a["a"])({url:"/system/management/getSystemLogs",method:"post",params:t,data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var i in t)""===t[i]&&delete t[i];return t=JSON.stringify(t),t}]})}function o(t){return Object(a["a"])({url:"/system/config/activity/save",method:"post",params:t})}},5349:function(t,e,i){},"54f0":function(t,e,i){"use strict";i("563b")},"563b":function(t,e,i){},"5ec9":function(t,e,i){"use strict";i("1b63")},"686f":function(t,e,i){"use strict";i("21e5")},"6ba9":function(t,e,i){},"6c51":function(t,e,i){},"6cd3":function(t,e,i){"use strict";i("7b82")},7072:function(t,e,i){},"7b82":function(t,e,i){},"7df3":function(t,e,i){"use strict";i("9b68")},8256:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[i("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),t.hasUpload?i("div",{staticClass:"editor-custom-btn-container"},[i("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1):t._e()])},n=[],s=(i("b680"),i("a9e3"),i("ac1f"),i("00b4"),i("d3b7"),i("159b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" 上传图片 ")]),i("el-dialog",{attrs:{visible:t.dialogVisible,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{data:t.dataObj,multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"http://upload-z2.qiniup.com","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" 点击上传 ")])],1),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" 取消 ")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" 确认 ")])],1)],1)}),l=[],c=(i("b64b"),i("d81d"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("3123")),o={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[],dataObj:{token:""}}},created:function(){this.fetchToken()},methods:{fetchToken:function(){var t=this;return new Promise((function(e,i){Object(c["a"])().then((function(i){var a=i.data;t._data.dataObj.token=a,e(!0)})).catch((function(t){console.log(t),i(!1)}))}))},checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var i=e.uid,a=Object.keys(this.listObj),n=0,s=a.length;n<s;n++)if(this.listObj[a[n]].uid===i)return this.listObj[a[n]].url="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key,void(this.listObj[a[n]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=Object.keys(this.listObj),a=0,n=i.length;a<n;a++)if(this.listObj[i[a]].uid===e)return void delete this.listObj[i[a]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,a=t.uid;return this.listObj[a]={},new Promise((function(n,s){var l=new Image;l.src=i.createObjectURL(t),l.onload=function(){e.listObj[a]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},n(!0)}))}}},r=o,u=(i("54f0"),i("2877")),d=Object(u["a"])(r,s,l,!1,null,"0958cc86",null),m=d.exports,v=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],p=v,g=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],y=g,f=i("b85c"),h=[];function b(){return window.tinymce}var S=function(t,e){var i=document.getElementById(t),a=e||function(){};if(!i){var n=document.createElement("script");n.src=t,n.id=t,document.body.appendChild(n),h.push(a);var s="onload"in n?l:c;s(n)}function l(e){e.onload=function(){this.onerror=this.onload=null;var t,i=Object(f["a"])(h);try{for(i.s();!(t=i.n()).done;){var a=t.value;a(null,e)}}catch(n){i.e(n)}finally{i.f()}h=null},e.onerror=function(){this.onerror=this.onload=null,a(new Error("Failed to load "+t),e)}}function c(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,i=Object(f["a"])(h);try{for(i.s();!(e=i.n()).done;){var a=e.value;a(null,t)}}catch(n){i.e(n)}finally{i.f()}h=null}}}i&&a&&(b()?a(null,i):h.push(a))},x=S,C="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",A={name:"Tinymce",components:{editorImage:m},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"},hasUpload:{type:Boolean,required:!1,default:!0}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;x(C,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:y,menubar:this.menubar,plugins:p,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",i.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},I=A,k=(i("28b5"),Object(u["a"])(I,a,n,!1,null,"507d25da",null));e["a"]=k.exports},"82d6":function(t,e,i){"use strict";i("c5f3")},8492:function(t,e,i){"use strict";i.d(e,"c",(function(){return n})),i.d(e,"m",(function(){return s})),i.d(e,"e",(function(){return l})),i.d(e,"n",(function(){return c})),i.d(e,"l",(function(){return o})),i.d(e,"d",(function(){return r})),i.d(e,"j",(function(){return u})),i.d(e,"o",(function(){return d})),i.d(e,"a",(function(){return m})),i.d(e,"b",(function(){return v})),i.d(e,"p",(function(){return p})),i.d(e,"q",(function(){return g})),i.d(e,"r",(function(){return y})),i.d(e,"k",(function(){return f})),i.d(e,"h",(function(){return h})),i.d(e,"i",(function(){return b})),i.d(e,"f",(function(){return S})),i.d(e,"g",(function(){return x}));i("e9c4");var a=i("b775");function n(t,e){return Object(a["a"])({url:"/system/merchant/getMerchants?size="+t.size+"&current="+t.current,method:"post",data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var i in t)""===t[i]&&delete t[i];return t=JSON.stringify(t),t}]})}function s(t){return Object(a["a"])({url:"/system/merchant/isOrNoAuthentication",method:"post",params:t})}function l(t,e){return Object(a["a"])({url:"/system/merchant/getApplyGetMerchant?size="+t.size+"&current="+t.current,method:"post",data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var i in t)""===t[i]&&delete t[i];return t=JSON.stringify(t),t}]})}function c(t){return Object(a["a"])({url:"/system/merchant/isOrNoGetAuthentication",method:"post",params:t})}function o(t){return Object(a["a"])({url:"/system/merchant/groundingOrUndercarriage",method:"get",params:t})}function r(t){return Object(a["a"])({url:"/system/merchant/getMerchantInfo",method:"post",params:{merchantId:t}})}function u(t,e){return Object(a["a"])({url:"/system/merchant/getRecommendedMerchants",method:"post",params:t,data:e,transformRequest:[function(t,e){for(var i in t)""===t[i]&&delete t[i];return t=JSON.stringify(t),t}]})}function d(t){return Object(a["a"])({url:"/system/merchant/recommendMerchant",method:"get",params:t})}function m(t){return Object(a["a"])({url:"/system/merchant/CancelRecommended",method:"get",params:t})}function v(t){return Object(a["a"])({url:"/api/v1/merchant/dataAnalysis",method:"get",params:t,headers:{loginToken:"adminLoginToken"}})}function p(t){return Object(a["a"])({url:"/api/v1/merchant/update",method:"post",data:t,headers:{loginToken:"adminLoginToken"}})}function g(t){return Object(a["a"])({url:"/system/merchant/updateMerchantViPEndTime",method:"get",params:t})}function y(t){return Object(a["a"])({url:"/system/merchant/vip/update",method:"get",params:t})}function f(t){return Object(a["a"])({url:"/api/v1/store/query/merchant",method:"get",params:t,headers:{loginToken:"adminLoginToken"}})}function h(t){return Object(a["a"])({url:"/system/wallet/get/"+t,method:"get"})}function b(t,e){return Object(a["a"])({url:"/system/wallet/getDetail/"+e,method:"get",params:t})}function S(t,e){return Object(a["a"])({url:"/system/merchant/vip/changePages",method:"post",params:t,data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var i in t)""===t[i]&&delete t[i];return t=JSON.stringify(t),t}]})}function x(t,e){return Object(a["a"])({url:"/system/merchant/vip/rechargePages",method:"post",params:t,data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var i in t)""===t[i]&&delete t[i];return t=JSON.stringify(t),t}]})}},"8c5e":function(t,e,i){},9039:function(t,e,i){},"92f2":function(t,e,i){"use strict";i("987d")},"987d":function(t,e,i){},"9ab0":function(t,e,i){"use strict";i("d215")},"9b68":function(t,e,i){},"9cb8":function(t,e,i){},"9cd2":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-row",{staticClass:"avtivity-editor-container",class:{fullScreen:t.isFullScreen}},[i("el-row",{staticClass:"action-bar",attrs:{type:"flex",align:"middle",justify:"space-between"}},[i("div",{staticClass:"left",staticStyle:{"padding-left":"15px"}},[i("router-link",{staticStyle:{color:"#409EFF"},attrs:{target:"_blank",to:"/merchant/detail/"+t.activity.merchantId}},[t._v("商家:"+t._s(t.merchant.name))])],1),i("div",{staticClass:"right",staticStyle:{"padding-right":"15px"}},[i("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.goList()}}},[t._v("取消")]),i("el-button",{staticStyle:{"min-width":"120px"},attrs:{size:"small",type:"primary",disabled:t.disabledPublishButton},on:{click:function(e){return t.publish()}}},[t._v("发布")]),i("el-button",{staticClass:"btn-fullScreen",attrs:{size:"small"},on:{click:function(e){t.isFullScreen=!t.isFullScreen}}},[t._v(t._s(t.isFullScreen?"退出全屏":"全屏"))])],1)]),i("el-scrollbar",{staticClass:"devicewin",staticStyle:{display:"none"}},[i("div",{staticClass:"device"},[i("div",{staticClass:"device-header"},[i("div",{staticClass:"icons"},[i("svg-icon",{staticStyle:{float:"left"},attrs:{"icon-class":"wifi"}}),i("svg-icon",{staticStyle:{float:"right"},attrs:{"icon-class":"battery"}}),i("svg-icon",{staticStyle:{float:"right"},attrs:{"icon-class":"signal"}})],1),i("div",{staticStyle:{position:"relative"}},[i("div",{staticClass:"text"},[t._v(t._s(t.activity.title))]),i("svg-icon",{staticClass:"xiaochengxu",staticStyle:{display:"none"},attrs:{"icon-class":"xiaochengxu"}})],1)]),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],staticClass:"device-frame",attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}})])]),t.pageLoading?t._e():i("div",{attrs:{id:"propertywin"}},[i("el-tabs",{staticClass:"top-tab",attrs:{type:"card"},model:{value:t.activeTabName,callback:function(e){t.activeTabName=e},expression:"activeTabName"}},[i("el-tab-pane",{attrs:{label:"基本设置",name:"first"}},[i("el-scrollbar",{staticClass:"tab-content-inner"},[i("div",{staticStyle:{padding:"16px"}},[1==t.type?i("base-apply-setting",{attrs:{activity:t.activity,dataObj:t.dataObj}}):t._e(),6==t.type?i("base-group-setting",{attrs:{activity:t.activity,dataObj:t.dataObj}}):t._e(),4==t.type?i("base-cut-setting",{attrs:{activity:t.activity,dataObj:t.dataObj}}):t._e(),7==t.type?i("base-vote-setting",{attrs:{activity:t.activity,dataObj:t.dataObj}}):t._e(),5==t.type?i("base-seckill-setting",{attrs:{activity:t.activity,dataObj:t.dataObj}}):t._e(),-1!=t.discountTypes.indexOf(1*t.type)?i("base-discount-setting",{attrs:{activity:t.activity}}):t._e()],1)])],1),i("el-tab-pane",{attrs:{label:t.activityTypes[t.type]+"管理",name:"second"}},[i("el-scrollbar",{staticClass:"tab-content-inner"},[i("div",{staticStyle:{padding:"16px"}},[1==t.type?i("type-apply-setting",{attrs:{activity:t.activity,merchantId:t.merchantId}}):t._e(),6==t.type?i("type-group-setting",{attrs:{activity:t.activity,merchantId:t.merchantId}}):t._e(),4==t.type?i("type-cut-setting",{attrs:{activity:t.activity,merchantId:t.merchantId}}):t._e(),7==t.type?i("type-vote-setting",{attrs:{activity:t.activity,merchantId:t.merchantId,dataObj:t.dataObj}}):t._e(),5==t.type?i("type-seckill-setting",{attrs:{activity:t.activity,merchantId:t.merchantId,dataObj:t.dataObj}}):t._e(),-1!=t.discountTypes.indexOf(1*t.type)?i("type-discount-setting",{attrs:{activity:t.activity,merchantId:t.merchantId}}):t._e()],1)])],1),i("el-tab-pane",{attrs:{label:"高级设置",name:"third"}},[i("el-scrollbar",{staticClass:"tab-content-inner"},[i("div",{staticStyle:{padding:"16px"}},[1==t.type?i("advanced-apply-setting",{attrs:{activity:t.activity,dataObj:t.dataObj}}):t._e(),6==t.type?i("advanced-group-setting",{attrs:{activity:t.activity,dataObj:t.dataObj}}):t._e(),4==t.type?i("advanced-cut-setting",{attrs:{activity:t.activity,dataObj:t.dataObj}}):t._e(),7==t.type?i("advanced-vote-setting",{attrs:{activity:t.activity,dataObj:t.dataObj}}):t._e(),5==t.type?i("advanced-seckill-setting",{attrs:{activity:t.activity,dataObj:t.dataObj}}):t._e(),-1!=t.discountTypes.indexOf(1*t.type)?i("advanced-discount-setting",{attrs:{activity:t.activity}}):t._e()],1)])],1)],1)],1)],1)},s=[],l=(a("e9c4"),a("d3b7"),a("159b"),a("498a"),a("a434"),a("ca41")),c=a("8492"),o=a("3123"),r=a("ed08"),u=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"first",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"活动封面",prop:"introImgs"}},[i("div",[t._v(t._s(t.activity.cover.length)+"/5")]),i("el-upload",{ref:"upload1",attrs:{data:t.dataObj,multiple:"",limit:5,"list-type":"picture-card","file-list":t.coverFileList,action:"http://upload-z2.qiniup.com","on-success":t.handleSuccess,"on-remove":t.handleRemove,"before-upload":t.beforeUpload,"on-change":t.handleChangeCover,"on-exceed":t.handleExceedCover}},[i("i",{staticClass:"el-icon-plus"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（用于活动封面，尺寸为750*400最佳,最多5张）")])])],1),i("el-form-item",{attrs:{label:"活动标题",prop:"title"}},[i("el-input",{attrs:{maxlength:"50"},model:{value:t.activity.title,callback:function(e){t.$set(t.activity,"title",e)},expression:"activity.title"}})],1),i("el-form-item",{attrs:{label:"报名开始",prop:"startTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择报名开始时间"},model:{value:t.activity.startTime,callback:function(e){t.$set(t.activity,"startTime",e)},expression:"activity.startTime"}})],1),i("el-form-item",{attrs:{label:"报名结束",prop:"endTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择报名结束时间"},model:{value:t.activity.endTime,callback:function(e){t.$set(t.activity,"endTime",e)},expression:"activity.endTime"}})],1),i("el-form-item",{attrs:{label:"活动开始/截止时间"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":"0"},model:{value:t.activity.enableActivityTime,callback:function(e){t.$set(t.activity,"enableActivityTime",e)},expression:"activity.enableActivityTime"}})],1),t.activity.enableActivityTime>0?i("el-form-item",{attrs:{label:"活动开始",prop:"activityStartTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择活动开始时间"},model:{value:t.activity.activityStartTime,callback:function(e){t.$set(t.activity,"activityStartTime",e)},expression:"activity.activityStartTime"}})],1):t._e(),t.activity.enableActivityTime>0?i("el-form-item",{attrs:{label:"活动结束",prop:"activityEndTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择活动结束时间"},model:{value:t.activity.activityEndTime,callback:function(e){t.$set(t.activity,"activityEndTime",e)},expression:"activity.activityEndTime"}})],1):t._e(),i("el-form-item",{attrs:{label:"活动地址"}},[Object.keys(t.activity.address).length>0?i("div",[i("el-input",{attrs:{value:(t.activity.address.province===t.activity.address.city?"":t.activity.address.province)+t.activity.address.city+t.activity.address.distinct+t.activity.address.detail}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-location-outline"},on:{click:function(e){return e.preventDefault(),t.getLocation()}},slot:"append"})],1)],1):i("div",[i("el-input",{attrs:{value:""}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-location-outline"},on:{click:function(e){return e.preventDefault(),t.getLocation()}},slot:"append"})],1)],1)]),i("el-form-item",{attrs:{label:"详细地址描述"}},[i("el-input",{model:{value:t.activity.address.tips,callback:function(e){t.$set(t.activity.address,"tips",e)},expression:"activity.address.tips"}})],1),i("el-form-item",{attrs:{label:"活动详情"}},[t._l(t.activity.content,(function(e,a){return t.activity.content.length>0?i("div",{key:e.id,staticStyle:{display:"flex","align-items":"flex-start","margin-bottom":"15px"}},[e?i("div",{staticStyle:{margin:"0 10px 0 0",width:"610px"}},[i("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.contentTypes[e.type]))]),"label"==e.type?i("div",[i("el-select",{staticStyle:{width:"600px"},attrs:{"popper-class":"hiddenDown",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请输入标签"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1):t._e(),"text"==e.type?i("Tinymce",{ref:"editor1",refInFor:!0,attrs:{height:150,toolbar:t.toolbar,menubar:t.menubar,hasUpload:!1},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}}):t._e(),"bigImg"==e.type?i("div",{staticClass:"bigImg"},[i("div",{staticClass:"img-preview"},["string"===typeof e.value?i("div",{staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.value}})]):t._l(e.value,(function(e,n){return i("div",{key:n,staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a,n)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e}})])}))],2)]):t._e(),"smallImg"==e.type?i("div",{staticClass:"smallImg"},[i("div",[t._v(t._s(e.value.length)+"/9")]),i("div",{staticClass:"img-preview"},t._l(e.value,(function(e,n){return i("div",{key:n,staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a,n)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e}})])})),0),e.value.length<9?i("div",{staticClass:"editor-container"},[t.dataObj.token?i("dropzone",{staticClass:"myVueDropzone",attrs:{id:"myVueDropzone-"+a,url:"http://upload-z2.qiniup.com",token:t.dataObj.token,showRemoveLink:!1},on:{"dropzone-removedFile":t.dropzoneR,"dropzone-success":function(e,i){return t.dropzoneS(e,i,a,9)},"dropzone-error":t.dropzoneE}}):t._e()],1):t._e()]):t._e(),"video"==e.type?i("div",[i("el-upload",{staticClass:"uploader",attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","on-success":function(e,i){return t.handleContentUploadSuccess(e,i,"","video",a,"value")},"on-remove":function(e){return t.handleContentRemove(e,"video",a)}}},[e.value.length>0?i("video",{staticClass:"avatar2",attrs:{controls:"",width:"500"}},[i("source",{attrs:{src:e.value}}),t._v(" Sorry, your browser doesn't support embedded videos. ")]):i("i",{staticClass:"el-icon-plus uploader-icon"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（尺寸为720*416最佳）")])])],1):t._e()],1):t._e(),i("div",{staticStyle:{"margin-top":"20px"}},[i("el-button",{attrs:{type:"danger",plain:"",circle:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.removeConItem(a)}}}),i("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"mini",icon:"el-icon-arrow-up",disabled:1==a&&"label"==t.activity.content[0].type||0==a},on:{click:function(i){return i.preventDefault(),t.upConItem(e,a)}}}),i("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"mini",icon:"el-icon-arrow-down",disabled:"label"==e.type||a==t.activity.content.length-1},on:{click:function(i){return i.preventDefault(),t.downConItem(e,a)}}})],1)]):t._e()})),i("div",{staticClass:"action",staticStyle:{height:"0",overflow:"hidden"}},[t.dataObj.token?i("dropzone",{staticClass:"myVueDropzone",attrs:{url:"http://upload-z2.qiniup.com",token:t.dataObj.token,showRemoveLink:!1,id:"uploadBigImg"},on:{"dropzone-removedFile":t.dropzoneR,"dropzone-success":function(e,i){return t.dropzoneSBig(e,i)}}}):t._e()],1),i("div",{staticStyle:{"margin-bottom":"20px"}},[i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("text","")}}},[t._v("+添加文字")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("bigImg",[])}}},[t._v("+添加大图")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("smallImg",[])}}},[t._v("+添加小图")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("video","")}}},[t._v("+添加视频")]),"label"!==t.activity.content[0].type?i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("label",[])}}},[t._v("+添加标签")]):t._e()],1)],2),i("el-form-item",{attrs:{label:"活动规则"}},[i("Tinymce",{ref:"editor2",attrs:{height:200,toolbar:t.toolbar,menubar:t.menubar,hasUpload:!1},model:{value:t.activity.activityRule,callback:function(e){t.$set(t.activity,"activityRule",e)},expression:"activity.activityRule"}})],1)],1),i("el-dialog",{attrs:{title:"地图",width:"800px",visible:t.mapDialogTableVisible,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(e){t.mapDialogTableVisible=e}}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.markerDetail.address,expression:"markerDetail.address"}],attrs:{id:"address",type:"textbox"},domProps:{value:t.markerDetail.address},on:{input:function(e){e.target.composing||t.$set(t.markerDetail,"address",e.target.value)}}}),i("button",{on:{click:function(e){return e.preventDefault(),t.codeAddress(t.markerDetail.address)}}},[t._v("搜索")]),i("div",{staticStyle:{"min-height":"400px"},attrs:{id:"mapContainer"}}),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.mapDialogTableVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.mapDialogTableVisible=!1,t.activity.address=Object.assign({},t.markersResult)}}},[t._v("确 定")])],1)])],1)},d=[],m=a("ade3"),v=(a("b0c0"),a("99af"),a("d81d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:t.id,staticClass:"dropzone",attrs:{id:t.id,action:t.url}},[i("input",{attrs:{type:"file",name:"file"}})])}),p=[],g=(a("a9e3"),a("79e3")),y=a.n(g);a("7bc1");y.a.autoDiscover=!1;var f,h,b,S,x,C={props:{id:{type:String,required:!0},url:{type:String,required:!0},clickable:{type:Boolean,default:!0},defaultMsg:{type:String,default:"上传图片"},acceptedFiles:{type:String,default:""},thumbnailHeight:{type:Number,default:0},thumbnailWidth:{type:Number,default:0},showRemoveLink:{type:Boolean,default:!0},maxFilesize:{type:Number,default:2},maxFiles:{type:Number,default:300},autoProcessQueue:{type:Boolean,default:!0},useCustomDropzoneOptions:{type:Boolean,default:!1},defaultImg:{default:"",type:[String,Array]},couldPaste:{type:Boolean,default:!1},token:{type:String,default:""}},data:function(){return{dropzone:"",initOnce:!0}},watch:{defaultImg:function(t){0!==t.length?this.initOnce&&(this.initImages(t),this.initOnce=!1):this.initOnce=!1}},mounted:function(){var t=this,e=document.getElementById(this.id),i=this;this.dropzone=new y.a(e,{clickable:this.clickable,thumbnailWidth:this.thumbnailWidth,thumbnailHeight:this.thumbnailHeight,maxFiles:this.maxFiles,maxFilesize:this.maxFilesize,dictRemoveFile:"Remove",addRemoveLinks:this.showRemoveLink,acceptedFiles:this.acceptedFiles,autoProcessQueue:this.autoProcessQueue,dictDefaultMessage:'<i style="margin-top: 3em;display: inline-block" class="material-icons">'+this.defaultMsg+"</i><br>",dictMaxFilesExceeded:"最多上传"+this.maxFiles+"张图片",previewTemplate:'<div class="dz-preview dz-file-preview"></div>',init:function(){var t=this,e=i.defaultImg;if(e)if(Array.isArray(e)){if(0===e.length)return;e.map((function(e,a){var n={name:"name"+a,size:12345,url:e};return t.options.addedfile.call(t,n),t.options.thumbnail.call(t,n,e),n.previewElement.classList.add("dz-success"),n.previewElement.classList.add("dz-complete"),i.initOnce=!1,!0}))}else{var a={name:"name",size:12345,url:e};this.options.addedfile.call(this,a),this.options.thumbnail.call(this,a,e),a.previewElement.classList.add("dz-success"),a.previewElement.classList.add("dz-complete"),i.initOnce=!1}},accept:function(e,i){e.token=t.token,i()},sending:function(t,e,a){a.append("token",t.token),i.initOnce=!1}}),this.couldPaste&&document.addEventListener("paste",this.pasteImg),this.dropzone.on("success",(function(t,e){i.$emit("dropzone-success",t,e,i.dropzone.element)})),this.dropzone.on("addedfile",(function(t){i.$emit("dropzone-fileAdded",t)})),this.dropzone.on("removedfile",(function(t){i.$emit("dropzone-removedFile",t)})),this.dropzone.on("error",(function(t,e,a){i.$emit("dropzone-error",t,e,a)})),this.dropzone.on("successmultiple",(function(t,e,a){i.$emit("dropzone-successmultiple",t,e,a)}))},destroyed:function(){document.removeEventListener("paste",this.pasteImg),this.dropzone.destroy()},methods:{removeAllFiles:function(){this.dropzone.removeAllFiles(!0)},processQueue:function(){this.dropzone.processQueue()},pasteImg:function(t){var e=(t.clipboardData||t.originalEvent.clipboardData).items;"file"===e[0].kind&&this.dropzone.addFile(e[0].getAsFile())},initImages:function(t){var e=this;if(t)if(Array.isArray(t))t.map((function(t,i){var a={name:"name"+i,size:12345,url:t};return e.dropzone.options.addedfile.call(e.dropzone,a),e.dropzone.options.thumbnail.call(e.dropzone,a,t),a.previewElement.classList.add("dz-success"),a.previewElement.classList.add("dz-complete"),!0}));else{var i={name:"name",size:12345,url:t};this.dropzone.options.addedfile.call(this.dropzone,i),this.dropzone.options.thumbnail.call(this.dropzone,i,t),i.previewElement.classList.add("dz-success"),i.previewElement.classList.add("dz-complete")}}}},A=C,I=(a("7df3"),a("2877")),k=Object(I["a"])(A,v,p,!1,null,"45849cc4",null),_=k.exports,w=a("008f"),z=a.n(w),O=a("8256"),Y=a("c437"),Z=a.n(Y),T="UUSBZ-O7S3K-US5JP-AY4LI-KQA7K-O2B6S",$={name:"BaseApply",components:{Tinymce:O["a"],Dropzone:_},props:{activity:{type:Object,default:function(){return{}}},dataObj:{type:Object,default:function(){return{token:""}}}},data:function(){return{toolbar:[""],menubar:"",contentTypes:{bigImg:"大图",smallImg:"小图",text:"文字",video:"视频",label:"标签"},rules:{},coverFileList:[],map:null,geocoder:null,mapDialogTableVisible:!1,markersArray:[],markerDetail:{address:"北京,海淀区,海淀大街58号",latLng:{}},markersResult:{province:"",city:"",distinct:"",detail:"",tips:""}}},created:function(){this.init()},mounted:function(){console.log("mounted..")},methods:(f={dropzoneS:function(t,e,i,a){if(a&&(console.log(this.activity.content[i].value.length),this.activity.content[i].value.length===a))this.$message.warning("最多上传"+a+"张图片");else{var n="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+e.key;this.activity.content[i].value.push(n),this.$message({message:"上传成功",type:"success"})}},dropzoneSBig:function(t,e){var i=Z()(),a="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+e.key,n=[];n.push(a),this.activity.content.push({type:"bigImg",value:n,id:i})},dropzoneR:function(t){},dropzoneE:function(t,e,i){this.$message.error(e),console.log(i)},dropzoneA:function(t,e,i){},deleteImg:function(t,e){e?this.activity.content[t].value.splice(e,1):this.activity.content[t].value=[]},fetchToken:function(){var t=this;Object(o["a"])().then((function(e){var i=e.data;t._data.dataObj.token=i}))},init:function(){var t=this;this.coverFileList=[],this.activity.cover.forEach((function(e,i){var a={name:"",uid:i,url:e,status:"success"};t.coverFileList.push(a)}))},handleSuccess:function(t,e){this.activity.cover.push("https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key),this.coverFileList.push({name:e.name,uid:e.uid,url:"https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key,status:"success"})},handleRemove:function(t,e){var i="";i=t.response?"https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.response.key:t.url;var a=this.activity.cover.indexOf(i);a>-1&&this.activity.cover.splice(a,1)},beforeUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传图片大小不能超过 20MB!"),e},handleChangeCover:function(t,e){this.coverFileList=e},handleExceedCover:function(t,e){this.$message.warning("最多传5张，加上此次选取的 ".concat(t.length," 张图片, 总共 ").concat(t.length+e.length))},handleExceedSmallImg:function(t,e){this.$message.warning("最多传9张，加上此次选取的 ".concat(t.length," 张图片, 总共 ").concat(t.length+e.length))},removeConItem:function(t){1===this.activity.content.length?this.$message.warning("活动详情不能为空，请添加其他类型再删除当前的内容"):this.activity.content.splice(t,1)},upConItem:function(t,e){var i=e,a=e-1;this.activity.content.splice(i,1),this.activity.content.splice(a,0,t)},downConItem:function(t,e){var i=e,a=e+1;this.activity.content.splice(i,1),this.activity.content.splice(a,0,t)},addCon:function(t,e){var i=Z()();"label"===t?"label"!==this.activity.content[0].type&&this.activity.content.unshift({type:t,value:e,id:i}):"bigImg"===t?document.getElementById("uploadBigImg").click():this.activity.content.push({type:t,value:e,id:i})}},Object(m["a"])(f,"beforeUpload",(function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传图片大小不能超过 20MB!"),e})),Object(m["a"])(f,"handleContentUploadSuccess",(function(t,e,i,a,n,s){this.activity.content[n][s]="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key})),Object(m["a"])(f,"handleContentRemove",(function(t,e,i){this.activity.content.splice(i,1)})),Object(m["a"])(f,"initMap",(function(){var t=this,e=this;z.a.init(T,(function(){var i=new qq.maps.LatLng(39.916527,116.397128),a={zoom:8,center:i,mapTypeId:qq.maps.MapTypeId.ROADMAP};t.map=new qq.maps.Map(document.getElementById("mapContainer"),a),qq.maps.event.addDomListener(t.map,"click",(function(t){e.deleteOverlays(),e.addMarker(t.latLng),e.codeLatLng(t.latLng)}));var n=new qq.maps.InfoWindow({map:t.map});t.geocoder=new qq.maps.Geocoder,t.geocoder.setComplete((function(t){console.log(t),e.deleteOverlays(),e.map.setCenter(t.detail.location);var i=e.addMarker(t.detail.location);e.markersResult.province=t.detail.addressComponents.province||"",e.markersResult.city=t.detail.addressComponents.city||"",e.markersResult.distinct=t.detail.addressComponents.distinct||"",e.markersResult.detail=(t.detail.addressComponents.town||"")+(t.detail.addressComponents.village||"")+(t.detail.addressComponents.street||"")+(t.detail.addressComponents.streetNumber||""),e.markerDetail.address=t.detail.address,e.markerDetail.latLng=t.detail.location,qq.maps.event.addListener(i,"click",(function(){n.open(),n.setContent('<div style="width:280px;height:100px;">'+t.detail.address+"<br />("+t.detail.location+")</div>"),n.setPosition(t.detail.location)}))})),t.geocoder.setError((function(){alert("出错了，请输入正确的地址！！！")}))}))})),Object(m["a"])(f,"clearOverlays",(function(){if(this.markersArray)for(i in this.markersArray)this.markersArray[i].setMap(null)})),Object(m["a"])(f,"deleteOverlays",(function(){if(console.log("deleteOverlays"),this.markersArray){for(var t in this.markersArray)this.markersArray[t].setMap(null);this.markersArray=[]}})),Object(m["a"])(f,"addMarker",(function(t){var e=new qq.maps.Marker({position:t,map:this.map});return this.markersArray.push(e),e})),Object(m["a"])(f,"codeAddress",(function(t){this.geocoder.getLocation(t)})),Object(m["a"])(f,"codeLatLng",(function(t){this.geocoder.getAddress(t)})),Object(m["a"])(f,"getLocation",(function(){this.mapDialogTableVisible=!0,this.initMap()})),f)},j=$,U=(a("10ea"),a("2c00"),Object(I["a"])(j,u,d,!1,null,"70ba1409",null)),M=U.exports,V=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"first",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"活动封面",prop:"introImgs"}},[i("div",[t._v(t._s(t.activity.cover.length)+"/5")]),i("el-upload",{ref:"upload2",attrs:{data:t.dataObj,multiple:"",limit:5,"list-type":"picture-card","file-list":t.coverFileList,action:"http://upload-z2.qiniup.com","on-success":t.handleSuccess,"on-remove":t.handleRemove,"before-upload":t.beforeUpload,"on-change":t.handleChangeCover,"on-exceed":t.handleExceedCover}},[i("i",{staticClass:"el-icon-plus"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（用于活动封面，尺寸为750*400最佳,最多5张）")])])],1),i("el-form-item",{attrs:{label:"活动标题",prop:"title"}},[i("el-input",{attrs:{maxlength:"50"},model:{value:t.activity.title,callback:function(e){t.$set(t.activity,"title",e)},expression:"activity.title"}})],1),i("el-form-item",{attrs:{label:"拼团开始",prop:"startTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择拼团开始时间"},model:{value:t.activity.startTime,callback:function(e){t.$set(t.activity,"startTime",e)},expression:"activity.startTime"}})],1),i("el-form-item",{attrs:{label:"拼团结束",prop:"endTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择拼团结束时间"},model:{value:t.activity.endTime,callback:function(e){t.$set(t.activity,"endTime",e)},expression:"activity.endTime"}})],1),i("el-form-item",{attrs:{label:"活动详情"}},[t._l(t.activity.content,(function(e,a){return t.activity.content.length>0?i("div",{key:e.id,staticStyle:{display:"flex","align-items":"flex-start","margin-bottom":"15px"}},[e?i("div",{staticStyle:{margin:"0 10px 0 0",width:"610px"}},[i("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.contentTypes[e.type]))]),"label"==e.type?i("div",[i("el-select",{staticStyle:{width:"600px"},attrs:{"popper-class":"hiddenDown",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请输入标签"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1):t._e(),"text"==e.type?i("Tinymce",{ref:"editor1",refInFor:!0,attrs:{height:150,toolbar:t.toolbar,menubar:t.menubar,hasUpload:!1},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}}):t._e(),"bigImg"==e.type?i("div",{staticClass:"bigImg"},[i("div",{staticClass:"img-preview"},["string"===typeof e.value?i("div",{staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.value}})]):t._l(e.value,(function(e,n){return i("div",{key:n,staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a,n)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e}})])}))],2)]):t._e(),"smallImg"==e.type?i("div",{staticClass:"smallImg"},[i("div",[t._v(t._s(e.value.length)+"/9")]),i("div",{staticClass:"img-preview"},t._l(e.value,(function(e,n){return i("div",{key:n,staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a,n)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e}})])})),0),e.value.length<9?i("div",{staticClass:"editor-container"},[t.dataObj.token?i("dropzone",{staticClass:"myVueDropzone",attrs:{id:"myVueDropzone-"+a,url:"http://upload-z2.qiniup.com",token:t.dataObj.token,showRemoveLink:!1},on:{"dropzone-removedFile":t.dropzoneR,"dropzone-success":function(e,i){return t.dropzoneS(e,i,a,9)},"dropzone-error":t.dropzoneE}}):t._e()],1):t._e()]):t._e(),"video"==e.type?i("div",[i("el-upload",{staticClass:"uploader",attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","on-success":function(e,i){return t.handleContentUploadSuccess(e,i,"","video",a,"value")},"on-remove":function(e){return t.handleContentRemove(e,"video",a)}}},[e.value.length>0?i("video",{staticClass:"avatar2",attrs:{controls:"",width:"500"}},[i("source",{attrs:{src:e.value}}),t._v(" Sorry, your browser doesn't support embedded videos. ")]):i("i",{staticClass:"el-icon-plus uploader-icon"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（尺寸为720*416最佳）")])])],1):t._e()],1):t._e(),i("div",{staticStyle:{"margin-top":"20px"}},[i("el-button",{attrs:{type:"danger",plain:"",circle:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.removeConItem(a)}}}),i("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"mini",icon:"el-icon-arrow-up",disabled:1==a&&"label"==t.activity.content[0].type||0==a},on:{click:function(i){return i.preventDefault(),t.upConItem(e,a)}}}),i("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"mini",icon:"el-icon-arrow-down",disabled:"label"==e.type||a==t.activity.content.length-1},on:{click:function(i){return i.preventDefault(),t.downConItem(e,a)}}})],1)]):t._e()})),i("div",{staticClass:"action",staticStyle:{height:"0",overflow:"hidden"}},[t.dataObj.token?i("dropzone",{staticClass:"myVueDropzone",attrs:{url:"http://upload-z2.qiniup.com",token:t.dataObj.token,showRemoveLink:!1,id:"uploadBigImg"},on:{"dropzone-removedFile":t.dropzoneR,"dropzone-success":function(e,i){return t.dropzoneSBig(e,i)}}}):t._e()],1),i("div",{staticStyle:{"margin-bottom":"20px"}},[i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("text","")}}},[t._v("+添加文字")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("bigImg",[])}}},[t._v("+添加大图")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("smallImg",[])}}},[t._v("+添加小图")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("video","")}}},[t._v("+添加视频")]),"label"!==t.activity.content[0].type?i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("label",[])}}},[t._v("+添加标签")]):t._e()],1)],2),i("el-form-item",{attrs:{label:"活动规则"}},[i("Tinymce",{ref:"editor2",attrs:{height:200,toolbar:t.toolbar,menubar:t.menubar,hasUpload:!1},model:{value:t.activity.activityRule,callback:function(e){t.$set(t.activity,"activityRule",e)},expression:"activity.activityRule"}})],1)],1)],1)},q=[],E={name:"BaseGroup",components:{Tinymce:O["a"],Dropzone:_},props:{activity:{type:Object,default:function(){return{}}},dataObj:{type:Object,default:function(){return{token:""}}}},data:function(){return{toolbar:[""],menubar:"",contentTypes:{bigImg:"大图",smallImg:"小图",text:"文字",video:"视频",label:"标签"},rules:{},coverFileList:[]}},created:function(){console.log("created.."),console.log(this.activity),this.init()},mounted:function(){},methods:(h={dropzoneS:function(t,e,i,a){if(a&&(console.log(a),console.log(this.activity.content[i].value.length),this.activity.content[i].value.length===a))this.$message.warning("最多上传"+a+"张图片");else{var n="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+e.key;this.activity.content[i].value.push(n),this.$message({message:"上传成功",type:"success"})}},dropzoneSBig:function(t,e){var i=Z()(),a="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+e.key,n=[];n.push(a),this.activity.content.push({type:"bigImg",value:n,id:i})},dropzoneR:function(t){},dropzoneE:function(t,e,i){this.$message.error(e),console.log(i)},dropzoneA:function(t){},deleteImg:function(t,e){e?this.activity.content[t].value.splice(e,1):this.activity.content[t].value=[]},fetchToken:function(){var t=this;Object(o["a"])().then((function(e){var i=e.data;t._data.dataObj.token=i}))},init:function(){var t=this;this.coverFileList=[],this.activity.cover.forEach((function(e,i){var a={name:"",uid:i,url:e,status:"success"};t.coverFileList.push(a)}))},handleSuccess:function(t,e){this.activity.cover.push("https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key),this.coverFileList.push({name:e.name,uid:e.uid,url:"https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key,status:"success"})},handleRemove:function(t,e){var i="";i=t.response?"https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.response.key:t.url;var a=this.activity.cover.indexOf(i);a>-1&&this.activity.cover.splice(a,1)},beforeUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传图片大小不能超过 20MB!"),e},handleChangeCover:function(t,e){this.coverFileList=e},handleExceedCover:function(t,e){this.$message.warning("最多传5张，加上此次选取的 ".concat(t.length," 张图片, 总共 ").concat(t.length+e.length))},handleExceedSmallImg:function(t,e){this.$message.warning("最多传9张，加上此次选取的 ".concat(t.length," 张图片, 总共 ").concat(t.length+e.length))},removeConItem:function(t){1===this.activity.content.length?this.$message.warning("活动详情不能为空，请添加其他类型再删除当前的内容"):this.activity.content.splice(t,1)},upConItem:function(t,e){var i=e,a=e-1;this.activity.content.splice(i,1),this.activity.content.splice(a,0,t)},downConItem:function(t,e){var i=e,a=e+1;this.activity.content.splice(i,1),this.activity.content.splice(a,0,t)},addCon:function(t,e){var i=Z()();"label"===t?"label"!==this.activity.content[0].type&&this.activity.content.unshift({type:t,value:e,id:i}):"bigImg"===t?document.getElementById("uploadBigImg").click():this.activity.content.push({type:t,value:e,id:i})}},Object(m["a"])(h,"beforeUpload",(function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传图片大小不能超过 20MB!"),e})),Object(m["a"])(h,"handleContentUploadSuccess",(function(t,e,i,a,n,s){this.activity.content[n][s]="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key})),Object(m["a"])(h,"handleContentRemove",(function(t,e,i){this.activity.content.splice(i,1)})),h)},D=E,B=(a("686f"),a("101d"),Object(I["a"])(D,V,q,!1,null,"3ec5f19e",null)),R=B.exports,L=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"first",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"活动封面",prop:"introImgs"}},[i("div",[t._v(t._s(t.activity.cover.length)+"/5")]),i("el-upload",{ref:"upload2",attrs:{data:t.dataObj,multiple:"",limit:5,"list-type":"picture-card","file-list":t.coverFileList,action:"http://upload-z2.qiniup.com","on-success":t.handleSuccess,"on-remove":t.handleRemove,"before-upload":t.beforeUpload,"on-change":t.handleChangeCover,"on-exceed":t.handleExceedCover}},[i("i",{staticClass:"el-icon-plus"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（用于活动封面，尺寸为750*400最佳,最多5张）")])])],1),i("el-form-item",{attrs:{label:"活动标题",prop:"title"}},[i("el-input",{attrs:{maxlength:"50"},model:{value:t.activity.title,callback:function(e){t.$set(t.activity,"title",e)},expression:"activity.title"}})],1),i("el-form-item",{attrs:{label:"砍价开始",prop:"startTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择砍价开始时间"},model:{value:t.activity.startTime,callback:function(e){t.$set(t.activity,"startTime",e)},expression:"activity.startTime"}})],1),i("el-form-item",{attrs:{label:"砍价结束",prop:"endTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择砍价结束时间"},model:{value:t.activity.endTime,callback:function(e){t.$set(t.activity,"endTime",e)},expression:"activity.endTime"}})],1),i("el-form-item",{attrs:{label:"活动详情"}},[t._l(t.activity.content,(function(e,a){return t.activity.content.length>0?i("div",{key:e.id,staticStyle:{display:"flex","align-items":"flex-start","margin-bottom":"15px"}},[e?i("div",{staticStyle:{margin:"0 10px 0 0",width:"610px"}},[i("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.contentTypes[e.type]))]),"label"==e.type?i("div",[i("el-select",{staticStyle:{width:"600px"},attrs:{"popper-class":"hiddenDown",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请输入标签"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1):t._e(),"text"==e.type?i("Tinymce",{ref:"editor1",refInFor:!0,attrs:{height:150,toolbar:t.toolbar,menubar:t.menubar,hasUpload:!1},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}}):t._e(),"bigImg"==e.type?i("div",{staticClass:"bigImg"},[i("div",{staticClass:"img-preview"},["string"===typeof e.value?i("div",{staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.value}})]):t._l(e.value,(function(e,n){return i("div",{key:n,staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a,n)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e}})])}))],2)]):t._e(),"smallImg"==e.type?i("div",{staticClass:"smallImg"},[i("div",[t._v(t._s(e.value.length)+"/9")]),i("div",{staticClass:"img-preview"},t._l(e.value,(function(e,n){return i("div",{key:n,staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a,n)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e}})])})),0),e.value.length<9?i("div",{staticClass:"editor-container"},[t.dataObj.token?i("dropzone",{staticClass:"myVueDropzone",attrs:{id:"myVueDropzone-"+a,url:"http://upload-z2.qiniup.com",token:t.dataObj.token,showRemoveLink:!1},on:{"dropzone-removedFile":t.dropzoneR,"dropzone-success":function(e,i){return t.dropzoneS(e,i,a,9)},"dropzone-error":t.dropzoneE}}):t._e()],1):t._e()]):t._e(),"video"==e.type?i("div",[i("el-upload",{staticClass:"uploader",attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","on-success":function(e,i){return t.handleContentUploadSuccess(e,i,"","video",a,"value")},"on-remove":function(e){return t.handleContentRemove(e,"video",a)}}},[e.value.length>0?i("video",{staticClass:"avatar2",attrs:{controls:"",width:"500"}},[i("source",{attrs:{src:e.value}}),t._v(" Sorry, your browser doesn't support embedded videos. ")]):i("i",{staticClass:"el-icon-plus uploader-icon"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（尺寸为720*416最佳）")])])],1):t._e()],1):t._e(),i("div",{staticStyle:{"margin-top":"20px"}},[i("el-button",{attrs:{type:"danger",plain:"",circle:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.removeConItem(a)}}}),i("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"mini",icon:"el-icon-arrow-up",disabled:1==a&&"label"==t.activity.content[0].type||0==a},on:{click:function(i){return i.preventDefault(),t.upConItem(e,a)}}}),i("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"mini",icon:"el-icon-arrow-down",disabled:"label"==e.type||a==t.activity.content.length-1},on:{click:function(i){return i.preventDefault(),t.downConItem(e,a)}}})],1)]):t._e()})),i("div",{staticClass:"action",staticStyle:{height:"0",overflow:"hidden"}},[t.dataObj.token?i("dropzone",{staticClass:"myVueDropzone",attrs:{url:"http://upload-z2.qiniup.com",token:t.dataObj.token,showRemoveLink:!1,id:"uploadBigImg"},on:{"dropzone-removedFile":t.dropzoneR,"dropzone-success":function(e,i){return t.dropzoneSBig(e,i)}}}):t._e()],1),i("div",{staticStyle:{"margin-bottom":"20px"}},[i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("text","")}}},[t._v("+添加文字")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("bigImg",[])}}},[t._v("+添加大图")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("smallImg",[])}}},[t._v("+添加小图")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("video","")}}},[t._v("+添加视频")]),"label"!==t.activity.content[0].type?i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("label",[])}}},[t._v("+添加标签")]):t._e()],1)],2),i("el-form-item",{attrs:{label:"活动规则"}},[i("Tinymce",{ref:"editor2",attrs:{height:200,toolbar:t.toolbar,menubar:t.menubar,hasUpload:!1},model:{value:t.activity.activityRule,callback:function(e){t.$set(t.activity,"activityRule",e)},expression:"activity.activityRule"}})],1)],1)],1)},P=[],N={name:"BaseCutPrice",components:{Tinymce:O["a"],Dropzone:_},props:{activity:{type:Object,default:function(){return{}}},dataObj:{type:Object,default:function(){return{token:""}}}},data:function(){return{toolbar:[""],menubar:"",contentTypes:{bigImg:"大图",smallImg:"小图",text:"文字",video:"视频",label:"标签"},rules:{},coverFileList:[]}},created:function(){console.log("created.."),console.log(this.activity),this.init()},mounted:function(){},methods:(b={dropzoneS:function(t,e,i,a){if(a&&(console.log(a),console.log(this.activity.content[i].value.length),this.activity.content[i].value.length===a))this.$message.warning("最多上传"+a+"张图片");else{var n="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+e.key;this.activity.content[i].value.push(n),this.$message({message:"上传成功",type:"success"})}},dropzoneSBig:function(t,e){var i=Z()(),a="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+e.key,n=[];n.push(a),this.activity.content.push({type:"bigImg",value:n,id:i})},dropzoneR:function(t){},dropzoneE:function(t,e,i){this.$message.error(e),console.log(i)},dropzoneA:function(t){},deleteImg:function(t,e){e?this.activity.content[t].value.splice(e,1):this.activity.content[t].value=[]},fetchToken:function(){var t=this;Object(o["a"])().then((function(e){var i=e.data;t._data.dataObj.token=i}))},init:function(){var t=this;this.coverFileList=[],this.activity.cover.forEach((function(e,i){var a={name:"",uid:i,url:e,status:"success"};t.coverFileList.push(a)}))},handleSuccess:function(t,e){this.activity.cover.push("https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key),this.coverFileList.push({name:e.name,uid:e.uid,url:"https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key,status:"success"})},handleRemove:function(t,e){var i="";i=t.response?"https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.response.key:t.url;var a=this.activity.cover.indexOf(i);a>-1&&this.activity.cover.splice(a,1)},beforeUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传图片大小不能超过 20MB!"),e},handleChangeCover:function(t,e){this.coverFileList=e},handleExceedCover:function(t,e){this.$message.warning("最多传5张，加上此次选取的 ".concat(t.length," 张图片, 总共 ").concat(t.length+e.length))},handleExceedSmallImg:function(t,e){this.$message.warning("最多传9张，加上此次选取的 ".concat(t.length," 张图片, 总共 ").concat(t.length+e.length))},removeConItem:function(t){1===this.activity.content.length?this.$message.warning("活动详情不能为空，请添加其他类型再删除当前的内容"):this.activity.content.splice(t,1)},upConItem:function(t,e){var i=e,a=e-1;this.activity.content.splice(i,1),this.activity.content.splice(a,0,t)},downConItem:function(t,e){var i=e,a=e+1;this.activity.content.splice(i,1),this.activity.content.splice(a,0,t)},addCon:function(t,e){var i=Z()();"label"===t?"label"!==this.activity.content[0].type&&this.activity.content.unshift({type:t,value:e,id:i}):"bigImg"===t?document.getElementById("uploadBigImg").click():this.activity.content.push({type:t,value:e,id:i})}},Object(m["a"])(b,"beforeUpload",(function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传图片大小不能超过 20MB!"),e})),Object(m["a"])(b,"handleContentUploadSuccess",(function(t,e,i,a,n,s){this.activity.content[n][s]="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key})),Object(m["a"])(b,"handleContentRemove",(function(t,e,i){this.activity.content.splice(i,1)})),b)},F=N,Q=(a("1215"),a("d997"),Object(I["a"])(F,L,P,!1,null,"167a98ac",null)),J=Q.exports,W=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"first",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"活动封面",prop:"introImgs"}},[i("div",[t._v(t._s(t.activity.cover.length)+"/5")]),i("el-upload",{ref:"upload2",attrs:{data:t.dataObj,multiple:"",limit:5,"list-type":"picture-card","file-list":t.coverFileList,action:"http://upload-z2.qiniup.com","on-success":t.handleSuccess,"on-remove":t.handleRemove,"before-upload":t.beforeUpload,"on-change":t.handleChangeCover,"on-exceed":t.handleExceedCover}},[i("i",{staticClass:"el-icon-plus"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（用于活动封面，尺寸为750*400最佳,最多5张）")])])],1),i("el-form-item",{attrs:{label:"活动标题",prop:"title"}},[i("el-input",{attrs:{maxlength:"50"},model:{value:t.activity.title,callback:function(e){t.$set(t.activity,"title",e)},expression:"activity.title"}})],1),i("el-form-item",{attrs:{label:"投票开始",prop:"startTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择投票开始时间"},model:{value:t.activity.startTime,callback:function(e){t.$set(t.activity,"startTime",e)},expression:"activity.startTime"}})],1),i("el-form-item",{attrs:{label:"投票结束",prop:"endTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择投票结束时间"},model:{value:t.activity.endTime,callback:function(e){t.$set(t.activity,"endTime",e)},expression:"activity.endTime"}})],1),i("el-form-item",{attrs:{label:"活动详情"}},[t._l(t.activity.content,(function(e,a){return t.activity.content.length>0?i("div",{key:e.id,staticStyle:{display:"flex","align-items":"flex-start","margin-bottom":"15px"}},[e?i("div",{staticStyle:{margin:"0 10px 0 0",width:"610px"}},[i("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.contentTypes[e.type]))]),"label"==e.type?i("div",[i("el-select",{staticStyle:{width:"600px"},attrs:{"popper-class":"hiddenDown",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请输入标签"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1):t._e(),"text"==e.type?i("Tinymce",{ref:"editor1",refInFor:!0,attrs:{height:150,toolbar:t.toolbar,menubar:t.menubar,hasUpload:!1},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}}):t._e(),"bigImg"==e.type?i("div",{staticClass:"bigImg"},[i("div",{staticClass:"img-preview"},["string"===typeof e.value?i("div",{staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.value}})]):t._l(e.value,(function(e,n){return i("div",{key:n,staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a,n)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e}})])}))],2)]):t._e(),"smallImg"==e.type?i("div",{staticClass:"smallImg"},[i("div",[t._v(t._s(e.value.length)+"/9")]),i("div",{staticClass:"img-preview"},t._l(e.value,(function(e,n){return i("div",{key:n,staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a,n)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e}})])})),0),e.value.length<9?i("div",{staticClass:"editor-container"},[t.dataObj.token?i("dropzone",{staticClass:"myVueDropzone",attrs:{id:"myVueDropzone-"+a,url:"http://upload-z2.qiniup.com",token:t.dataObj.token,showRemoveLink:!1},on:{"dropzone-removedFile":t.dropzoneR,"dropzone-success":function(e,i){return t.dropzoneS(e,i,a,9)},"dropzone-error":t.dropzoneE}}):t._e()],1):t._e()]):t._e(),"video"==e.type?i("div",[i("el-upload",{staticClass:"uploader",attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","on-success":function(e,i){return t.handleContentUploadSuccess(e,i,"","video",a,"value")},"on-remove":function(e){return t.handleContentRemove(e,"video",a)}}},[e.value.length>0?i("video",{staticClass:"avatar2",attrs:{controls:"",width:"500"}},[i("source",{attrs:{src:e.value}}),t._v(" Sorry, your browser doesn't support embedded videos. ")]):i("i",{staticClass:"el-icon-plus uploader-icon"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（尺寸为720*416最佳）")])])],1):t._e()],1):t._e(),i("div",{staticStyle:{"margin-top":"20px"}},[i("el-button",{attrs:{type:"danger",plain:"",circle:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.removeConItem(a)}}}),i("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"mini",icon:"el-icon-arrow-up",disabled:1==a&&"label"==t.activity.content[0].type||0==a},on:{click:function(i){return i.preventDefault(),t.upConItem(e,a)}}}),i("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"mini",icon:"el-icon-arrow-down",disabled:"label"==e.type||a==t.activity.content.length-1},on:{click:function(i){return i.preventDefault(),t.downConItem(e,a)}}})],1)]):t._e()})),i("div",{staticClass:"action",staticStyle:{height:"0",overflow:"hidden"}},[t.dataObj.token?i("dropzone",{staticClass:"myVueDropzone",attrs:{url:"http://upload-z2.qiniup.com",token:t.dataObj.token,showRemoveLink:!1,id:"uploadBigImg"},on:{"dropzone-removedFile":t.dropzoneR,"dropzone-success":function(e,i){return t.dropzoneSBig(e,i)}}}):t._e()],1),i("div",{staticStyle:{"margin-bottom":"20px"}},[i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("text","")}}},[t._v("+添加文字")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("bigImg",[])}}},[t._v("+添加大图")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("smallImg",[])}}},[t._v("+添加小图")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("video","")}}},[t._v("+添加视频")]),"label"!==t.activity.content[0].type?i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("label",[])}}},[t._v("+添加标签")]):t._e()],1)],2),i("el-form-item",{attrs:{label:"活动规则"}},[i("Tinymce",{ref:"editor2",attrs:{height:200,toolbar:t.toolbar,menubar:t.menubar,hasUpload:!1},model:{value:t.activity.activityRule,callback:function(e){t.$set(t.activity,"activityRule",e)},expression:"activity.activityRule"}})],1)],1)],1)},G=[],X={name:"BaseVote",components:{Tinymce:O["a"],Dropzone:_},props:{activity:{type:Object,default:function(){return{}}},dataObj:{type:Object,default:function(){return{token:""}}}},data:function(){return{toolbar:[""],menubar:"",contentTypes:{bigImg:"大图",smallImg:"小图",text:"文字",video:"视频",label:"标签"},rules:{},coverFileList:[]}},created:function(){this.init()},mounted:function(){},methods:(S={dropzoneS:function(t,e,i,a){if(a&&(console.log(a),console.log(this.activity.content[i].value.length),this.activity.content[i].value.length===a))this.$message.warning("最多上传"+a+"张图片");else{var n="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+e.key;this.activity.content[i].value.push(n),this.$message({message:"上传成功",type:"success"})}},dropzoneSBig:function(t,e){var i=Z()(),a="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+e.key,n=[];n.push(a),this.activity.content.push({type:"bigImg",value:n,id:i})},dropzoneR:function(t){},dropzoneE:function(t,e,i){this.$message.error(e),console.log(i)},dropzoneA:function(t){},deleteImg:function(t,e){e?this.activity.content[t].value.splice(e,1):this.activity.content[t].value=[]},fetchToken:function(){var t=this;Object(o["a"])().then((function(e){var i=e.data;t._data.dataObj.token=i}))},init:function(){var t=this;this.coverFileList=[],this.activity.cover.forEach((function(e,i){var a={name:"",uid:i,url:e,status:"success"};t.coverFileList.push(a)}))},handleSuccess:function(t,e){this.activity.cover.push("https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key),this.coverFileList.push({name:e.name,uid:e.uid,url:"https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key,status:"success"})},handleRemove:function(t,e){var i="";i=t.response?"https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.response.key:t.url;var a=this.activity.cover.indexOf(i);a>-1&&this.activity.cover.splice(a,1)},beforeUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传图片大小不能超过 20MB!"),e},handleChangeCover:function(t,e){this.coverFileList=e},handleExceedCover:function(t,e){this.$message.warning("最多传5张，加上此次选取的 ".concat(t.length," 张图片, 总共 ").concat(t.length+e.length))},handleExceedSmallImg:function(t,e){this.$message.warning("最多传9张，加上此次选取的 ".concat(t.length," 张图片, 总共 ").concat(t.length+e.length))},removeConItem:function(t){1===this.activity.content.length?this.$message.warning("活动详情不能为空，请添加其他类型再删除当前的内容"):this.activity.content.splice(t,1)},upConItem:function(t,e){var i=e,a=e-1;this.activity.content.splice(i,1),this.activity.content.splice(a,0,t)},downConItem:function(t,e){var i=e,a=e+1;this.activity.content.splice(i,1),this.activity.content.splice(a,0,t)},addCon:function(t,e){var i=Z()();"label"===t?"label"!==this.activity.content[0].type&&this.activity.content.unshift({type:t,value:e,id:i}):"bigImg"===t?document.getElementById("uploadBigImg").click():this.activity.content.push({type:t,value:e,id:i})}},Object(m["a"])(S,"beforeUpload",(function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传图片大小不能超过 20MB!"),e})),Object(m["a"])(S,"handleContentUploadSuccess",(function(t,e,i,a,n,s){this.activity.content[n][s]="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key})),Object(m["a"])(S,"handleContentRemove",(function(t,e,i){this.activity.content.splice(i,1)})),S)},H=X,K=(a("0f28"),a("6cd3"),Object(I["a"])(H,W,G,!1,null,"0acd5909",null)),tt=K.exports,et=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"first",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:t.activityTypes[1*t.activity.type]+"名称",prop:""}},[i("el-input",{attrs:{maxlength:"50",placeholder:"控制在30字以内"},model:{value:t.activity.activitySetting.title,callback:function(e){t.$set(t.activity.activitySetting,"title",e)},expression:"activity.activitySetting.title"}})],1),i("el-form-item",{attrs:{label:"开始领取时间",prop:"startTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择开始领取时间"},model:{value:t.activity.startTime,callback:function(e){t.$set(t.activity,"startTime",e)},expression:"activity.startTime"}})],1),i("el-form-item",{attrs:{label:"结束领取时间",prop:"endTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择报名结束时间"},model:{value:t.activity.endTime,callback:function(e){t.$set(t.activity,"endTime",e)},expression:"activity.endTime"}})],1),i("el-form-item",{attrs:{label:"规则"}},[i("div",{staticStyle:{color:"#666","font-size":"12px",padding:"10px 15px","background-color":"#fafafa"}},[i("p",[t._v("1.订单中包含特价商品时不能使用优惠券，不能与其他优惠（如促销活动）同时使用;")]),i("p",[t._v("2.每个订单只能使用一张优惠券;")]),i("p",[t._v("3.商家对优惠券使用细则的最终解释权。")])])])],1)],1)},it=[],at={name:"Discount",components:{},props:{activity:{type:Object,default:function(){return{}}}},data:function(){return{rules:{},activityTypes:{1:"报名",2:"抽奖",3:"海报",4:"砍价",5:"秒杀",6:"拼团",7:"投票",8:"预约",9:"助力",10:"代金券",11:"折扣券",12:"兑换券",13:"体验券","-1":"团购"}}},created:function(){this.init()},mounted:function(){},methods:{init:function(){}}},nt=at,st=Object(I["a"])(nt,et,it,!1,null,null,null),lt=st.exports,ct=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"first",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"活动封面",prop:"introImgs"}},[i("div",[t._v(t._s(t.activity.cover.length)+"/5")]),i("el-upload",{ref:"upload2",attrs:{data:t.dataObj,multiple:"",limit:5,"list-type":"picture-card","file-list":t.coverFileList,action:"http://upload-z2.qiniup.com","on-success":t.handleSuccess,"on-remove":t.handleRemove,"before-upload":t.beforeUpload,"on-change":t.handleChangeCover,"on-exceed":t.handleExceedCover}},[i("i",{staticClass:"el-icon-plus"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（用于活动封面，尺寸为750*400最佳,最多5张）")])])],1),i("el-form-item",{attrs:{label:"活动标题",prop:"title"}},[i("el-input",{attrs:{maxlength:"50"},model:{value:t.activity.title,callback:function(e){t.$set(t.activity,"title",e)},expression:"activity.title"}})],1),i("el-form-item",{attrs:{label:"秒杀开始",prop:"startTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择秒杀开始时间"},model:{value:t.activity.startTime,callback:function(e){t.$set(t.activity,"startTime",e)},expression:"activity.startTime"}})],1),i("el-form-item",{attrs:{label:"秒杀结束",prop:"endTime"}},[i("el-date-picker",{attrs:{type:"datetime",placeholder:"请选择秒杀结束时间"},model:{value:t.activity.endTime,callback:function(e){t.$set(t.activity,"endTime",e)},expression:"activity.endTime"}})],1),i("el-form-item",{attrs:{label:"活动详情"}},[t._l(t.activity.content,(function(e,a){return t.activity.content.length>0?i("div",{key:e.id,staticStyle:{display:"flex","align-items":"flex-start","margin-bottom":"15px"}},[e?i("div",{staticStyle:{margin:"0 10px 0 0",width:"610px"}},[i("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.contentTypes[e.type]))]),"label"==e.type?i("div",[i("el-select",{staticStyle:{width:"600px"},attrs:{"popper-class":"hiddenDown",multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请输入标签"},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}})],1):t._e(),"text"==e.type?i("Tinymce",{ref:"editor1",refInFor:!0,attrs:{height:150,toolbar:t.toolbar,menubar:t.menubar,hasUpload:!1},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}}):t._e(),"bigImg"==e.type?i("div",{staticClass:"bigImg"},[i("div",{staticClass:"img-preview"},["string"===typeof e.value?i("div",{staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.value}})]):t._l(e.value,(function(e,n){return i("div",{key:n,staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a,n)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e}})])}))],2)]):t._e(),"smallImg"==e.type?i("div",{staticClass:"smallImg"},[i("div",[t._v(t._s(e.value.length)+"/9")]),i("div",{staticClass:"img-preview"},t._l(e.value,(function(e,n){return i("div",{key:n,staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a,n)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e}})])})),0),e.value.length<9?i("div",{staticClass:"editor-container"},[t.dataObj.token?i("dropzone",{staticClass:"myVueDropzone",attrs:{id:"myVueDropzone-"+a,url:"http://upload-z2.qiniup.com",token:t.dataObj.token,showRemoveLink:!1},on:{"dropzone-removedFile":t.dropzoneR,"dropzone-success":function(e,i){return t.dropzoneS(e,i,a,9)},"dropzone-error":t.dropzoneE}}):t._e()],1):t._e()]):t._e(),"video"==e.type?i("div",[i("el-upload",{staticClass:"uploader",attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","on-success":function(e,i){return t.handleContentUploadSuccess(e,i,"","video",a,"value")},"on-remove":function(e){return t.handleContentRemove(e,"video",a)}}},[e.value.length>0?i("video",{staticClass:"avatar2",attrs:{controls:"",width:"500"}},[i("source",{attrs:{src:e.value}}),t._v(" Sorry, your browser doesn't support embedded videos. ")]):i("i",{staticClass:"el-icon-plus uploader-icon"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（尺寸为720*416最佳）")])])],1):t._e()],1):t._e(),i("div",{staticStyle:{"margin-top":"20px"}},[i("el-button",{attrs:{type:"danger",plain:"",circle:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.removeConItem(a)}}}),i("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"mini",icon:"el-icon-arrow-up",disabled:1==a&&"label"==t.activity.content[0].type||0==a},on:{click:function(i){return i.preventDefault(),t.upConItem(e,a)}}}),i("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"mini",icon:"el-icon-arrow-down",disabled:"label"==e.type||a==t.activity.content.length-1},on:{click:function(i){return i.preventDefault(),t.downConItem(e,a)}}})],1)]):t._e()})),i("div",{staticClass:"action",staticStyle:{height:"0",overflow:"hidden"}},[t.dataObj.token?i("dropzone",{staticClass:"myVueDropzone",attrs:{url:"http://upload-z2.qiniup.com",token:t.dataObj.token,showRemoveLink:!1,id:"uploadBigImg"},on:{"dropzone-removedFile":t.dropzoneR,"dropzone-success":function(e,i){return t.dropzoneSBig(e,i)}}}):t._e()],1),i("div",{staticStyle:{"margin-bottom":"20px"}},[i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("text","")}}},[t._v("+添加文字")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("bigImg",[])}}},[t._v("+添加大图")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("smallImg",[])}}},[t._v("+添加小图")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("video","")}}},[t._v("+添加视频")]),"label"!==t.activity.content[0].type?i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addCon("label",[])}}},[t._v("+添加标签")]):t._e()],1)],2),i("el-form-item",{attrs:{label:"活动规则"}},[i("Tinymce",{ref:"editor2",attrs:{height:200,toolbar:t.toolbar,menubar:t.menubar,hasUpload:!1},model:{value:t.activity.activityRule,callback:function(e){t.$set(t.activity,"activityRule",e)},expression:"activity.activityRule"}})],1)],1)],1)},ot=[],rt={name:"BaseSeckill",components:{Tinymce:O["a"],Dropzone:_},props:{activity:{type:Object,default:function(){return{}}},dataObj:{type:Object,default:function(){return{token:""}}}},data:function(){return{toolbar:[""],menubar:"",contentTypes:{bigImg:"大图",smallImg:"小图",text:"文字",video:"视频",label:"标签"},rules:{},coverFileList:[]}},created:function(){console.log("created.."),console.log(this.activity),this.init()},mounted:function(){},methods:(x={dropzoneS:function(t,e,i,a){if(a&&(console.log(a),console.log(this.activity.content[i].value.length),this.activity.content[i].value.length===a))this.$message.warning("最多上传"+a+"张图片");else{var n="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+e.key;this.activity.content[i].value.push(n),this.$message({message:"上传成功",type:"success"})}},dropzoneSBig:function(t,e){var i=Z()(),a="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+e.key,n=[];n.push(a),this.activity.content.push({type:"bigImg",value:n,id:i})},dropzoneR:function(t){},dropzoneE:function(t,e,i){this.$message.error(e),console.log(i)},dropzoneA:function(t){},deleteImg:function(t,e){e?this.activity.content[t].value.splice(e,1):this.activity.content[t].value=[]},fetchToken:function(){var t=this;Object(o["a"])().then((function(e){var i=e.data;t._data.dataObj.token=i}))},init:function(){var t=this;this.coverFileList=[],this.activity.cover.forEach((function(e,i){var a={name:"",uid:i,url:e,status:"success"};t.coverFileList.push(a)}))},handleSuccess:function(t,e){this.activity.cover.push("https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key),this.coverFileList.push({name:e.name,uid:e.uid,url:"https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key,status:"success"})},handleRemove:function(t,e){var i="";i=t.response?"https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.response.key:t.url;var a=this.activity.cover.indexOf(i);a>-1&&this.activity.cover.splice(a,1)},beforeUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传图片大小不能超过 20MB!"),e},handleChangeCover:function(t,e){this.coverFileList=e},handleExceedCover:function(t,e){this.$message.warning("最多传5张，加上此次选取的 ".concat(t.length," 张图片, 总共 ").concat(t.length+e.length))},handleExceedSmallImg:function(t,e){this.$message.warning("最多传9张，加上此次选取的 ".concat(t.length," 张图片, 总共 ").concat(t.length+e.length))},removeConItem:function(t){1===this.activity.content.length?this.$message.warning("活动详情不能为空，请添加其他类型再删除当前的内容"):this.activity.content.splice(t,1)},upConItem:function(t,e){var i=e,a=e-1;this.activity.content.splice(i,1),this.activity.content.splice(a,0,t)},downConItem:function(t,e){var i=e,a=e+1;this.activity.content.splice(i,1),this.activity.content.splice(a,0,t)},addCon:function(t,e){var i=Z()();"label"===t?"label"!==this.activity.content[0].type&&this.activity.content.unshift({type:t,value:e,id:i}):"bigImg"===t?document.getElementById("uploadBigImg").click():this.activity.content.push({type:t,value:e,id:i})}},Object(m["a"])(x,"beforeUpload",(function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传图片大小不能超过 20MB!"),e})),Object(m["a"])(x,"handleContentUploadSuccess",(function(t,e,i,a,n,s){this.activity.content[n][s]="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key})),Object(m["a"])(x,"handleContentRemove",(function(t,e,i){this.activity.content.splice(i,1)})),x)},ut=rt,dt=(a("04c9"),a("dbae"),Object(I["a"])(ut,ct,ot,!1,null,"15d1a500",null)),mt=dt.exports,vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"second",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"报名字段",prop:""}},[i("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content selectField-content"},[i("div",{staticClass:"tit"},[t._v("已选字段( "+t._s(t.activity.requireColumns.length)+" )")]),i("ul",t._l(t.activity.requireColumns,(function(e,a){return i("li",{key:a,staticClass:"selectItem"},[i("div",{staticClass:"itemName"},[t._v(t._s(e.name))]),i("el-checkbox",{staticClass:"checked",model:{value:e.required,callback:function(i){t.$set(e,"required",i)},expression:"item.required"}},[t._v("必填")]),i("i",{staticClass:"edit el-icon-edit",on:{click:function(i){return t.handelEdit(e,a)}}}),i("i",{staticClass:"delete el-icon-delete",on:{click:function(i){return t.del(e,a)}}})],1)})),0)])]),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content commonField-content"},[i("div",{staticClass:"tit"},[t._v("常用字段")]),i("ul",{staticClass:"list"},t._l(t.commonField,(function(e,a){return i("li",{key:a,class:e.selected?"item selected":"item",on:{click:function(i){return t.toggleSelect(e,a)}}},[t._v(t._s(e.name))])})),0),i("div",{staticClass:"tit"},[t._v("自定义字段")]),i("ul",{staticClass:"customList"},[i("li",{on:{click:function(e){return t.editCustom("OneLineText")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAS1BMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYma+wu9hAAAAGHRSTlMA3u3opE1GRMtvh3MpC9+ZY2BXPgS2eBIY7bL6AAAAdklEQVQY05XPVw7DIBBFUTIlFPeS5O1/pbEsbA/my/cLjpCYcc/riLoKIxArJGa+m2KeoTcMWFeE0lpsENAWKFicWyDWfoAMgwB2qi9yjUFGmsZxSqDLmuNC5mkUzdOK3apOvffvve2geVYUffLf/eus5+Qe9AejKwZrfJIFOQAAAABJRU5ErkJggg=="}}),i("span",[t._v("单行文本")])]),i("li",{on:{click:function(e){return t.editCustom("TextArea")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAWlBMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmaAjSSDAAAAHXRSTlMAzUE8ck8b0GXn36milmtTRSb21MK8nVmJiDAGBXjzAUgAAAB/SURBVBjTtc5XDsIwEATQSRz3EjuVtve/JphVZMIv4v2MNNIW/I/uAMhkjEnm6EYiCRA7SmetA/ahSmA9ZUkCZ/METBonN4r3x0YFgw/Bb1x6eguY2yFF7hLj1ZIqWYied68k+a0VzS455YhGKdG/CFVqZB6nL6gW3X3QC371BHgzCJp01x7WAAAAAElFTkSuQmCC"}}),i("span",[t._v("多行文本")])]),i("li",{on:{click:function(e){return t.editCustom("Select")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAP1BMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZqi4AuAAAAFHRSTlMA8uKxqaMolbmc9umDNC4gHwkGv+8M7BwAAAB1SURBVBjTlZBJDsAgDAMddrov/v9bS6lQWyEO+OBIo0RJjF7NcSTHOH+ZJ5UxivQvO6mXuy6aZ2GRU/J9TzaVXseQzIpYBwS6DC03rMIkWbHRZigK0MzSgJIMaXAMDxwOGDZgY7xa1D4J/n98/WZoBFJH16kL6TEIZEWyJmIAAAAASUVORK5CYII="}}),i("span",[t._v("单选")])]),i("li",{on:{click:function(e){return t.editCustom("MultiSelect")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAALVBMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYma5vQ1VAAAADnRSTlMA8vegZoyGfXhJtZdbU55+pB4AAABISURBVAjXYyAM2ATBoAHI5HsHBg+ATCYIUwHIZIQwBWDMI3DmE1YoM/udgx2UOWE5M0ztWwY7uLapSCaAmQgrUC1mhzmHIAAA67ZA7MJDFZ8AAAAASUVORK5CYII="}}),i("span",[t._v("多选")])])])])])],1)],1),i("el-form-item",{attrs:{label:"报名总人数",prop:""}},[i("el-input",{attrs:{type:"number",maxlength:"6",placeholder:"无限制"},model:{value:t.activity.activitySetting.registerNum,callback:function(e){t.$set(t.activity.activitySetting,"registerNum",e)},expression:"activity.activitySetting.registerNum"}})],1),i("el-form-item",{attrs:{label:"报名费用",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"6",placeholder:"输入0表示免费"},model:{value:t.activity.activitySetting.registerCost,callback:function(e){t.$set(t.activity.activitySetting,"registerCost",e)},expression:"activity.activitySetting.registerCost"}})],1),i("el-form-item",{attrs:{label:"单人限制",prop:""}},[i("el-input",{attrs:{type:"number",maxlength:"5",placeholder:"单人可报人数,留空表示不限制"},model:{value:t.activity.activitySetting.individualLimit,callback:function(e){t.$set(t.activity.activitySetting,"individualLimit",e)},expression:"activity.activitySetting.individualLimit"}})],1),i("el-form-item",{attrs:{label:"全额支付"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.fullPay,callback:function(e){t.$set(t.activity.activitySetting,"fullPay",e)},expression:"activity.activitySetting.fullPay"}})],1),t.activity.activitySetting.fullPay?t._e():i("el-form-item",{attrs:{label:"预付款",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"6",placeholder:"输入订金金额"},model:{value:t.activity.activitySetting.advancePay,callback:function(e){t.$set(t.activity.activitySetting,"advancePay",e)},expression:"activity.activitySetting.advancePay"}})],1),i("el-form-item",{attrs:{label:"报名列表显示"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.activitySetting.listShowType,callback:function(e){t.$set(t.activity.activitySetting,"listShowType",e)},expression:"activity.activitySetting.listShowType"}})],1),i("el-form-item",{attrs:{label:"留言"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.leaveMsg,callback:function(e){t.$set(t.activity.activitySetting,"leaveMsg",e)},expression:"activity.activitySetting.leaveMsg"}})],1),i("el-form-item",{attrs:{label:"报名按钮文案（可自定义）",prop:""}},[i("el-input",{attrs:{maxlength:"10",placeholder:"可定义报名按钮文案"},model:{value:t.activity.activitySetting.buttonText,callback:function(e){t.$set(t.activity.activitySetting,"buttonText",e)},expression:"activity.activitySetting.buttonText"}})],1),i("el-form-item",{attrs:{label:"参与门店",prop:""}},[i("el-select",{staticStyle:{width:"600px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.activity.storeIds,callback:function(e){t.$set(t.activity,"storeIds",e)},expression:"activity.storeIds"}},t._l(t.stores,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),i("el-dialog",{attrs:{title:t.typeName[t.editItem.type],visible:t.customDialogVisible,"modal-append-to-body":!1,"append-to-body":!0,width:"600px","before-close":t.handleClose},on:{"update:visible":function(e){t.customDialogVisible=e}}},[i("div",{staticClass:"custom-container"},[i("el-form",{ref:"custom",attrs:{rules:t.customRules,model:t.editItem,"label-width":"100px",size:"small"}},["OneLineText"==t.editItem.type||"Mobile"==t.editItem.type||"IdNumber"==t.editItem.type||"Address"==t.editItem.type||"Mail"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"10",placeholder:"请输入字段名称(10个字符以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"字段描述",prop:"desc"}},[i("el-input",{attrs:{maxlength:"",type:"textarea",rows:2,placeholder:"请说明字段怎么填写"},model:{value:t.editItem.desc,callback:function(e){t.$set(t.editItem,"desc",e)},expression:"editItem.desc"}})],1)],1):t._e(),"TextArea"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"10",placeholder:"请输入字段名称(10个字符以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"字段描述",prop:"desc"}},[i("el-input",{attrs:{maxlength:"",type:"textarea",rows:2,placeholder:"请说明字段怎么填写"},model:{value:t.editItem.desc,callback:function(e){t.$set(t.editItem,"desc",e)},expression:"editItem.desc"}})],1)],1):t._e(),"Select"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"200",placeholder:"请输入字段名称(200个字以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"选项",prop:"ext"}},[t._l(t.editItem.ext.values,(function(e,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[i("el-input",{attrs:{maxlength:"30",placeholder:"请输入选项"},model:{value:t.editItem.ext.values[a],callback:function(e){t.$set(t.editItem.ext.values,a,e)},expression:"editItem.ext.values[index]"}}),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return i.preventDefault(),t.removeXuanxiang(e,a)}}},[t._v("删除")])],1)})),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addXuanxiang()}}},[t._v("+添加选项")])],2)],1):t._e(),"MultiSelect"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"200",placeholder:"请输入字段名称(200个字以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"选项",prop:"ext"}},[t._l(t.editItem.ext.values,(function(e,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[i("el-input",{attrs:{maxlength:"30",placeholder:"请输入选项"},model:{value:t.editItem.ext.values[a],callback:function(e){t.$set(t.editItem.ext.values,a,e)},expression:"editItem.ext.values[index]"}}),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return i.preventDefault(),t.removeXuanxiang(e,a)}}},[t._v("删除")])],1)})),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addXuanxiang()}}},[t._v("+添加选项")])],2),i("el-form-item",{attrs:{label:"最少选几项",prop:""}},[i("el-input",{attrs:{placeholder:"最少选几项"},model:{value:t.editItem.ext.min,callback:function(e){t.$set(t.editItem.ext,"min",e)},expression:"editItem.ext.min"}})],1),i("el-form-item",{attrs:{label:"最多选几项",prop:""}},[i("el-input",{attrs:{placeholder:"最多选几项"},model:{value:t.editItem.ext.max,callback:function(e){t.$set(t.editItem.ext,"max",e)},expression:"editItem.ext.max"}})],1)],1):t._e(),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),i("el-button",{on:{click:function(e){return t.resetForm("custom")}}},[t._v("取消")])],1)],1)],1)])],1)},pt=[],gt=(a("ddb0"),{name:"TypeApply",components:{},props:{activity:{type:Object,default:function(){return{}}},merchantId:{type:String,default:0}},data:function(){return{rules:{},customRules:{},commonField:[],customDialogVisible:!1,editItem:{},editItemIndex:-1,typeName:{OneLineText:"单行文本",TextArea:"多行文本",Select:"单选",MultiSelect:"多选"},stores:[]}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.getRequirecolumns(),this.getStores()},getRequirecolumns:function(){var t=this;Object(l["p"])().then((function(e){"ok"===e.msg?(t.commonField=e.data,t.initCommonField()):t.$message({type:"error",message:"出了点问题"})}))},initCommonField:function(){var t=this;this.activity.requireColumns.forEach((function(e,i){t.commonField.forEach((function(t,i){t.name==e.name&&(t.selected=!0)}))}))},getStores:function(){var t=this;Object(c["k"])({merchantId:this.merchantId}).then((function(e){"ok"===e.msg?t.stores=e.data:t.$message({type:"error",message:"出了点问题"})}))},toggleSelect:function(t,e){if(t.selected){this.commonField[e].selected=!1;var i=-1;this.activity.requireColumns.forEach((function(e,a){e.name==t.name&&(i=a)})),this.activity.requireColumns.splice(i,1)}else this.commonField[e].selected=!0,this.activity.requireColumns.push(t)},del:function(t,e){this.activity.requireColumns.splice(e,1),this.commonField.forEach((function(e,i){e.name==t.name&&(e.selected=!1)}))},handelEdit:function(t,e){this.editCustom(t.type,e)},editCustom:function(t,e){e>-1?(this.editItem=JSON.parse(JSON.stringify(this.activity.requireColumns[e])),this.editItem.ext&&("string"==typeof this.editItem.ext&&(this.editItem.ext=JSON.parse(this.editItem.ext)),"string"==typeof this.editItem.ext.values&&(this.editItem.ext.values=JSON.parse(this.editItem.ext.values))),this.editItemIndex=e):("OneLineText"==t?this.editItem={name:"",required:!1,type:"OneLineText",desc:""}:"TextArea"==t?this.editItem={name:"",required:!1,type:"TextArea",desc:""}:"Select"==t?this.editItem={ext:{min:1,max:1,values:[]},name:"",required:!1,type:"Select"}:"MultiSelect"==t&&(this.editItem={ext:{min:1,max:"",values:[]},name:"",required:!1,type:"MultiSelect"}),this.editItemIndex=-1),this.customDialogVisible=!0},addXuanxiang:function(){this.editItem.ext.values.push("")},removeXuanxiang:function(t,e){this.editItem.ext.values.splice(e,1)},handleClose:function(t){console.log("关闭弹窗"),this.customDialogVisible=!1,t()},onSubmit:function(){this.editItem.ext&&(this.editItem.ext=JSON.stringify(this.editItem.ext)),this.editItemIndex>-1?this.activity.requireColumns.splice(this.editItemIndex,1,this.editItem):this.activity.requireColumns.push(this.editItem),this.customDialogVisible=!1},resetForm:function(t){this.customDialogVisible=!1,this.editItem={},this.editItemIndex=-1}}}),yt=gt,ft=(a("92f2"),Object(I["a"])(yt,vt,pt,!1,null,"05983b05",null)),ht=ft.exports,bt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"second",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"拼团字段",prop:""}},[i("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content selectField-content"},[i("div",{staticClass:"tit"},[t._v("已选字段( "+t._s(t.activity.requireColumns.length)+" )")]),i("ul",t._l(t.activity.requireColumns,(function(e,a){return i("li",{key:a,staticClass:"selectItem"},[i("div",{staticClass:"itemName"},[t._v(t._s(e.name))]),i("el-checkbox",{staticClass:"checked",model:{value:e.required,callback:function(i){t.$set(e,"required",i)},expression:"item.required"}},[t._v("必填")]),i("i",{staticClass:"edit el-icon-edit",on:{click:function(i){return t.handelEdit(e,a)}}}),i("i",{staticClass:"delete el-icon-delete",on:{click:function(i){return t.del(e,a)}}})],1)})),0)])]),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content commonField-content"},[i("div",{staticClass:"tit"},[t._v("常用字段")]),i("ul",{staticClass:"list"},t._l(t.commonField,(function(e,a){return i("li",{key:a,class:e.selected?"item selected":"item",on:{click:function(i){return t.toggleSelect(e,a)}}},[t._v(t._s(e.name))])})),0),i("div",{staticClass:"tit"},[t._v("自定义字段")]),i("ul",{staticClass:"customList"},[i("li",{on:{click:function(e){return t.editCustom("OneLineText")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAS1BMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYma+wu9hAAAAGHRSTlMA3u3opE1GRMtvh3MpC9+ZY2BXPgS2eBIY7bL6AAAAdklEQVQY05XPVw7DIBBFUTIlFPeS5O1/pbEsbA/my/cLjpCYcc/riLoKIxArJGa+m2KeoTcMWFeE0lpsENAWKFicWyDWfoAMgwB2qi9yjUFGmsZxSqDLmuNC5mkUzdOK3apOvffvve2geVYUffLf/eus5+Qe9AejKwZrfJIFOQAAAABJRU5ErkJggg=="}}),i("span",[t._v("单行文本")])]),i("li",{on:{click:function(e){return t.editCustom("TextArea")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAWlBMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmaAjSSDAAAAHXRSTlMAzUE8ck8b0GXn36milmtTRSb21MK8nVmJiDAGBXjzAUgAAAB/SURBVBjTtc5XDsIwEATQSRz3EjuVtve/JphVZMIv4v2MNNIW/I/uAMhkjEnm6EYiCRA7SmetA/ahSmA9ZUkCZ/METBonN4r3x0YFgw/Bb1x6eguY2yFF7hLj1ZIqWYied68k+a0VzS455YhGKdG/CFVqZB6nL6gW3X3QC371BHgzCJp01x7WAAAAAElFTkSuQmCC"}}),i("span",[t._v("多行文本")])]),i("li",{on:{click:function(e){return t.editCustom("Select")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAP1BMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZqi4AuAAAAFHRSTlMA8uKxqaMolbmc9umDNC4gHwkGv+8M7BwAAAB1SURBVBjTlZBJDsAgDAMddrov/v9bS6lQWyEO+OBIo0RJjF7NcSTHOH+ZJ5UxivQvO6mXuy6aZ2GRU/J9TzaVXseQzIpYBwS6DC03rMIkWbHRZigK0MzSgJIMaXAMDxwOGDZgY7xa1D4J/n98/WZoBFJH16kL6TEIZEWyJmIAAAAASUVORK5CYII="}}),i("span",[t._v("单选")])]),i("li",{on:{click:function(e){return t.editCustom("MultiSelect")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAALVBMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYma5vQ1VAAAADnRSTlMA8vegZoyGfXhJtZdbU55+pB4AAABISURBVAjXYyAM2ATBoAHI5HsHBg+ATCYIUwHIZIQwBWDMI3DmE1YoM/udgx2UOWE5M0ztWwY7uLapSCaAmQgrUC1mhzmHIAAA67ZA7MJDFZ8AAAAASUVORK5CYII="}}),i("span",[t._v("多选")])])])])])],1)],1),i("el-form-item",{attrs:{label:"商品原价",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"5",placeholder:"输入"},model:{value:t.activity.activitySetting.originPrice,callback:function(e){t.$set(t.activity.activitySetting,"originPrice",e)},expression:"activity.activitySetting.originPrice"}})],1),i("el-form-item",{attrs:{label:"成团信息"}},[t._l(t.activity.activitySetting.groups,(function(e,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[i("div",{staticStyle:{margin:"0 10px 0 0",width:"610px"}},[i("div",[t._v(t._s(a+1)+"号团")]),i("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"人数"},model:{value:e.personNum,callback:function(i){t.$set(e,"personNum",i)},expression:"item.personNum"}},[i("template",{slot:"prepend"},[t._v("人数")])],2),i("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"价格"},model:{value:e.price,callback:function(i){t.$set(e,"price",i)},expression:"item.price"}},[i("template",{slot:"prepend"},[t._v("价格")])],2),i("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"无限制"},model:{value:e.commodityAmount,callback:function(i){t.$set(e,"commodityAmount",i)},expression:"item.commodityAmount"}},[i("template",{slot:"prepend"},[t._v("商品数量")])],2)],1),a>0?i("el-button",{attrs:{size:"mini"},on:{click:function(i){return i.preventDefault(),t.removeGroup(e,a)}}},[t._v("删除")]):t._e()],1)})),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addGroup()}}},[t._v("+添加新团")])],2),i("el-form-item",{attrs:{label:"全额支付"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.fullPay,callback:function(e){t.$set(t.activity.activitySetting,"fullPay",e)},expression:"activity.activitySetting.fullPay"}})],1),t.activity.activitySetting.fullPay?t._e():i("el-form-item",{attrs:{label:"预付款",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"6",placeholder:"输入订金金额"},model:{value:t.activity.activitySetting.advancePay,callback:function(e){t.$set(t.activity.activitySetting,"advancePay",e)},expression:"activity.activitySetting.advancePay"}})],1),i("el-form-item",{attrs:{label:"成团时间",prop:""}},[i("el-select",{staticStyle:{width:"600px"},attrs:{placeholder:"请选择"},model:{value:t.activity.activitySetting.agglomerationTime,callback:function(e){t.$set(t.activity.activitySetting,"agglomerationTime",e)},expression:"activity.activitySetting.agglomerationTime"}},[i("el-option",{attrs:{label:"24小时",value:24}}),i("el-option",{attrs:{label:"48小时",value:48}}),i("el-option",{attrs:{label:"72小时",value:72}})],1)],1),i("el-form-item",{attrs:{label:"拼团列表显示"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.activitySetting.listShowType,callback:function(e){t.$set(t.activity.activitySetting,"listShowType",e)},expression:"activity.activitySetting.listShowType"}})],1),i("el-form-item",{attrs:{label:"留言"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.leaveMsg,callback:function(e){t.$set(t.activity.activitySetting,"leaveMsg",e)},expression:"activity.activitySetting.leaveMsg"}})],1),i("el-form-item",{attrs:{label:"按钮文案（可自定义）",prop:""}},[i("el-input",{attrs:{maxlength:"10",placeholder:"立即拼团"},model:{value:t.activity.activitySetting.buttonText,callback:function(e){t.$set(t.activity.activitySetting,"buttonText",e)},expression:"activity.activitySetting.buttonText"}})],1),i("el-form-item",{attrs:{label:"参与门店",prop:""}},[i("el-select",{staticStyle:{width:"600px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.activity.storeIds,callback:function(e){t.$set(t.activity,"storeIds",e)},expression:"activity.storeIds"}},t._l(t.stores,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),i("el-dialog",{attrs:{title:t.typeName[t.editItem.type],visible:t.customDialogVisible,"modal-append-to-body":!1,"append-to-body":!0,width:"600px","before-close":t.handleClose},on:{"update:visible":function(e){t.customDialogVisible=e}}},[i("div",{staticClass:"custom-container"},[i("el-form",{ref:"custom",attrs:{rules:t.customRules,model:t.editItem,"label-width":"100px",size:"small"}},["OneLineText"==t.editItem.type||"Mobile"==t.editItem.type||"IdNumber"==t.editItem.type||"Address"==t.editItem.type||"Mail"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"10",placeholder:"请输入字段名称(10个字符以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"字段描述",prop:"desc"}},[i("el-input",{attrs:{maxlength:"",type:"textarea",rows:2,placeholder:"请说明字段怎么填写"},model:{value:t.editItem.desc,callback:function(e){t.$set(t.editItem,"desc",e)},expression:"editItem.desc"}})],1)],1):t._e(),"TextArea"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"10",placeholder:"请输入字段名称(10个字符以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"字段描述",prop:"desc"}},[i("el-input",{attrs:{maxlength:"",type:"textarea",rows:2,placeholder:"请说明字段怎么填写"},model:{value:t.editItem.desc,callback:function(e){t.$set(t.editItem,"desc",e)},expression:"editItem.desc"}})],1)],1):t._e(),"Select"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"200",placeholder:"请输入字段名称(200个字以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"选项",prop:"ext"}},[t._l(t.editItem.ext.values,(function(e,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[i("el-input",{attrs:{maxlength:"30",placeholder:"请输入选项"},model:{value:t.editItem.ext.values[a],callback:function(e){t.$set(t.editItem.ext.values,a,e)},expression:"editItem.ext.values[index]"}}),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return i.preventDefault(),t.removeXuanxiang(e,a)}}},[t._v("删除")])],1)})),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addXuanxiang()}}},[t._v("+添加选项")])],2)],1):t._e(),"MultiSelect"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"200",placeholder:"请输入字段名称(200个字以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"选项",prop:"ext"}},[t._l(t.editItem.ext.values,(function(e,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[i("el-input",{attrs:{maxlength:"30",placeholder:"请输入选项"},model:{value:t.editItem.ext.values[a],callback:function(e){t.$set(t.editItem.ext.values,a,e)},expression:"editItem.ext.values[index]"}}),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return i.preventDefault(),t.removeXuanxiang(e,a)}}},[t._v("删除")])],1)})),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addXuanxiang()}}},[t._v("+添加选项")])],2),i("el-form-item",{attrs:{label:"最少选几项",prop:""}},[i("el-input",{attrs:{placeholder:"最少选几项"},model:{value:t.editItem.ext.min,callback:function(e){t.$set(t.editItem.ext,"min",e)},expression:"editItem.ext.min"}})],1),i("el-form-item",{attrs:{label:"最多选几项",prop:""}},[i("el-input",{attrs:{placeholder:"最多选几项"},model:{value:t.editItem.ext.max,callback:function(e){t.$set(t.editItem.ext,"max",e)},expression:"editItem.ext.max"}})],1)],1):t._e(),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),i("el-button",{on:{click:function(e){return t.resetForm("custom")}}},[t._v("取消")])],1)],1)],1)])],1)},St=[],xt={name:"TypeGroup",components:{},props:{activity:{type:Object,default:function(){return{}}},merchantId:{type:String,default:0}},data:function(){return{rules:{},customRules:{},commonField:[],customDialogVisible:!1,editItem:{},editItemIndex:-1,typeName:{OneLineText:"单行文本",TextArea:"多行文本",Select:"单选",MultiSelect:"多选"},stores:[]}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.getRequirecolumns(),this.getStores()},getRequirecolumns:function(){var t=this;Object(l["p"])().then((function(e){"ok"===e.msg?(t.commonField=e.data,t.initCommonField()):t.$message({type:"error",message:"出了点问题"})}))},initCommonField:function(){var t=this;this.activity.requireColumns.forEach((function(e,i){t.commonField.forEach((function(t,i){t.name==e.name&&(t.selected=!0)}))}))},getStores:function(){var t=this;Object(c["k"])({merchantId:this.merchantId}).then((function(e){"ok"===e.msg?t.stores=e.data:t.$message({type:"error",message:"出了点问题"})}))},toggleSelect:function(t,e){if(t.selected){this.commonField[e].selected=!1;var i=-1;this.activity.requireColumns.forEach((function(e,a){e.name==t.name&&(i=a)})),this.activity.requireColumns.splice(i,1)}else this.commonField[e].selected=!0,this.activity.requireColumns.push(t)},del:function(t,e){this.activity.requireColumns.splice(e,1),this.commonField.forEach((function(e,i){e.name==t.name&&(e.selected=!1)}))},handelEdit:function(t,e){this.editCustom(t.type,e)},editCustom:function(t,e){e>-1?(this.editItem=JSON.parse(JSON.stringify(this.activity.requireColumns[e])),this.editItem.ext&&("string"==typeof this.editItem.ext&&(this.editItem.ext=JSON.parse(this.editItem.ext)),"string"==typeof this.editItem.ext.values&&(this.editItem.ext.values=JSON.parse(this.editItem.ext.values))),this.editItemIndex=e):("OneLineText"==t?this.editItem={name:"",required:!1,type:"OneLineText",desc:""}:"TextArea"==t?this.editItem={name:"",required:!1,type:"TextArea",desc:""}:"Select"==t?this.editItem={ext:{min:1,max:1,values:[]},name:"",required:!1,type:"Select"}:"MultiSelect"==t&&(this.editItem={ext:{min:1,max:"",values:[]},name:"",required:!1,type:"MultiSelect"}),this.editItemIndex=-1),this.customDialogVisible=!0},addXuanxiang:function(){this.editItem.ext.values.push("")},removeXuanxiang:function(t,e){this.editItem.ext.values.splice(e,1)},handleClose:function(t){console.log("关闭弹窗"),this.customDialogVisible=!1,t()},onSubmit:function(){this.editItem.ext&&(this.editItem.ext=JSON.stringify(this.editItem.ext)),this.editItemIndex>-1?this.activity.requireColumns.splice(this.editItemIndex,1,this.editItem):this.activity.requireColumns.push(this.editItem),this.customDialogVisible=!1},resetForm:function(t){this.customDialogVisible=!1,this.editItem={},this.editItemIndex=-1},addGroup:function(){this.activity.activitySetting.groups.push({personNum:"",price:"",commodityAmount:""})},removeGroup:function(t,e){this.activity.activitySetting.groups.splice(e,1)}}},Ct=xt,At=(a("e141"),Object(I["a"])(Ct,bt,St,!1,null,"80ffb6d6",null)),It=At.exports,kt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"second",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"砍价字段",prop:""}},[i("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content selectField-content"},[i("div",{staticClass:"tit"},[t._v("已选字段( "+t._s(t.activity.requireColumns.length)+" )")]),i("ul",t._l(t.activity.requireColumns,(function(e,a){return i("li",{key:a,staticClass:"selectItem"},[i("div",{staticClass:"itemName"},[t._v(t._s(e.name))]),i("el-checkbox",{staticClass:"checked",model:{value:e.required,callback:function(i){t.$set(e,"required",i)},expression:"item.required"}},[t._v("必填")]),i("i",{staticClass:"edit el-icon-edit",on:{click:function(i){return t.handelEdit(e,a)}}}),i("i",{staticClass:"delete el-icon-delete",on:{click:function(i){return t.del(e,a)}}})],1)})),0)])]),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content commonField-content"},[i("div",{staticClass:"tit"},[t._v("常用字段")]),i("ul",{staticClass:"list"},t._l(t.commonField,(function(e,a){return i("li",{key:a,class:e.selected?"item selected":"item",on:{click:function(i){return t.toggleSelect(e,a)}}},[t._v(t._s(e.name))])})),0),i("div",{staticClass:"tit"},[t._v("自定义字段")]),i("ul",{staticClass:"customList"},[i("li",{on:{click:function(e){return t.editCustom("OneLineText")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAS1BMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYma+wu9hAAAAGHRSTlMA3u3opE1GRMtvh3MpC9+ZY2BXPgS2eBIY7bL6AAAAdklEQVQY05XPVw7DIBBFUTIlFPeS5O1/pbEsbA/my/cLjpCYcc/riLoKIxArJGa+m2KeoTcMWFeE0lpsENAWKFicWyDWfoAMgwB2qi9yjUFGmsZxSqDLmuNC5mkUzdOK3apOvffvve2geVYUffLf/eus5+Qe9AejKwZrfJIFOQAAAABJRU5ErkJggg=="}}),i("span",[t._v("单行文本")])]),i("li",{on:{click:function(e){return t.editCustom("TextArea")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAWlBMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmaAjSSDAAAAHXRSTlMAzUE8ck8b0GXn36milmtTRSb21MK8nVmJiDAGBXjzAUgAAAB/SURBVBjTtc5XDsIwEATQSRz3EjuVtve/JphVZMIv4v2MNNIW/I/uAMhkjEnm6EYiCRA7SmetA/ahSmA9ZUkCZ/METBonN4r3x0YFgw/Bb1x6eguY2yFF7hLj1ZIqWYied68k+a0VzS455YhGKdG/CFVqZB6nL6gW3X3QC371BHgzCJp01x7WAAAAAElFTkSuQmCC"}}),i("span",[t._v("多行文本")])]),i("li",{on:{click:function(e){return t.editCustom("Select")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAP1BMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZqi4AuAAAAFHRSTlMA8uKxqaMolbmc9umDNC4gHwkGv+8M7BwAAAB1SURBVBjTlZBJDsAgDAMddrov/v9bS6lQWyEO+OBIo0RJjF7NcSTHOH+ZJ5UxivQvO6mXuy6aZ2GRU/J9TzaVXseQzIpYBwS6DC03rMIkWbHRZigK0MzSgJIMaXAMDxwOGDZgY7xa1D4J/n98/WZoBFJH16kL6TEIZEWyJmIAAAAASUVORK5CYII="}}),i("span",[t._v("单选")])]),i("li",{on:{click:function(e){return t.editCustom("MultiSelect")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAALVBMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYma5vQ1VAAAADnRSTlMA8vegZoyGfXhJtZdbU55+pB4AAABISURBVAjXYyAM2ATBoAHI5HsHBg+ATCYIUwHIZIQwBWDMI3DmE1YoM/udgx2UOWE5M0ztWwY7uLapSCaAmQgrUC1mhzmHIAAA67ZA7MJDFZ8AAAAASUVORK5CYII="}}),i("span",[t._v("多选")])])])])])],1)],1),i("el-form-item",{attrs:{label:"商品数量",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"5",placeholder:"请合理设置"},model:{value:t.activity.activitySetting.productNum,callback:function(e){t.$set(t.activity.activitySetting,"productNum",e)},expression:"activity.activitySetting.productNum"}})],1),i("el-form-item",{attrs:{label:"原价",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"5",placeholder:"原价"},model:{value:t.activity.activitySetting.originPrice,callback:function(e){t.$set(t.activity.activitySetting,"originPrice",e)},expression:"activity.activitySetting.originPrice"}})],1),i("el-form-item",{attrs:{label:"底价",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"5",placeholder:"最低砍到多少元"},model:{value:t.activity.activitySetting.basePrice,callback:function(e){t.$set(t.activity.activitySetting,"basePrice",e)},expression:"activity.activitySetting.basePrice"}})],1),i("el-form-item",{attrs:{label:"砍价次数",prop:""}},[i("el-input",{attrs:{type:"number",maxlength:"5",placeholder:"多少人帮砍到底价"},model:{value:t.activity.activitySetting.totalTimes,callback:function(e){t.$set(t.activity.activitySetting,"totalTimes",e)},expression:"activity.activitySetting.totalTimes"}})],1),i("el-form-item",{attrs:{label:"单人份数",prop:""}},[i("el-input",{attrs:{type:"number",maxlength:"5",placeholder:"单人最多可购买次数"},model:{value:t.activity.activitySetting.quotaPrePerson,callback:function(e){t.$set(t.activity.activitySetting,"quotaPrePerson",e)},expression:"activity.activitySetting.quotaPrePerson"}})],1),i("el-form-item",{attrs:{label:"限时砍价",prop:""}},[i("el-select",{staticStyle:{width:"600px"},attrs:{placeholder:"请选择"},model:{value:t.activity.activitySetting.timeLimit,callback:function(e){t.$set(t.activity.activitySetting,"timeLimit",e)},expression:"activity.activitySetting.timeLimit"}},[i("el-option",{attrs:{label:"24小时",value:24}}),i("el-option",{attrs:{label:"48小时",value:48}}),i("el-option",{attrs:{label:"72小时",value:72}})],1)],1),i("el-form-item",{attrs:{label:"全额支付"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.fullPay,callback:function(e){t.$set(t.activity.activitySetting,"fullPay",e)},expression:"activity.activitySetting.fullPay"}})],1),t.activity.activitySetting.fullPay?t._e():i("el-form-item",{attrs:{label:"预付款",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"6",placeholder:"输入订金金额"},model:{value:t.activity.activitySetting.advancePay,callback:function(e){t.$set(t.activity.activitySetting,"advancePay",e)},expression:"activity.activitySetting.advancePay"}})],1),i("el-form-item",{attrs:{label:"砍价者手机号"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.showPhone,callback:function(e){t.$set(t.activity.activitySetting,"showPhone",e)},expression:"activity.activitySetting.showPhone"}})],1),i("el-form-item",{attrs:{label:"砍价列表显示"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.activitySetting.listShowType,callback:function(e){t.$set(t.activity.activitySetting,"listShowType",e)},expression:"activity.activitySetting.listShowType"}})],1),i("el-form-item",{attrs:{label:"留言"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.leaveMsg,callback:function(e){t.$set(t.activity.activitySetting,"leaveMsg",e)},expression:"activity.activitySetting.leaveMsg"}})],1),i("el-form-item",{attrs:{label:"按钮文案（可自定义）",prop:""}},[i("el-input",{attrs:{maxlength:"10",placeholder:"立即砍价"},model:{value:t.activity.activitySetting.buttonText,callback:function(e){t.$set(t.activity.activitySetting,"buttonText",e)},expression:"activity.activitySetting.buttonText"}})],1),i("el-form-item",{attrs:{label:"参与门店",prop:""}},[i("el-select",{staticStyle:{width:"600px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.activity.storeIds,callback:function(e){t.$set(t.activity,"storeIds",e)},expression:"activity.storeIds"}},t._l(t.stores,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),i("el-dialog",{attrs:{title:t.typeName[t.editItem.type],visible:t.customDialogVisible,"modal-append-to-body":!1,"append-to-body":!0,width:"600px","before-close":t.handleClose},on:{"update:visible":function(e){t.customDialogVisible=e}}},[i("div",{staticClass:"custom-container"},[i("el-form",{ref:"custom",attrs:{rules:t.customRules,model:t.editItem,"label-width":"100px",size:"small"}},["OneLineText"==t.editItem.type||"Mobile"==t.editItem.type||"IdNumber"==t.editItem.type||"Address"==t.editItem.type||"Mail"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"10",placeholder:"请输入字段名称(10个字符以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"字段描述",prop:"desc"}},[i("el-input",{attrs:{maxlength:"",type:"textarea",rows:2,placeholder:"请说明字段怎么填写"},model:{value:t.editItem.desc,callback:function(e){t.$set(t.editItem,"desc",e)},expression:"editItem.desc"}})],1)],1):t._e(),"TextArea"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"10",placeholder:"请输入字段名称(10个字符以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"字段描述",prop:"desc"}},[i("el-input",{attrs:{maxlength:"",type:"textarea",rows:2,placeholder:"请说明字段怎么填写"},model:{value:t.editItem.desc,callback:function(e){t.$set(t.editItem,"desc",e)},expression:"editItem.desc"}})],1)],1):t._e(),"Select"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"200",placeholder:"请输入字段名称(200个字以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"选项",prop:"ext"}},[t._l(t.editItem.ext.values,(function(e,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[i("el-input",{attrs:{maxlength:"30",placeholder:"请输入选项"},model:{value:t.editItem.ext.values[a],callback:function(e){t.$set(t.editItem.ext.values,a,e)},expression:"editItem.ext.values[index]"}}),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return i.preventDefault(),t.removeXuanxiang(e,a)}}},[t._v("删除")])],1)})),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addXuanxiang()}}},[t._v("+添加选项")])],2)],1):t._e(),"MultiSelect"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"200",placeholder:"请输入字段名称(200个字以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"选项",prop:"ext"}},[t._l(t.editItem.ext.values,(function(e,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[i("el-input",{attrs:{maxlength:"30",placeholder:"请输入选项"},model:{value:t.editItem.ext.values[a],callback:function(e){t.$set(t.editItem.ext.values,a,e)},expression:"editItem.ext.values[index]"}}),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return i.preventDefault(),t.removeXuanxiang(e,a)}}},[t._v("删除")])],1)})),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addXuanxiang()}}},[t._v("+添加选项")])],2),i("el-form-item",{attrs:{label:"最少选几项",prop:""}},[i("el-input",{attrs:{placeholder:"最少选几项"},model:{value:t.editItem.ext.min,callback:function(e){t.$set(t.editItem.ext,"min",e)},expression:"editItem.ext.min"}})],1),i("el-form-item",{attrs:{label:"最多选几项",prop:""}},[i("el-input",{attrs:{placeholder:"最多选几项"},model:{value:t.editItem.ext.max,callback:function(e){t.$set(t.editItem.ext,"max",e)},expression:"editItem.ext.max"}})],1)],1):t._e(),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),i("el-button",{on:{click:function(e){return t.resetForm("custom")}}},[t._v("取消")])],1)],1)],1)])],1)},_t=[],wt={name:"TypeGroup",components:{},props:{activity:{type:Object,default:function(){return{}}},merchantId:{type:String,default:0}},data:function(){return{rules:{},customRules:{},commonField:[],customDialogVisible:!1,editItem:{},editItemIndex:-1,typeName:{OneLineText:"单行文本",TextArea:"多行文本",Select:"单选",MultiSelect:"多选"},stores:[]}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.getRequirecolumns(),this.getStores()},getRequirecolumns:function(){var t=this;Object(l["p"])().then((function(e){"ok"===e.msg?(t.commonField=e.data,t.initCommonField()):t.$message({type:"error",message:"出了点问题"})}))},initCommonField:function(){var t=this;this.activity.requireColumns.forEach((function(e,i){t.commonField.forEach((function(t,i){t.name==e.name&&(t.selected=!0)}))}))},getStores:function(){var t=this;Object(c["k"])({merchantId:this.merchantId}).then((function(e){"ok"===e.msg?t.stores=e.data:t.$message({type:"error",message:"出了点问题"})}))},toggleSelect:function(t,e){if(t.selected){this.commonField[e].selected=!1;var i=-1;this.activity.requireColumns.forEach((function(e,a){e.name==t.name&&(i=a)})),this.activity.requireColumns.splice(i,1)}else this.commonField[e].selected=!0,this.activity.requireColumns.push(t)},del:function(t,e){this.activity.requireColumns.splice(e,1),this.commonField.forEach((function(e,i){e.name==t.name&&(e.selected=!1)}))},handelEdit:function(t,e){this.editCustom(t.type,e)},editCustom:function(t,e){e>-1?(this.editItem=JSON.parse(JSON.stringify(this.activity.requireColumns[e])),this.editItem.ext&&("string"==typeof this.editItem.ext&&(this.editItem.ext=JSON.parse(this.editItem.ext)),"string"==typeof this.editItem.ext.values&&(this.editItem.ext.values=JSON.parse(this.editItem.ext.values))),this.editItemIndex=e):("OneLineText"==t?this.editItem={name:"",required:!1,type:"OneLineText",desc:""}:"TextArea"==t?this.editItem={name:"",required:!1,type:"TextArea",desc:""}:"Select"==t?this.editItem={ext:{min:1,max:1,values:[]},name:"",required:!1,type:"Select"}:"MultiSelect"==t&&(this.editItem={ext:{min:1,max:"",values:[]},name:"",required:!1,type:"MultiSelect"}),this.editItemIndex=-1),this.customDialogVisible=!0},addXuanxiang:function(){this.editItem.ext.values.push("")},removeXuanxiang:function(t,e){this.editItem.ext.values.splice(e,1)},handleClose:function(t){console.log("关闭弹窗"),this.customDialogVisible=!1,t()},onSubmit:function(){this.editItem.ext&&(this.editItem.ext=JSON.stringify(this.editItem.ext)),this.editItemIndex>-1?this.activity.requireColumns.splice(this.editItemIndex,1,this.editItem):this.activity.requireColumns.push(this.editItem),this.customDialogVisible=!1},resetForm:function(t){this.customDialogVisible=!1,this.editItem={},this.editItemIndex=-1},addGroup:function(){this.activity.activitySetting.groups.push({personNum:"",price:"",commodityAmount:""})},removeGroup:function(t,e){this.activity.activitySetting.groups.splice(e,1)}}},zt=wt,Ot=(a("d433"),Object(I["a"])(zt,kt,_t,!1,null,"5fefa171",null)),Yt=Ot.exports,Zt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"second",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"投票设置"}},[t._l(t.activity.activitySetting.defaultVote,(function(e,a){return i("div",{key:"v1-"+a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v(t._s(t.isVideo=t.isAssetTypeAnVideo(e.cover)))]),i("div",{staticStyle:{width:"40px"}},[t._v(t._s(a+1))]),i("el-upload",{staticClass:"avatar-uploader uploader",staticStyle:{"margin-right":"15px"},attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":function(e,i){return t.handleDataSuccess(e,i,a)},"before-upload":t.beforeUpload}},[e.cover&&!t.isVideo?i("img",{staticClass:"avatar",staticStyle:{width:"120px","max-height":"150px"},attrs:{src:e.cover+"?imageView2/0/w/120"}}):e.cover&&t.isVideo?i("video",{attrs:{controls:"",width:"120"}},[i("source",{attrs:{src:e.cover}}),t._v(" Sorry, your browser doesn't support embedded videos. ")]):i("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"120px",height:"150px"}})]),i("div",{staticStyle:{margin:"0 10px 0 0",width:"350px"}},[i("el-input",{staticClass:"custon-prepend-120",staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"自动生成，不需要输入",disabled:""},model:{value:e.orderVoteId,callback:function(i){t.$set(e,"orderVoteId",i)},expression:"item.orderVoteId"}},[i("template",{slot:"prepend"},[t._v("编号")])],2),i("el-input",{staticClass:"custon-prepend-120",staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"初始投票数"},model:{value:e.ticketNum,callback:function(i){t.$set(e,"ticketNum",i)},expression:"item.ticketNum"}},[i("template",{slot:"prepend"},[t._v("初始投票数")])],2),i("el-input",{staticClass:"custon-prepend-120",staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"名称"},model:{value:e.name,callback:function(i){t.$set(e,"name",i)},expression:"item.name"}},[i("template",{slot:"prepend"},[t._v("名称")])],2),i("el-select",{staticClass:"custon-prepend-120",attrs:{placeholder:"请选择"},model:{value:e.group,callback:function(i){t.$set(e,"group",i)},expression:"item.group"}},[t._l(t.activity.activitySetting.groupNames,(function(t,e){return i("el-option",{key:t.id+1e5*e,attrs:{label:t.group,value:t.group}})})),i("template",{slot:"prefix"},[t._v("分组")])],2)],1),i("div",{staticStyle:{margin:"0 10px 0 0",width:"300px",position:"relative"}},[i("span",{staticClass:"con-prepend"},[t._v("投票图文详情,点击开始编辑")]),i("div",{staticClass:"con-pre",on:{click:function(e){return t.goVoteItemConEdit(a)}}},[i("el-scrollbar",{staticClass:"content-inner",staticStyle:{padding:"8px 12px 8px 8px"}},[i("span",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[t._v(" "+t._s(t.itemContent="string"===typeof e.content?JSON.parse(e.content?e.content:"[]"):Object.assign([],e.content))+" "+t._s(t.itemContent=Object.assign([],t.itemContent?t.itemContent:[{type:"text",value:""}]))+" ")]),t._l(t.itemContent,(function(e,a){return t.itemContent?i("div",{key:"inn1-"+a},["text"==e.type?i("div",{domProps:{innerHTML:t._s(e.value)}}):t._e(),"smallImg"==e.type?i("div",{staticClass:"smallImg"},[i("div",{staticClass:"img-preview"},t._l(e.value,(function(t,e){return i("div",{key:"iddx1-"+e,staticClass:"img-preview-item"},[i("img",{staticStyle:{"max-width":"100%"},attrs:{src:t}})])})),0)]):t._e(),"bigImg"==e.type?i("div",{staticClass:"bigImg"},[i("div",{staticClass:"img-preview"},t._l(e.value,(function(t,e){return i("div",{key:"iddx2-"+e,staticClass:"img-preview-item"},[i("img",{staticStyle:{"max-width":"100%"},attrs:{src:t}})])})),0)]):t._e(),"video"==e.type?i("div",{staticClass:"video"},[i("video",{attrs:{controls:"",width:"500"}},[i("source",{attrs:{src:e.value}}),t._v(" Sorry, your browser doesn't support embedded videos. ")])]):t._e()]):t._e()}))],2)],1)]),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return i.preventDefault(),t.removeVoteItem(e,a)}}},[t._v("删除")])],1)})),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addVoteItem()}}},[t._v("+添加")]),i("el-popover",{staticStyle:{"margin-left":"20px"},attrs:{placement:"right",width:"450",trigger:"click"},on:{hide:t.groupNameHide}},[i("div",{staticStyle:{padding:"30px 30px 50px 30px"}},[i("div",{staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[i("div",{staticStyle:{"margin-bottom":"5px",width:"100px"}},[t._v(" id(自动生成) ")]),i("div",{staticStyle:{"margin-bottom":"5px",width:"250px"}},[t._v(" 分组名称 ")])]),t._l(t.activity.activitySetting.groupNames,(function(e,a){return i("div",{key:"v2-"+a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[i("el-input",{staticStyle:{"margin-bottom":"5px",width:"100px","margin-right":"10px"},attrs:{placeholder:"id",disabled:""},model:{value:e.id,callback:function(i){t.$set(e,"id",i)},expression:"item.id"}}),i("el-input",{staticStyle:{"margin-bottom":"5px",width:"250px","margin-right":"10px"},attrs:{placeholder:"分组名称"},model:{value:e.group,callback:function(i){t.$set(e,"group",i)},expression:"item.group"}}),i("el-button",{attrs:{type:"danger",plain:"",size:"small"},on:{click:function(i){return i.preventDefault(),t.removeGroupName(e,a)}}},[t._v("删除")])],1)})),i("el-button",{staticStyle:{"margin-top":"30px"},attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addGroupName()}}},[t._v("+添加分组")])],2),i("el-button",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v("分组管理")])],1)],2),i("el-form-item",{attrs:{label:"用户投票总次数",prop:""}},[i("el-input",{attrs:{type:"number",maxlength:"5",placeholder:"不限制"},model:{value:t.activity.activitySetting.totalVoteNumLimit,callback:function(e){t.$set(t.activity.activitySetting,"totalVoteNumLimit",e)},expression:"activity.activitySetting.totalVoteNumLimit"}})],1),i("el-form-item",{attrs:{label:"用户每天投票次数",prop:""}},[i("el-input",{attrs:{type:"number",maxlength:"5",placeholder:"不限制"},model:{value:t.activity.activitySetting.voteNumForDayLimit,callback:function(e){t.$set(t.activity.activitySetting,"voteNumForDayLimit",e)},expression:"activity.activitySetting.voteNumForDayLimit"}})],1),i("el-form-item",{attrs:{label:"当日同一项重复被投票"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.supportRepeatVote,callback:function(e){t.$set(t.activity.activitySetting,"supportRepeatVote",e)},expression:"activity.activitySetting.supportRepeatVote"}})],1),i("el-form-item",{attrs:{label:"投票者手机号"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.voterPhoneNum,callback:function(e){t.$set(t.activity.activitySetting,"voterPhoneNum",e)},expression:"activity.activitySetting.voterPhoneNum"}})],1),i("el-form-item",{attrs:{label:"开启在线报名"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.supportOnlineApply,callback:function(e){t.$set(t.activity.activitySetting,"supportOnlineApply",e)},expression:"activity.activitySetting.supportOnlineApply"}})],1),i("el-form-item",{attrs:{label:"参赛需审核"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.needCheck,callback:function(e){t.$set(t.activity.activitySetting,"needCheck",e)},expression:"activity.activitySetting.needCheck"}})],1),i("el-form-item",{attrs:{label:"按钮文案（可自定义）",prop:""}},[i("el-input",{attrs:{maxlength:"10",placeholder:"立即参加"},model:{value:t.activity.activitySetting.buttonText,callback:function(e){t.$set(t.activity.activitySetting,"buttonText",e)},expression:"activity.activitySetting.buttonText"}})],1),i("el-form-item",{attrs:{label:"参与门店",prop:""}},[i("el-select",{staticStyle:{width:"600px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.activity.storeIds,callback:function(e){t.$set(t.activity,"storeIds",e)},expression:"activity.storeIds"}},t._l(t.stores,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),i("el-dialog",{attrs:{title:"详情",width:"800px",visible:t.voteItemContentVisible,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(e){t.voteItemContentVisible=e}}},[t._l(t.voteItemContent,(function(e,a){return t.voteItemContent.length>0?i("div",{key:e.id,staticStyle:{display:"flex","align-items":"flex-start","margin-bottom":"15px"}},[e?i("div",{staticStyle:{margin:"0 10px 0 0",width:"610px"}},[i("el-divider",{attrs:{"content-position":"left"}},[t._v(t._s(t.contentTypes[e.type]))]),t.voteItemContentVisible&&"text"==e.type?i("Tinymce",{ref:"editor"+a,refInFor:!0,attrs:{id:"editor"+a,height:150,toolbar:[""],menubar:"false",hasUpload:!1},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}}):t._e(),"bigImg"==e.type?i("div",{staticClass:"bigImg"},[i("div",{staticClass:"img-preview"},["string"===typeof e.value?i("div",{staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e.value}})]):t._l(e.value,(function(e,n){return i("div",{key:"idx1-"+n,staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a,n)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e}})])}))],2)]):t._e(),"smallImg"==e.type?i("div",{staticClass:"smallImg"},[i("div",[t._v(t._s(e.value.length)+"/9")]),i("div",{staticClass:"img-preview"},t._l(e.value,(function(e,n){return i("div",{key:"idx2-"+n,staticClass:"img-preview-item"},[i("span",{staticClass:"action"},[i("span",{staticClass:"delete",on:{click:function(e){return t.deleteImg(a,n)}}},[i("i",{staticClass:"el-icon-delete"})])]),i("img",{staticStyle:{"max-width":"100%"},attrs:{src:e}})])})),0),e.value.length<9?i("div",{staticClass:"editor-container"},[t.dataObj.token?i("dropzone",{staticClass:"myVueDropzone",attrs:{id:"myVueDropzone-dialog-"+e.id,url:"http://upload-z2.qiniup.com",token:t.dataObj.token,showRemoveLink:!1},on:{"dropzone-removedFile":t.dropzoneRVoteItem,"dropzone-success":function(e,i){return t.dropzoneSVoteItem(e,i,a,9)},"dropzone-error":t.dropzoneEVoteItem}}):t._e()],1):t._e()]):t._e(),"video"==e.type?i("div",[i("el-upload",{staticClass:"uploader",attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","on-success":function(e,i){return t.handleContentUploadSuccessVoteItem(e,i,"","video",a,"value")},"on-remove":function(e){return t.handleContentRemoveVoteItem(e,"video",a)}}},[e.value.length>0?i("video",{staticClass:"avatar2",attrs:{controls:"",width:"500"}},[i("source",{attrs:{src:e.value}}),t._v(" Sorry, your browser doesn't support embedded videos. ")]):i("i",{staticClass:"el-icon-plus uploader-icon"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（尺寸为720*416最佳）")])])],1):t._e()],1):t._e(),i("div",{staticStyle:{"margin-top":"20px"}},[i("el-button",{attrs:{type:"danger",plain:"",circle:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.removeConItemVoteItem(a)}}}),i("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"mini",icon:"el-icon-arrow-up",disabled:1==a&&"label"==t.voteItemContent[0].type||0==a},on:{click:function(i){return i.preventDefault(),t.upConItemVoteItem(e,a)}}}),i("el-button",{attrs:{type:"primary",plain:"",circle:"",size:"mini",icon:"el-icon-arrow-down",disabled:"label"==e.type||a==t.voteItemContent.length-1},on:{click:function(i){return i.preventDefault(),t.downConItemVoteItem(e,a)}}})],1)]):t._e()})),i("div",{staticClass:"action",staticStyle:{height:"0",overflow:"hidden"}},[t.dataObj.token?i("dropzone",{staticClass:"myVueDropzone",attrs:{url:"http://upload-z2.qiniup.com",token:t.dataObj.token,showRemoveLink:!1,id:"VoteItemuploadBigImg"},on:{"dropzone-removedFile":t.dropzoneRVoteItem,"dropzone-success":function(e,i){return t.dropzoneSBigVoteItem(e,i)}}}):t._e()],1),i("div",{staticStyle:{"margin-bottom":"20px"}},[i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addConVoteItem("text","")}}},[t._v("+添加文字")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addConVoteItem("bigImg",[])}}},[t._v("+添加大图")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addConVoteItem("smallImg",[])}}},[t._v("+添加小图")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:function(e){return e.preventDefault(),t.addConVoteItem("video","")}}},[t._v("+添加视频")])],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.voteItemContentVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.voteItemContentSave}},[t._v("确 定")])],1)],2)],1)},Tt=[],$t=(a("25f0"),{name:"TypeVote",components:{Dropzone:_,Tinymce:O["a"]},props:{activity:{type:Object,default:function(){return{}}},merchantId:{type:String,default:0},dataObj:{type:Object,default:function(){return{token:"",key:""}}}},data:function(){return{rules:{},contentTypes:{bigImg:"大图",smallImg:"小图",text:"文字",video:"视频",label:"标签"},voteItemContentVisible:!1,voteItemContent:[],voteItemIndex:null,stores:[]}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.getStores()},beforeUpload:function(t){var e=t.name,i=this.getAssetType(e),a="ttz_"+(new Date).getTime()+"."+i,n=encodeURI("".concat(a));this.dataObj.key=n;var s=t.size/1024/1024<200;return s||this.$message.error("上传图片大小不能超过 200MB!"),s},handleDataSuccess:function(t,e,i){this.activity.activitySetting.defaultVote[i].cover="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},addVoteItem:function(){this.activity.activitySetting.defaultVote||this.$set(this.activity.activitySetting,"defaultVote",[]),this.activity.activitySetting.defaultVote.push({orderVoteId:"",name:"",cover:"",title:"",ticketNum:"",content:"[]"})},removeVoteItem:function(t,e){this.activity.activitySetting.defaultVote.splice(e,1)},goVoteItemConEdit:function(t){var e=this;this.voteItemIndex=t,"string"===typeof this.activity.activitySetting.defaultVote[t].content?this.voteItemContent=JSON.parse(this.activity.activitySetting.defaultVote[t].content?this.activity.activitySetting.defaultVote[t].content:"[]"):this.voteItemContent=JSON.parse(JSON.stringify(this.activity.activitySetting.defaultVote[t].content)),this.voteItemContent.forEach((function(t,i){var a=Z()(),n=Object.assign({},t,{id:a});e.voteItemContent[i]=Object.assign({},n)})),this.voteItemContentVisible=!0},voteItemContentSave:function(){var t=this;this.voteItemContentVisible=!1,this.voteItemContent.forEach((function(e,i){var a={type:e.type,value:e.value};t.voteItemContent[i]=Object.assign({},a)})),this.activity.activitySetting.defaultVote[this.voteItemIndex].content=JSON.stringify(this.voteItemContent)},removeGroupName:function(t,e){this.activity.activitySetting.groupNames.splice(e,1)},addGroupName:function(){this.activity.activitySetting.groupNames||this.$set(this.activity.activitySetting,"groupNames",[]),this.activity.activitySetting.groupNames.push({id:"",group:""})},adJustObjectArray:function(t){var e=[];return t.forEach((function(t,i){for(var a in e[i]=0,t)(t[a]+"").trim()?e[i]=e[i]+1:e[i]=e[i]+0})),e.forEach((function(e,i){e<1&&t.splice(i,1)})),t},groupNameHide:function(){this.activity.activitySetting.groupNames=this.adJustObjectArray(this.activity.activitySetting.groupNames)},dropzoneSVoteItem:function(t,e,i,a){if(a&&(console.log(this.voteItemContent[i].value.length),this.voteItemContent[i].value.length===a))this.$message.warning("最多上传"+a+"张图片");else{var n="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+e.key,s=this.voteItemContent[i];s.value.push(n),this.$set(this.voteItemContent,i,s),this.$message({message:"上传成功",type:"success"})}},dropzoneSBigVoteItem:function(t,e){var i=Z()(),a="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+e.key,n=[];n.push(a),this.voteItemContent.push({type:"bigImg",value:n,id:i})},dropzoneRVoteItem:function(t){},dropzoneEVoteItem:function(t,e,i){this.$message.error(e),console.log(i)},dropzoneAVoteItem:function(t,e,i){},deleteImgVoteItem:function(t,e){e?this.voteItemContent[t].value.splice(e,1):this.voteItemContent[t].value=[]},deleteImg:function(t,e){e?this.voteItemContent[t].value.splice(e,1):this.voteItemContent[t].value=[]},handleExceedSmallImgVoteItem:function(t,e){this.$message.warning("最多传9张，加上此次选取的 ".concat(t.length," 张图片, 总共 ").concat(t.length+e.length))},removeConItemVoteItem:function(t){1===this.voteItemContent.length?this.$message.warning("活动详情不能为空，请添加其他类型再删除当前的内容"):this.voteItemContent.splice(t,1)},upConItemVoteItem:function(t,e){var i=e,a=e-1;this.voteItemContent.splice(i,1),this.voteItemContent.splice(a,0,t)},downConItemVoteItem:function(t,e){var i=e,a=e+1;this.voteItemContent.splice(i,1),this.voteItemContent.splice(a,0,t)},addConVoteItem:function(t,e){var i=Z()();"label"===t?"label"!==this.voteItemContent[0].type&&this.voteItemContent.unshift({type:t,value:e,id:i}):"bigImg"===t?document.getElementById("VoteItemuploadBigImg").click():this.voteItemContent.push({type:t,value:e,id:i})},handleContentUploadSuccessVoteItem:function(t,e,i,a,n,s){this.voteItemContent[n][s]="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleContentRemoveVoteItem:function(t,e,i){this.voteItemContent.splice(i,1)},getRequirecolumns:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=this;getRequirecolumns().then((function(e){"ok"===e.msg?(t.commonField=e.data,t.initCommonField()):t.$message({type:"error",message:"出了点问题"})}))})),initCommonField:function(){var t=this;this.activity.requireColumns.forEach((function(e,i){t.commonField.forEach((function(t,i){t.name==e.name&&(t.selected=!0)}))}))},getStores:function(){var t=this;Object(c["k"])({merchantId:this.merchantId}).then((function(e){"ok"===e.msg?t.stores=e.data:t.$message({type:"error",message:"出了点问题"})}))},toggleSelect:function(t,e){if(t.selected){this.commonField[e].selected=!1;var i=-1;this.activity.requireColumns.forEach((function(e,a){e.name==t.name&&(i=a)})),this.activity.requireColumns.splice(i,1)}else this.commonField[e].selected=!0,this.activity.requireColumns.push(t)},del:function(t,e){this.activity.requireColumns.splice(e,1),this.commonField.forEach((function(e,i){e.name==t.name&&(e.selected=!1)}))},handelEdit:function(t,e){this.editCustom(t.type,e)},editCustom:function(t,e){e>-1?(this.editItem=JSON.parse(JSON.stringify(this.activity.requireColumns[e])),this.editItem.ext&&("string"==typeof this.editItem.ext&&(this.editItem.ext=JSON.parse(this.editItem.ext)),"string"==typeof this.editItem.ext.values&&(this.editItem.ext.values=JSON.parse(this.editItem.ext.values))),this.editItemIndex=e):("OneLineText"==t?this.editItem={name:"",required:!1,type:"OneLineText",desc:""}:"TextArea"==t?this.editItem={name:"",required:!1,type:"TextArea",desc:""}:"Select"==t?this.editItem={ext:{min:1,max:1,values:[]},name:"",required:!1,type:"Select"}:"MultiSelect"==t&&(this.editItem={ext:{min:1,max:"",values:[]},name:"",required:!1,type:"MultiSelect"}),this.editItemIndex=-1),this.customDialogVisible=!0},addXuanxiang:function(){this.editItem.ext.values.push("")},removeXuanxiang:function(t,e){this.editItem.ext.values.splice(e,1)},handleClose:function(t){console.log("关闭弹窗"),this.customDialogVisible=!1,t()},onSubmit:function(){this.editItem.ext&&(this.editItem.ext=JSON.stringify(this.editItem.ext)),this.editItemIndex>-1?this.activity.requireColumns.splice(this.editItemIndex,1,this.editItem):this.activity.requireColumns.push(this.editItem),this.customDialogVisible=!1},resetForm:function(t){this.customDialogVisible=!1,this.editItem={},this.editItemIndex=-1},addGroup:function(){this.activity.activitySetting.groups.push({personNum:"",price:"",commodityAmount:""})},removeGroup:function(t,e){this.activity.activitySetting.groups.splice(e,1)},isAssetTypeAnImage:function(t){return Object(r["c"])(t)},isAssetTypeAnVideo:function(t){return Object(r["d"])(t)},getAssetType:function(t){return Object(r["b"])(t)}}}),jt=$t,Ut=(a("5ec9"),a("1631"),Object(I["a"])(jt,Zt,Tt,!1,null,"b9324c22",null)),Mt=Ut.exports,Vt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"second",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[10==t.activity.type?i("el-form-item",{attrs:{label:"减免金额(元)",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"6",placeholder:"请输入减免金额"},model:{value:t.activity.activitySetting.reduceAmount,callback:function(e){t.$set(t.activity.activitySetting,"reduceAmount",e)},expression:"activity.activitySetting.reduceAmount"}})],1):t._e(),11==t.activity.type?i("el-form-item",{attrs:{label:"折扣",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"",placeholder:"请输入折扣"},model:{value:t.activity.activitySetting.discount,callback:function(e){t.$set(t.activity.activitySetting,"discount",e)},expression:"activity.activitySetting.discount"}})],1):t._e(),10==t.activity.type||11==t.activity.type||12==t.activity.type?i("el-form-item",{attrs:{label:"使用门槛(元)",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"",placeholder:"满多少可用,0则无门槛"},model:{value:t.activity.activitySetting.consumeThreshold,callback:function(e){t.$set(t.activity.activitySetting,"consumeThreshold",e)},expression:"activity.activitySetting.consumeThreshold"}})],1):t._e(),13==t.activity.type?i("el-form-item",{attrs:{label:"原价",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"4",placeholder:"请输入原价"},model:{value:t.activity.activitySetting.originalPrice,callback:function(e){t.$set(t.activity.activitySetting,"originalPrice",e)},expression:"activity.activitySetting.originalPrice"}})],1):t._e(),13==t.activity.type?i("el-form-item",{attrs:{label:"体验价",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"4",placeholder:"请输入体验价"},model:{value:t.activity.activitySetting.experiencePrice,callback:function(e){t.$set(t.activity.activitySetting,"experiencePrice",e)},expression:"activity.activitySetting.experiencePrice"}})],1):t._e(),i("el-form-item",{attrs:{label:t.activityTypes[t.activity.type]+"数量",prop:""}},[i("el-input",{attrs:{type:"number",maxlength:"",placeholder:"请合理设置"},model:{value:t.activity.activitySetting.couponNum,callback:function(e){t.$set(t.activity.activitySetting,"couponNum",e)},expression:"activity.activitySetting.couponNum"}})],1),i("el-form-item",{attrs:{label:"参与门店",prop:""}},[i("el-select",{staticStyle:{width:"600px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.activity.storeIds,callback:function(e){t.$set(t.activity,"storeIds",e)},expression:"activity.storeIds"}},t._l(t.stores,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1)},qt=[],Et={name:"TypeDiscount",components:{},props:{activity:{type:Object,default:function(){return{}}},merchantId:{type:String,default:0}},data:function(){return{rules:{},activityTypes:{1:"报名",2:"抽奖",3:"海报",4:"砍价",5:"秒杀",6:"拼团",7:"投票",8:"预约",9:"助力",10:"代金券",11:"折扣券",12:"兑换券",13:"体验券"},stores:[]}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.getStores()},getStores:function(){var t=this;Object(c["k"])({merchantId:this.merchantId}).then((function(e){"ok"===e.msg?t.stores=e.data:t.$message({type:"error",message:"出了点问题"})}))}}},Dt=Et,Bt=Object(I["a"])(Dt,Vt,qt,!1,null,null,null),Rt=Bt.exports,Lt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"second",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"信息收集",prop:""}},[i("el-row",{staticClass:"row-bg",attrs:{type:"flex"}},[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content selectField-content"},[i("div",{staticClass:"tit"},[t._v("已选字段( "+t._s(t.activity.requireColumns.length)+" )")]),i("ul",t._l(t.activity.requireColumns,(function(e,a){return i("li",{key:a,staticClass:"selectItem"},[i("div",{staticClass:"itemName"},[t._v(t._s(e.name))]),i("el-checkbox",{staticClass:"checked",model:{value:e.required,callback:function(i){t.$set(e,"required",i)},expression:"item.required"}},[t._v("必填")]),i("i",{staticClass:"edit el-icon-edit",on:{click:function(i){return t.handelEdit(e,a)}}}),i("i",{staticClass:"delete el-icon-delete",on:{click:function(i){return t.del(e,a)}}})],1)})),0)])]),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content commonField-content"},[i("div",{staticClass:"tit"},[t._v("常用字段")]),i("ul",{staticClass:"list"},t._l(t.commonField,(function(e,a){return i("li",{key:a,class:e.selected?"item selected":"item",on:{click:function(i){return t.toggleSelect(e,a)}}},[t._v(t._s(e.name))])})),0),i("div",{staticClass:"tit"},[t._v("自定义字段")]),i("ul",{staticClass:"customList"},[i("li",{on:{click:function(e){return t.editCustom("OneLineText")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAS1BMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYma+wu9hAAAAGHRSTlMA3u3opE1GRMtvh3MpC9+ZY2BXPgS2eBIY7bL6AAAAdklEQVQY05XPVw7DIBBFUTIlFPeS5O1/pbEsbA/my/cLjpCYcc/riLoKIxArJGa+m2KeoTcMWFeE0lpsENAWKFicWyDWfoAMgwB2qi9yjUFGmsZxSqDLmuNC5mkUzdOK3apOvffvve2geVYUffLf/eus5+Qe9AejKwZrfJIFOQAAAABJRU5ErkJggg=="}}),i("span",[t._v("单行文本")])]),i("li",{on:{click:function(e){return t.editCustom("TextArea")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAWlBMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmaAjSSDAAAAHXRSTlMAzUE8ck8b0GXn36milmtTRSb21MK8nVmJiDAGBXjzAUgAAAB/SURBVBjTtc5XDsIwEATQSRz3EjuVtve/JphVZMIv4v2MNNIW/I/uAMhkjEnm6EYiCRA7SmetA/ahSmA9ZUkCZ/METBonN4r3x0YFgw/Bb1x6eguY2yFF7hLj1ZIqWYied68k+a0VzS455YhGKdG/CFVqZB6nL6gW3X3QC371BHgzCJp01x7WAAAAAElFTkSuQmCC"}}),i("span",[t._v("多行文本")])]),i("li",{on:{click:function(e){return t.editCustom("Select")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAP1BMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZqi4AuAAAAFHRSTlMA8uKxqaMolbmc9umDNC4gHwkGv+8M7BwAAAB1SURBVBjTlZBJDsAgDAMddrov/v9bS6lQWyEO+OBIo0RJjF7NcSTHOH+ZJ5UxivQvO6mXuy6aZ2GRU/J9TzaVXseQzIpYBwS6DC03rMIkWbHRZigK0MzSgJIMaXAMDxwOGDZgY7xa1D4J/n98/WZoBFJH16kL6TEIZEWyJmIAAAAASUVORK5CYII="}}),i("span",[t._v("单选")])]),i("li",{on:{click:function(e){return t.editCustom("MultiSelect")}}},[i("img",{attrs:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUBAMAAAB/pwA+AAAALVBMVEUAAABgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYmZgYma5vQ1VAAAADnRSTlMA8vegZoyGfXhJtZdbU55+pB4AAABISURBVAjXYyAM2ATBoAHI5HsHBg+ATCYIUwHIZIQwBWDMI3DmE1YoM/udgx2UOWE5M0ztWwY7uLapSCaAmQgrUC1mhzmHIAAA67ZA7MJDFZ8AAAAASUVORK5CYII="}}),i("span",[t._v("多选")])])])])])],1)],1),i("el-form-item",{attrs:{label:"商品数量",prop:""}},[i("el-input",{attrs:{type:"number",maxlength:"6",placeholder:"请输入商品数量"},model:{value:t.activity.activitySetting.repertory,callback:function(e){t.$set(t.activity.activitySetting,"repertory",e)},expression:"activity.activitySetting.repertory"}})],1),i("el-form-item",{attrs:{label:"商品原价",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"6",placeholder:"请输入商品原价"},model:{value:t.activity.activitySetting.originPrice,callback:function(e){t.$set(t.activity.activitySetting,"originPrice",e)},expression:"activity.activitySetting.originPrice"}})],1),i("el-form-item",{attrs:{label:"秒杀价格",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"6",placeholder:"请输入秒杀活动价"},model:{value:t.activity.activitySetting.basePrice,callback:function(e){t.$set(t.activity.activitySetting,"basePrice",e)},expression:"activity.activitySetting.basePrice"}})],1),i("el-form-item",{attrs:{label:"单人限制",prop:""}},[i("el-input",{attrs:{type:"number",maxlength:"5",placeholder:"单人可报人数,留空表示不限制"},model:{value:t.activity.activitySetting.individualLimit,callback:function(e){t.$set(t.activity.activitySetting,"individualLimit",e)},expression:"activity.activitySetting.individualLimit"}})],1),i("el-form-item",{attrs:{label:"全额支付"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.fullPay,callback:function(e){t.$set(t.activity.activitySetting,"fullPay",e)},expression:"activity.activitySetting.fullPay"}})],1),t.activity.activitySetting.fullPay?t._e():i("el-form-item",{attrs:{label:"预付款",prop:""}},[i("el-input",{attrs:{type:"digit",maxlength:"6",placeholder:"输入订金金额"},model:{value:t.activity.activitySetting.advancePay,callback:function(e){t.$set(t.activity.activitySetting,"advancePay",e)},expression:"activity.activitySetting.advancePay"}})],1),i("el-form-item",{attrs:{label:"秒杀列表显示"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.activitySetting.listShowType,callback:function(e){t.$set(t.activity.activitySetting,"listShowType",e)},expression:"activity.activitySetting.listShowType"}})],1),i("el-form-item",{attrs:{label:"留言"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.leaveMsg,callback:function(e){t.$set(t.activity.activitySetting,"leaveMsg",e)},expression:"activity.activitySetting.leaveMsg"}})],1),i("el-form-item",{attrs:{label:"秒杀按钮文案（可自定义）",prop:""}},[i("el-input",{attrs:{maxlength:"20",placeholder:"默认: 立即秒杀"},model:{value:t.activity.activitySetting.buttonText,callback:function(e){t.$set(t.activity.activitySetting,"buttonText",e)},expression:"activity.activitySetting.buttonText"}})],1),i("el-form-item",{attrs:{label:"参与门店",prop:""}},[i("el-select",{staticStyle:{width:"600px"},attrs:{multiple:"",placeholder:"请选择"},model:{value:t.activity.storeIds,callback:function(e){t.$set(t.activity,"storeIds",e)},expression:"activity.storeIds"}},t._l(t.stores,(function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1),i("el-dialog",{attrs:{title:t.typeName[t.editItem.type],visible:t.customDialogVisible,"modal-append-to-body":!1,"append-to-body":!0,width:"600px","before-close":t.handleClose},on:{"update:visible":function(e){t.customDialogVisible=e}}},[i("div",{staticClass:"custom-container"},[i("el-form",{ref:"custom",attrs:{rules:t.customRules,model:t.editItem,"label-width":"100px",size:"small"}},["OneLineText"==t.editItem.type||"Mobile"==t.editItem.type||"IdNumber"==t.editItem.type||"Address"==t.editItem.type||"Mail"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"10",placeholder:"请输入字段名称(10个字符以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"字段描述",prop:"desc"}},[i("el-input",{attrs:{maxlength:"",type:"textarea",rows:2,placeholder:"请说明字段怎么填写"},model:{value:t.editItem.desc,callback:function(e){t.$set(t.editItem,"desc",e)},expression:"editItem.desc"}})],1)],1):t._e(),"TextArea"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"10",placeholder:"请输入字段名称(10个字符以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"字段描述",prop:"desc"}},[i("el-input",{attrs:{maxlength:"",type:"textarea",rows:2,placeholder:"请说明字段怎么填写"},model:{value:t.editItem.desc,callback:function(e){t.$set(t.editItem,"desc",e)},expression:"editItem.desc"}})],1)],1):t._e(),"Select"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"200",placeholder:"请输入字段名称(200个字以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"选项",prop:"ext"}},[t._l(t.editItem.ext.values,(function(e,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[i("el-input",{attrs:{maxlength:"30",placeholder:"请输入选项"},model:{value:t.editItem.ext.values[a],callback:function(e){t.$set(t.editItem.ext.values,a,e)},expression:"editItem.ext.values[index]"}}),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return i.preventDefault(),t.removeXuanxiang(e,a)}}},[t._v("删除")])],1)})),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addXuanxiang()}}},[t._v("+添加选项")])],2)],1):t._e(),"MultiSelect"==t.editItem.type?i("div",[i("el-form-item",{attrs:{label:"字段名称",prop:"name"}},[i("el-input",{attrs:{maxlength:"200",placeholder:"请输入字段名称(200个字以内)"},model:{value:t.editItem.name,callback:function(e){t.$set(t.editItem,"name",e)},expression:"editItem.name"}})],1),i("el-form-item",{attrs:{label:"选项",prop:"ext"}},[t._l(t.editItem.ext.values,(function(e,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[i("el-input",{attrs:{maxlength:"30",placeholder:"请输入选项"},model:{value:t.editItem.ext.values[a],callback:function(e){t.$set(t.editItem.ext.values,a,e)},expression:"editItem.ext.values[index]"}}),i("el-button",{attrs:{size:"mini"},on:{click:function(i){return i.preventDefault(),t.removeXuanxiang(e,a)}}},[t._v("删除")])],1)})),i("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addXuanxiang()}}},[t._v("+添加选项")])],2),i("el-form-item",{attrs:{label:"最少选几项",prop:""}},[i("el-input",{attrs:{placeholder:"最少选几项"},model:{value:t.editItem.ext.min,callback:function(e){t.$set(t.editItem.ext,"min",e)},expression:"editItem.ext.min"}})],1),i("el-form-item",{attrs:{label:"最多选几项",prop:""}},[i("el-input",{attrs:{placeholder:"最多选几项"},model:{value:t.editItem.ext.max,callback:function(e){t.$set(t.editItem.ext,"max",e)},expression:"editItem.ext.max"}})],1)],1):t._e(),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")]),i("el-button",{on:{click:function(e){return t.resetForm("custom")}}},[t._v("取消")])],1)],1)],1)])],1)},Pt=[],Nt={name:"TypeApply",components:{},props:{activity:{type:Object,default:function(){return{}}},merchantId:{type:String,default:0}},data:function(){return{rules:{},customRules:{},commonField:[],customDialogVisible:!1,editItem:{},editItemIndex:-1,typeName:{OneLineText:"单行文本",TextArea:"多行文本",Select:"单选",MultiSelect:"多选"},stores:[]}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.getRequirecolumns(),this.getStores()},getRequirecolumns:function(){var t=this;Object(l["p"])().then((function(e){"ok"===e.msg?(t.commonField=e.data,t.initCommonField()):t.$message({type:"error",message:"出了点问题"})}))},initCommonField:function(){var t=this;this.activity.requireColumns.forEach((function(e,i){t.commonField.forEach((function(t,i){t.name==e.name&&(t.selected=!0)}))}))},getStores:function(){var t=this;Object(c["k"])({merchantId:this.merchantId}).then((function(e){"ok"===e.msg?t.stores=e.data:t.$message({type:"error",message:"出了点问题"})}))},toggleSelect:function(t,e){if(t.selected){this.commonField[e].selected=!1;var i=-1;this.activity.requireColumns.forEach((function(e,a){e.name==t.name&&(i=a)})),this.activity.requireColumns.splice(i,1)}else this.commonField[e].selected=!0,this.activity.requireColumns.push(t)},del:function(t,e){this.activity.requireColumns.splice(e,1),this.commonField.forEach((function(e,i){e.name==t.name&&(e.selected=!1)}))},handelEdit:function(t,e){this.editCustom(t.type,e)},editCustom:function(t,e){e>-1?(this.editItem=JSON.parse(JSON.stringify(this.activity.requireColumns[e])),this.editItem.ext&&("string"==typeof this.editItem.ext&&(this.editItem.ext=JSON.parse(this.editItem.ext)),"string"==typeof this.editItem.ext.values&&(this.editItem.ext.values=JSON.parse(this.editItem.ext.values))),this.editItemIndex=e):("OneLineText"==t?this.editItem={name:"",required:!1,type:"OneLineText",desc:""}:"TextArea"==t?this.editItem={name:"",required:!1,type:"TextArea",desc:""}:"Select"==t?this.editItem={ext:{min:1,max:1,values:[]},name:"",required:!1,type:"Select"}:"MultiSelect"==t&&(this.editItem={ext:{min:1,max:"",values:[]},name:"",required:!1,type:"MultiSelect"}),this.editItemIndex=-1),this.customDialogVisible=!0},addXuanxiang:function(){this.editItem.ext.values.push("")},removeXuanxiang:function(t,e){this.editItem.ext.values.splice(e,1)},handleClose:function(t){console.log("关闭弹窗"),this.customDialogVisible=!1,t()},onSubmit:function(){this.editItem.ext&&(this.editItem.ext=JSON.stringify(this.editItem.ext)),this.editItemIndex>-1?this.activity.requireColumns.splice(this.editItemIndex,1,this.editItem):this.activity.requireColumns.push(this.editItem),this.customDialogVisible=!1},resetForm:function(t){this.customDialogVisible=!1,this.editItem={},this.editItemIndex=-1}}},Ft=Nt,Qt=(a("f336"),Object(I["a"])(Ft,Lt,Pt,!1,null,"1787a176",null)),Jt=Qt.exports,Wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"third",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"高级功能"}},[i("div",[t._v("（该功能为VIP会员专享）")]),i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.enableAdvancedSetting,callback:function(e){t.$set(t.activity,"enableAdvancedSetting",e)},expression:"activity.enableAdvancedSetting"}})],1),t.activity.enableAdvancedSetting>0?i("div",[i("el-form-item",{attrs:{label:"活动分销"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.enableUserSale,callback:function(e){t.$set(t.activity,"enableUserSale",e)},expression:"activity.enableUserSale"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("合理设置分销佣金，人人都是推广员(总佣金不能超过付款金额)")])],1),t.activity.enableUserSale?i("el-form-item",{attrs:{label:"一级佣金",prop:""}},[i("el-input",{attrs:{type:"digit",placeholder:"请输入"},model:{value:t.activity.userSaleSetting.levelOne,callback:function(e){t.$set(t.activity.userSaleSetting,"levelOne",e)},expression:"activity.userSaleSetting.levelOne"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("按每单多少元计算")])],1):t._e(),t.activity.enableUserSale?i("el-form-item",{attrs:{label:"二级佣金",prop:""}},[i("el-input",{attrs:{type:"digit",placeholder:"不填写则默认开启一级分销"},model:{value:t.activity.userSaleSetting.levelTwo,callback:function(e){t.$set(t.activity.userSaleSetting,"levelTwo",e)},expression:"activity.userSaleSetting.levelTwo"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("按每单多少元计算")])],1):t._e(),t.activity.enableUserSale?i("el-form-item",{attrs:{label:"用户付款后即返佣金"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.userSaleSetting.isVerification,callback:function(e){t.$set(t.activity.userSaleSetting,"isVerification",e)},expression:"activity.userSaleSetting.isVerification"}})],1):t._e(),i("el-form-item",{attrs:{label:"参与报名需审核"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.needCheck,callback:function(e){t.$set(t.activity.activitySetting,"needCheck",e)},expression:"activity.activitySetting.needCheck"}})],1),i("el-form-item",{attrs:{label:"虚拟报名人气"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.virtual,callback:function(e){t.$set(t.activity.advancedSetting,"virtual",e)},expression:"activity.advancedSetting.virtual"}})],1),t.activity.advancedSetting.virtual?i("el-form-item",{attrs:{label:"虚拟浏览量",prop:""}},[i("el-input",{attrs:{placeholder:"请输入"},model:{value:t.activity.advancedSetting.virtualViewCount,callback:function(e){t.$set(t.activity.advancedSetting,"virtualViewCount",e)},expression:"activity.advancedSetting.virtualViewCount"}})],1):t._e(),t.activity.advancedSetting.virtual?i("el-form-item",{attrs:{label:"虚拟参与量",prop:""}},[i("el-input",{attrs:{placeholder:"（最大数500）"},model:{value:t.activity.advancedSetting.virtualPersonCount,callback:function(e){t.$set(t.activity.advancedSetting,"virtualPersonCount",e)},expression:"activity.advancedSetting.virtualPersonCount"}})],1):t._e(),i("el-form-item",{attrs:{label:"参与报名需输入口令"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.registerOnlyAcceptWord,callback:function(e){t.$set(t.activity.advancedSetting,"registerOnlyAcceptWord",e)},expression:"activity.advancedSetting.registerOnlyAcceptWord"}})],1),t.activity.advancedSetting.registerOnlyAcceptWord?i("el-form-item",{attrs:{label:"口令内容",prop:""}},[i("el-input",{attrs:{placeholder:"1-20个字符",maxlength:"10"},model:{value:t.activity.advancedSetting.registerWord,callback:function(e){t.$set(t.activity.advancedSetting,"registerWord",e)},expression:"activity.advancedSetting.registerWord"}})],1):t._e(),t.activity.advancedSetting.registerOnlyAcceptWord?i("el-form-item",{attrs:{label:"获取口令的提示",prop:""}},[i("el-input",{attrs:{placeholder:"提示参与者如何获取口令，比如通过关注某公众号获取(选填）"},model:{value:t.activity.advancedSetting.shibbolethHint,callback:function(e){t.$set(t.activity.advancedSetting,"shibbolethHint",e)},expression:"activity.advancedSetting.shibbolethHint"}})],1):t._e(),i("el-form-item",{attrs:{label:"自定义海报"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.customPoster,callback:function(e){t.$set(t.activity.advancedSetting,"customPoster",e)},expression:"activity.advancedSetting.customPoster"}})],1),t.activity.advancedSetting.customPoster?i("el-form-item",{attrs:{label:"海报",prop:""}},[i("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":t.handleSuccess1,"on-remove":t.handleRemove1,"before-upload":t.beforeUpload}},[t.activity.advancedSetting.posterUrl?i("img",{staticClass:"avatar",attrs:{src:t.activity.advancedSetting.posterUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("尺寸650*1034")])]),t.activity.advancedSetting.posterUrl?i("el-button",{staticStyle:{"vertical-align":"top: margin-left: 30px"},attrs:{type:"danger",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.handleRemovePost(e)}}},[t._v("删除")]):t._e()],1):t._e(),i("el-form-item",{attrs:{label:"添加二维码"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.customQrCode,callback:function(e){t.$set(t.activity.advancedSetting,"customQrCode",e)},expression:"activity.advancedSetting.customQrCode"}})],1),t.activity.advancedSetting.customQrCode?i("el-form-item",{attrs:{label:"描述",prop:""}},[i("el-input",{attrs:{placeholder:"如:扫码进群领取资料(不超于30字)"},model:{value:t.activity.advancedSetting.qrCodeDesc,callback:function(e){t.$set(t.activity.advancedSetting,"qrCodeDesc",e)},expression:"activity.advancedSetting.qrCodeDesc"}})],1):t._e(),t.activity.advancedSetting.customQrCode?i("el-form-item",{attrs:{label:"二维码",prop:""}},[i("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":t.handleSuccess2,"on-remove":t.handleRemove2,"before-upload":t.beforeUpload}},[t.activity.advancedSetting.qrCodeUrl?i("img",{staticClass:"avatar1",attrs:{src:t.activity.advancedSetting.qrCodeUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon1"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("尺寸134*134")])]),t.activity.advancedSetting.qrCodeUrl?i("el-button",{staticStyle:{"vertical-align":"top: margin-left: 30px"},attrs:{type:"danger",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.handleRemoveQrCode(e)}}},[t._v("删除")]):t._e()],1):t._e(),i("el-form-item",{attrs:{label:"背景音乐",prop:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择","popper-class":"paginationSelect"},on:{change:t.chooseMusic},model:{value:t.activity.advancedSetting.bgMusicUrl,callback:function(e){t.$set(t.activity.advancedSetting,"bgMusicUrl",e)},expression:"activity.advancedSetting.bgMusicUrl"}},[t._l(t.bgMusicList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.id+"-"+e.firstClass+"-"+e.secondClass+"-"+e.name,value:e.url}},[i("span",{staticClass:"label-item"},[t._v(t._s(e.id))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.firstClass))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.secondClass))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.name))]),i("span",{staticClass:"label-item",staticStyle:{"padding-left":"20px"}},[i("audio",{staticStyle:{display:"inline-block",height:"24px",width:"220px","vertical-align":"middle"},attrs:{preload:"none",controls:"",src:e.url}},[t._v("Your browser does not support the "),i("code",[t._v("audio")]),t._v(" element.")])])])})),i("pagination",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"-1>0"}],attrs:{total:t.bgMusicTotal,page:t.bgMusicListQuery.current,limit:t.bgMusicListQuery.size},on:{"update:page":function(e){return t.$set(t.bgMusicListQuery,"current",e)},"update:limit":function(e){return t.$set(t.bgMusicListQuery,"size",e)},pagination:t.fetchMusicList}})],2)],1),i("el-form-item",{attrs:{label:"推荐到团团站"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.recommendTtz,callback:function(e){t.$set(t.activity.advancedSetting,"recommendTtz",e)},expression:"activity.advancedSetting.recommendTtz"}})],1)],1):t._e()],1)],1)},Gt=[],Xt=a("5302"),Ht=a("333d"),Kt={name:"AdvancedApply",components:{Pagination:Ht["a"]},props:{activity:{type:Object,default:function(){return{}}},dataObj:{type:Object,default:function(){return{token:""}}}},data:function(){return{rules:{},bgMusicList:[],bgMusicTotal:0,bgMusicListQuery:{searchStr:"",current:1,size:1e3}}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.fetchMusicList()},fetchMusicList:function(){var t=this;Object(Xt["c"])(this.bgMusicListQuery).then((function(e){"200"===e.code?(t.bgMusicList=e.data.records,t.bgMusicTotal=e.data.total):t.$message({type:"error",message:"出了点问题"})}))},chooseMusic:function(t){var e=this;this.bgMusicList.forEach((function(i,a){i.url==t&&(e.activity.advancedSetting.bgMusicName=i.name)}))},beforeUpload:function(t){t.type;var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},handleSuccess1:function(t,e){this.activity.advancedSetting.posterUrl="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleRemove1:function(t){this.activity.advancedSetting.posterUrl=""},handleRemovePost:function(){this.activity.advancedSetting.posterUrl=""},handleSuccess2:function(t,e){this.activity.advancedSetting.qrCodeUrl="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleRemove2:function(t){this.activity.advancedSetting.qrCodeUrl=""},handleRemoveQrCode:function(){this.activity.advancedSetting.qrCodeUrl=""}}},te=Kt,ee=(a("82d6"),Object(I["a"])(te,Wt,Gt,!1,null,"e4b756a6",null)),ie=ee.exports,ae=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"third",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"高级功能"}},[i("div",[t._v("（该功能为VIP会员专享）")]),i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.enableAdvancedSetting,callback:function(e){t.$set(t.activity,"enableAdvancedSetting",e)},expression:"activity.enableAdvancedSetting"}})],1),t.activity.enableAdvancedSetting>0?i("div",[i("el-form-item",{attrs:{label:"团长优惠"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.leaderDiscount,callback:function(e){t.$set(t.activity.activitySetting,"leaderDiscount",e)},expression:"activity.activitySetting.leaderDiscount"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("开启后，团长免费和团长优惠选其中一种")])],1),t.activity.activitySetting.leaderDiscount?i("el-form-item",{attrs:{label:"团长免费"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.leaderFree,callback:function(e){t.$set(t.activity.activitySetting,"leaderFree",e)},expression:"activity.activitySetting.leaderFree"}})],1):t._e(),t.activity.activitySetting.leaderDiscount?i("el-form-item",{attrs:{label:"团长可享受优惠",prop:""}},[i("el-input",{attrs:{type:"digit",placeholder:"请输入"},model:{value:t.activity.userSaleSetting.discountFee,callback:function(e){t.$set(t.activity.userSaleSetting,"discountFee",e)},expression:"activity.userSaleSetting.discountFee"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("团长优惠多少元(不填写则为0)")])],1):t._e(),i("el-form-item",{attrs:{label:"活动分销"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.enableUserSale,callback:function(e){t.$set(t.activity,"enableUserSale",e)},expression:"activity.enableUserSale"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("合理设置分销佣金，人人都是推广员(总佣金不能超过付款金额)")])],1),t.activity.enableUserSale?i("el-form-item",{attrs:{label:"一级佣金",prop:""}},[i("el-input",{attrs:{type:"digit",placeholder:"请输入"},model:{value:t.activity.userSaleSetting.levelOne,callback:function(e){t.$set(t.activity.userSaleSetting,"levelOne",e)},expression:"activity.userSaleSetting.levelOne"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("按每单多少元计算")])],1):t._e(),t.activity.enableUserSale?i("el-form-item",{attrs:{label:"二级佣金",prop:""}},[i("el-input",{attrs:{type:"digit",placeholder:"不填写则默认开启一级分销"},model:{value:t.activity.userSaleSetting.levelTwo,callback:function(e){t.$set(t.activity.userSaleSetting,"levelTwo",e)},expression:"activity.userSaleSetting.levelTwo"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("按每单多少元计算")])],1):t._e(),t.activity.enableUserSale?i("el-form-item",{attrs:{label:"用户付款后即返佣金"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.userSaleSetting.isVerification,callback:function(e){t.$set(t.activity.userSaleSetting,"isVerification",e)},expression:"activity.userSaleSetting.isVerification"}})],1):t._e(),i("el-form-item",{attrs:{label:"虚拟拼团人气"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.virtual,callback:function(e){t.$set(t.activity.advancedSetting,"virtual",e)},expression:"activity.advancedSetting.virtual"}})],1),t.activity.advancedSetting.virtual?i("el-form-item",{attrs:{label:"虚拟浏览量",prop:""}},[i("el-input",{attrs:{placeholder:"请输入"},model:{value:t.activity.advancedSetting.virtualViewCount,callback:function(e){t.$set(t.activity.advancedSetting,"virtualViewCount",e)},expression:"activity.advancedSetting.virtualViewCount"}})],1):t._e(),t.activity.advancedSetting.virtual?i("el-form-item",{attrs:{label:"虚拟参与量",prop:""}},[i("el-input",{attrs:{placeholder:"（最大数500）"},model:{value:t.activity.advancedSetting.virtualPersonCount,callback:function(e){t.$set(t.activity.advancedSetting,"virtualPersonCount",e)},expression:"activity.advancedSetting.virtualPersonCount"}})],1):t._e(),i("el-form-item",{attrs:{label:"自动成团"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.supportedAutoGroup,callback:function(e){t.$set(t.activity.advancedSetting,"supportedAutoGroup",e)},expression:"activity.advancedSetting.supportedAutoGroup"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("开启后，系统将在拼团失败前15分钟，帮助未满团成员成团")])],1),i("el-form-item",{attrs:{label:"原价购买"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.supportedOriginalPrice,callback:function(e){t.$set(t.activity.advancedSetting,"supportedOriginalPrice",e)},expression:"activity.advancedSetting.supportedOriginalPrice"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("开启后买家能以原价购买活动商品，无需组团也可以成交")])],1),i("el-form-item",{attrs:{label:"自定义海报"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.customPoster,callback:function(e){t.$set(t.activity.advancedSetting,"customPoster",e)},expression:"activity.advancedSetting.customPoster"}})],1),t.activity.advancedSetting.customPoster?i("el-form-item",{attrs:{label:"海报",prop:""}},[i("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":t.handleSuccess1,"on-remove":t.handleRemove1,"before-upload":t.beforeUpload}},[t.activity.advancedSetting.posterUrl?i("img",{staticClass:"avatar",attrs:{src:t.activity.advancedSetting.posterUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("尺寸650*1034")])]),t.activity.advancedSetting.posterUrl?i("el-button",{staticStyle:{"vertical-align":"top: margin-left: 30px"},attrs:{type:"danger",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.handleRemovePost(e)}}},[t._v("删除")]):t._e()],1):t._e(),i("el-form-item",{attrs:{label:"添加二维码"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.customQrCode,callback:function(e){t.$set(t.activity.advancedSetting,"customQrCode",e)},expression:"activity.advancedSetting.customQrCode"}})],1),t.activity.advancedSetting.customQrCode?i("el-form-item",{attrs:{label:"描述",prop:""}},[i("el-input",{attrs:{placeholder:"如:扫码进群领取资料(不超于30字)"},model:{value:t.activity.advancedSetting.qrCodeDesc,callback:function(e){t.$set(t.activity.advancedSetting,"qrCodeDesc",e)},expression:"activity.advancedSetting.qrCodeDesc"}})],1):t._e(),t.activity.advancedSetting.customQrCode?i("el-form-item",{attrs:{label:"二维码",prop:""}},[i("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":t.handleSuccess2,"on-remove":t.handleRemove2,"before-upload":t.beforeUpload}},[t.activity.advancedSetting.qrCodeUrl?i("img",{staticClass:"avatar1",attrs:{src:t.activity.advancedSetting.qrCodeUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon1"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("尺寸134*134")])]),t.activity.advancedSetting.qrCodeUrl?i("el-button",{staticStyle:{"vertical-align":"top: margin-left: 30px"},attrs:{type:"danger",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.handleRemoveQrCode(e)}}},[t._v("删除")]):t._e()],1):t._e(),i("el-form-item",{attrs:{label:"背景音乐",prop:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择","popper-class":"paginationSelect"},on:{change:t.chooseMusic},model:{value:t.activity.advancedSetting.bgMusicUrl,callback:function(e){t.$set(t.activity.advancedSetting,"bgMusicUrl",e)},expression:"activity.advancedSetting.bgMusicUrl"}},[t._l(t.bgMusicList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.id+"-"+e.firstClass+"-"+e.secondClass+"-"+e.name,value:e.url}},[i("span",{staticClass:"label-item"},[t._v(t._s(e.id))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.firstClass))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.secondClass))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.name))]),i("span",{staticClass:"label-item",staticStyle:{"padding-left":"20px"}},[i("audio",{staticStyle:{display:"inline-block",height:"24px",width:"220px","vertical-align":"middle"},attrs:{preload:"none",controls:"",src:e.url}},[t._v("Your browser does not support the "),i("code",[t._v("audio")]),t._v(" element.")])])])})),i("pagination",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"-1>0"}],attrs:{total:t.bgMusicTotal,page:t.bgMusicListQuery.current,limit:t.bgMusicListQuery.size},on:{"update:page":function(e){return t.$set(t.bgMusicListQuery,"current",e)},"update:limit":function(e){return t.$set(t.bgMusicListQuery,"size",e)},pagination:t.fetchMusicList}})],2)],1),i("el-form-item",{attrs:{label:"推荐到团团站"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.recommendTtz,callback:function(e){t.$set(t.activity.advancedSetting,"recommendTtz",e)},expression:"activity.advancedSetting.recommendTtz"}})],1)],1):t._e()],1)],1)},ne=[],se={name:"AdvancedGroup",components:{Pagination:Ht["a"]},props:{activity:{type:Object,default:function(){return{}}},dataObj:{type:Object,default:function(){return{token:""}}}},data:function(){return{rules:{},bgMusicList:[],bgMusicTotal:0,bgMusicListQuery:{searchStr:"",current:1,size:1e3}}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.fetchMusicList()},fetchMusicList:function(){var t=this;Object(Xt["c"])(this.bgMusicListQuery).then((function(e){"200"===e.code?(t.bgMusicList=e.data.records,t.bgMusicTotal=e.data.total):t.$message({type:"error",message:"出了点问题"})}))},chooseMusic:function(t){var e=this;this.bgMusicList.forEach((function(i,a){i.url==t&&(e.activity.advancedSetting.bgMusicName=i.name)}))},beforeUpload:function(t){t.type;var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},handleSuccess1:function(t,e){this.activity.advancedSetting.posterUrl="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleRemove1:function(t){this.activity.advancedSetting.posterUrl=""},handleRemovePost:function(){this.activity.advancedSetting.posterUrl=""},handleSuccess2:function(t,e){this.activity.advancedSetting.qrCodeUrl="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleRemove2:function(t){this.activity.advancedSetting.qrCodeUrl=""},handleRemoveQrCode:function(){this.activity.advancedSetting.qrCodeUrl=""}}},le=se,ce=(a("18b2"),Object(I["a"])(le,ae,ne,!1,null,"fedd87dc",null)),oe=ce.exports,re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"third",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"高级功能"}},[i("div",[t._v("（该功能为VIP会员专享）")]),i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.enableAdvancedSetting,callback:function(e){t.$set(t.activity,"enableAdvancedSetting",e)},expression:"activity.enableAdvancedSetting"}})],1),t.activity.enableAdvancedSetting>0?i("div",[i("el-form-item",{attrs:{label:"限底价购买"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.buyOnlyBasePrice,callback:function(e){t.$set(t.activity.activitySetting,"buyOnlyBasePrice",e)},expression:"activity.activitySetting.buyOnlyBasePrice"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("开启后顾客必须砍刀底价才能购买；关闭后则不限制价格，都能购买。")])],1),i("el-form-item",{attrs:{label:"活动分销"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.enableUserSale,callback:function(e){t.$set(t.activity,"enableUserSale",e)},expression:"activity.enableUserSale"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("合理设置分销佣金，人人都是推广员(总佣金不能超过付款金额)")])],1),t.activity.enableUserSale?i("el-form-item",{attrs:{label:"一级佣金",prop:""}},[i("el-input",{attrs:{type:"digit",placeholder:"请输入"},model:{value:t.activity.userSaleSetting.levelOne,callback:function(e){t.$set(t.activity.userSaleSetting,"levelOne",e)},expression:"activity.userSaleSetting.levelOne"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("按每单多少元计算")])],1):t._e(),t.activity.enableUserSale?i("el-form-item",{attrs:{label:"二级佣金",prop:""}},[i("el-input",{attrs:{type:"digit",placeholder:"不填写则默认开启一级分销"},model:{value:t.activity.userSaleSetting.levelTwo,callback:function(e){t.$set(t.activity.userSaleSetting,"levelTwo",e)},expression:"activity.userSaleSetting.levelTwo"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("按每单多少元计算")])],1):t._e(),t.activity.enableUserSale?i("el-form-item",{attrs:{label:"用户付款后即返佣金"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.userSaleSetting.isVerification,callback:function(e){t.$set(t.activity.userSaleSetting,"isVerification",e)},expression:"activity.userSaleSetting.isVerification"}})],1):t._e(),i("el-form-item",{attrs:{label:"虚拟砍价人气"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.virtual,callback:function(e){t.$set(t.activity.advancedSetting,"virtual",e)},expression:"activity.advancedSetting.virtual"}})],1),t.activity.advancedSetting.virtual?i("el-form-item",{attrs:{label:"虚拟浏览量",prop:""}},[i("el-input",{attrs:{placeholder:"请输入"},model:{value:t.activity.advancedSetting.virtualViewCount,callback:function(e){t.$set(t.activity.advancedSetting,"virtualViewCount",e)},expression:"activity.advancedSetting.virtualViewCount"}})],1):t._e(),t.activity.advancedSetting.virtual?i("el-form-item",{attrs:{label:"虚拟参与量",prop:""}},[i("el-input",{attrs:{placeholder:"（最大数500）"},model:{value:t.activity.advancedSetting.virtualPersonCount,callback:function(e){t.$set(t.activity.advancedSetting,"virtualPersonCount",e)},expression:"activity.advancedSetting.virtualPersonCount"}})],1):t._e(),i("el-form-item",{attrs:{label:"参与砍价需输入口令"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.registerOnlyAcceptWord,callback:function(e){t.$set(t.activity.advancedSetting,"registerOnlyAcceptWord",e)},expression:"activity.advancedSetting.registerOnlyAcceptWord"}})],1),t.activity.advancedSetting.registerOnlyAcceptWord?i("el-form-item",{attrs:{label:"口令内容",prop:""}},[i("el-input",{attrs:{placeholder:"1-20个字符",maxlength:"10"},model:{value:t.activity.advancedSetting.registerWord,callback:function(e){t.$set(t.activity.advancedSetting,"registerWord",e)},expression:"activity.advancedSetting.registerWord"}})],1):t._e(),t.activity.advancedSetting.registerOnlyAcceptWord?i("el-form-item",{attrs:{label:"获取口令的提示",prop:""}},[i("el-input",{attrs:{placeholder:"提示参与者如何获取口令，比如通过关注某公众号获取(选填）"},model:{value:t.activity.advancedSetting.shibbolethHint,callback:function(e){t.$set(t.activity.advancedSetting,"shibbolethHint",e)},expression:"activity.advancedSetting.shibbolethHint"}})],1):t._e(),i("el-form-item",{attrs:{label:"自定义海报"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.customPoster,callback:function(e){t.$set(t.activity.advancedSetting,"customPoster",e)},expression:"activity.advancedSetting.customPoster"}})],1),t.activity.advancedSetting.customPoster?i("el-form-item",{attrs:{label:"海报",prop:""}},[i("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":t.handleSuccess1,"on-remove":t.handleRemove1,"before-upload":t.beforeUpload}},[t.activity.advancedSetting.posterUrl?i("img",{staticClass:"avatar",attrs:{src:t.activity.advancedSetting.posterUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("尺寸650*1034")])]),t.activity.advancedSetting.posterUrl?i("el-button",{staticStyle:{"vertical-align":"top: margin-left: 30px"},attrs:{type:"danger",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.handleRemovePost(e)}}},[t._v("删除")]):t._e()],1):t._e(),i("el-form-item",{attrs:{label:"添加二维码"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.customQrCode,callback:function(e){t.$set(t.activity.advancedSetting,"customQrCode",e)},expression:"activity.advancedSetting.customQrCode"}})],1),t.activity.advancedSetting.customQrCode?i("el-form-item",{attrs:{label:"描述",prop:""}},[i("el-input",{attrs:{placeholder:"如:扫码进群领取资料(不超于30字)"},model:{value:t.activity.advancedSetting.qrCodeDesc,callback:function(e){t.$set(t.activity.advancedSetting,"qrCodeDesc",e)},expression:"activity.advancedSetting.qrCodeDesc"}})],1):t._e(),t.activity.advancedSetting.customQrCode?i("el-form-item",{attrs:{label:"二维码",prop:""}},[i("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":t.handleSuccess2,"on-remove":t.handleRemove2,"before-upload":t.beforeUpload}},[t.activity.advancedSetting.qrCodeUrl?i("img",{staticClass:"avatar1",attrs:{src:t.activity.advancedSetting.qrCodeUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon1"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("尺寸134*134")])]),t.activity.advancedSetting.qrCodeUrl?i("el-button",{staticStyle:{"vertical-align":"top: margin-left: 30px"},attrs:{type:"danger",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.handleRemoveQrCode(e)}}},[t._v("删除")]):t._e()],1):t._e(),i("el-form-item",{attrs:{label:"背景音乐",prop:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择","popper-class":"paginationSelect"},on:{change:t.chooseMusic},model:{value:t.activity.advancedSetting.bgMusicUrl,callback:function(e){t.$set(t.activity.advancedSetting,"bgMusicUrl",e)},expression:"activity.advancedSetting.bgMusicUrl"}},[t._l(t.bgMusicList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.id+"-"+e.firstClass+"-"+e.secondClass+"-"+e.name,value:e.url}},[i("span",{staticClass:"label-item"},[t._v(t._s(e.id))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.firstClass))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.secondClass))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.name))]),i("span",{staticClass:"label-item",staticStyle:{"padding-left":"20px"}},[i("audio",{staticStyle:{display:"inline-block",height:"24px",width:"220px","vertical-align":"middle"},attrs:{preload:"none",controls:"",src:e.url}},[t._v("Your browser does not support the "),i("code",[t._v("audio")]),t._v(" element.")])])])})),i("pagination",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"-1>0"}],attrs:{total:t.bgMusicTotal,page:t.bgMusicListQuery.current,limit:t.bgMusicListQuery.size},on:{"update:page":function(e){return t.$set(t.bgMusicListQuery,"current",e)},"update:limit":function(e){return t.$set(t.bgMusicListQuery,"size",e)},pagination:t.fetchMusicList}})],2)],1),i("el-form-item",{attrs:{label:"推荐到团团站"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.recommendTtz,callback:function(e){t.$set(t.activity.advancedSetting,"recommendTtz",e)},expression:"activity.advancedSetting.recommendTtz"}})],1)],1):t._e()],1)],1)},ue=[],de={name:"AdvancedGroup",components:{Pagination:Ht["a"]},props:{activity:{type:Object,default:function(){return{}}},dataObj:{type:Object,default:function(){return{token:""}}}},data:function(){return{rules:{},bgMusicList:[],bgMusicTotal:0,bgMusicListQuery:{searchStr:"",current:1,size:1e3}}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.fetchMusicList()},fetchMusicList:function(){var t=this;Object(Xt["c"])(this.bgMusicListQuery).then((function(e){"200"===e.code?(t.bgMusicList=e.data.records,t.bgMusicTotal=e.data.total):t.$message({type:"error",message:"出了点问题"})}))},chooseMusic:function(t){var e=this;this.bgMusicList.forEach((function(i,a){i.url==t&&(e.activity.advancedSetting.bgMusicName=i.name)}))},beforeUpload:function(t){t.type;var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},handleSuccess1:function(t,e){this.activity.advancedSetting.posterUrl="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleRemove1:function(t){this.activity.advancedSetting.posterUrl=""},handleRemovePost:function(){this.activity.advancedSetting.posterUrl=""},handleSuccess2:function(t,e){this.activity.advancedSetting.qrCodeUrl="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleRemove2:function(t){this.activity.advancedSetting.qrCodeUrl=""},handleRemoveQrCode:function(){this.activity.advancedSetting.qrCodeUrl=""}}},me=de,ve=(a("aed0"),Object(I["a"])(me,re,ue,!1,null,"d12433be",null)),pe=ve.exports,ge=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"third",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"高级功能"}},[i("div",[t._v("（该功能为VIP会员专享）")]),i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.enableAdvancedSetting,callback:function(e){t.$set(t.activity,"enableAdvancedSetting",e)},expression:"activity.enableAdvancedSetting"}})],1),t.activity.enableAdvancedSetting>0?i("div",[i("el-form-item",{attrs:{label:"超级优惠券"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.needShare,callback:function(e){t.$set(t.activity.activitySetting,"needShare",e)},expression:"activity.activitySetting.needShare"}})],1),t.activity.activitySetting.needShare?i("el-form-item",{attrs:{label:"邀请好友数",prop:""}},[i("el-input",{attrs:{type:"number",placeholder:"领取超级优惠券需邀请好友数(最多9人)"},model:{value:t.activity.activitySetting.shareNum,callback:function(e){t.$set(t.activity.activitySetting,"shareNum",e)},expression:"activity.activitySetting.shareNum"}})],1):t._e(),i("el-form-item",{attrs:{label:"新客专享"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.exclusive,callback:function(e){t.$set(t.activity.activitySetting,"exclusive",e)},expression:"activity.activitySetting.exclusive"}}),i("div",{staticStyle:{color:"#999","font-size":"12px"}},[t._v("打开后，该优惠券只允许从未下过单的顾客领取")])],1),i("el-form-item",{attrs:{label:"领券必填"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.activitySetting.necessary,callback:function(e){t.$set(t.activity.activitySetting,"necessary",e)},expression:"activity.activitySetting.necessary"}}),i("div",{staticStyle:{color:"#999","font-size":"12px"}},[t._v("打开后，领取需获取顾客手机号码")])],1)],1):t._e()],1)],1)},ye=[],fe={name:"AdvancedDiscount",components:{},props:{activity:{type:Object,default:function(){return{}}}},data:function(){return{rules:{}}},created:function(){this.init()},mounted:function(){},methods:{init:function(){}}},he=fe,be=Object(I["a"])(he,ge,ye,!1,null,null,null),Se=be.exports,xe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"third",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"高级功能"}},[i("div",[t._v("（该功能为VIP会员专享）")]),i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.enableAdvancedSetting,callback:function(e){t.$set(t.activity,"enableAdvancedSetting",e)},expression:"activity.enableAdvancedSetting"}})],1),t.activity.enableAdvancedSetting>0?i("div",[i("el-form-item",{attrs:{label:"虚拟投票人气"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.virtual,callback:function(e){t.$set(t.activity.advancedSetting,"virtual",e)},expression:"activity.advancedSetting.virtual"}})],1),t.activity.advancedSetting.virtual?i("el-form-item",{attrs:{label:"虚拟浏览量",prop:""}},[i("el-input",{attrs:{placeholder:"请输入"},model:{value:t.activity.advancedSetting.virtualViewCount,callback:function(e){t.$set(t.activity.advancedSetting,"virtualViewCount",e)},expression:"activity.advancedSetting.virtualViewCount"}})],1):t._e(),t.activity.advancedSetting.virtual?i("el-form-item",{attrs:{label:"虚拟参与量",prop:""}},[i("el-input",{attrs:{placeholder:"（最大数500）"},model:{value:t.activity.advancedSetting.virtualPersonCount,callback:function(e){t.$set(t.activity.advancedSetting,"virtualPersonCount",e)},expression:"activity.advancedSetting.virtualPersonCount"}})],1):t._e(),i("el-form-item",{attrs:{label:"参与投票需输入口令"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.registerOnlyAcceptWord,callback:function(e){t.$set(t.activity.advancedSetting,"registerOnlyAcceptWord",e)},expression:"activity.advancedSetting.registerOnlyAcceptWord"}})],1),t.activity.advancedSetting.registerOnlyAcceptWord?i("el-form-item",{attrs:{label:"口令内容",prop:""}},[i("el-input",{attrs:{placeholder:"1-20个字符",maxlength:"10"},model:{value:t.activity.advancedSetting.registerWord,callback:function(e){t.$set(t.activity.advancedSetting,"registerWord",e)},expression:"activity.advancedSetting.registerWord"}})],1):t._e(),t.activity.advancedSetting.registerOnlyAcceptWord?i("el-form-item",{attrs:{label:"获取口令的提示",prop:""}},[i("el-input",{attrs:{placeholder:"提示参与者如何获取口令，比如通过关注某公众号获取(选填）"},model:{value:t.activity.advancedSetting.shibbolethHint,callback:function(e){t.$set(t.activity.advancedSetting,"shibbolethHint",e)},expression:"activity.advancedSetting.shibbolethHint"}})],1):t._e(),i("el-form-item",{attrs:{label:"自定义海报"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.customPoster,callback:function(e){t.$set(t.activity.advancedSetting,"customPoster",e)},expression:"activity.advancedSetting.customPoster"}})],1),t.activity.advancedSetting.customPoster?i("el-form-item",{attrs:{label:"海报",prop:""}},[i("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":t.handleSuccess1,"on-remove":t.handleRemove1,"before-upload":t.beforeUpload}},[t.activity.advancedSetting.posterUrl?i("img",{staticClass:"avatar",attrs:{src:t.activity.advancedSetting.posterUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("尺寸650*1034")])]),t.activity.advancedSetting.posterUrl?i("el-button",{staticStyle:{"vertical-align":"top: margin-left: 30px"},attrs:{type:"danger",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.handleRemovePost(e)}}},[t._v("删除")]):t._e()],1):t._e(),i("el-form-item",{attrs:{label:"添加二维码"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.customQrCode,callback:function(e){t.$set(t.activity.advancedSetting,"customQrCode",e)},expression:"activity.advancedSetting.customQrCode"}})],1),t.activity.advancedSetting.customQrCode?i("el-form-item",{attrs:{label:"描述",prop:""}},[i("el-input",{attrs:{placeholder:"如:扫码进群领取资料(不超于30字)"},model:{value:t.activity.advancedSetting.qrCodeDesc,callback:function(e){t.$set(t.activity.advancedSetting,"qrCodeDesc",e)},expression:"activity.advancedSetting.qrCodeDesc"}})],1):t._e(),t.activity.advancedSetting.customQrCode?i("el-form-item",{attrs:{label:"二维码",prop:""}},[i("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":t.handleSuccess2,"on-remove":t.handleRemove2,"before-upload":t.beforeUpload}},[t.activity.advancedSetting.qrCodeUrl?i("img",{staticClass:"avatar1",attrs:{src:t.activity.advancedSetting.qrCodeUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon1"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("尺寸134*134")])]),t.activity.advancedSetting.qrCodeUrl?i("el-button",{staticStyle:{"vertical-align":"top: margin-left: 30px"},attrs:{type:"danger",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.handleRemoveQrCode(e)}}},[t._v("删除")]):t._e()],1):t._e(),i("el-form-item",{attrs:{label:"背景音乐",prop:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择","popper-class":"paginationSelect"},on:{change:t.chooseMusic},model:{value:t.activity.advancedSetting.bgMusicUrl,callback:function(e){t.$set(t.activity.advancedSetting,"bgMusicUrl",e)},expression:"activity.advancedSetting.bgMusicUrl"}},[t._l(t.bgMusicList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.id+"-"+e.firstClass+"-"+e.secondClass+"-"+e.name,value:e.url}},[i("span",{staticClass:"label-item"},[t._v(t._s(e.id))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.firstClass))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.secondClass))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.name))]),i("span",{staticClass:"label-item",staticStyle:{"padding-left":"20px"}},[i("audio",{staticStyle:{display:"inline-block",height:"24px",width:"220px","vertical-align":"middle"},attrs:{preload:"none",controls:"",src:e.url}},[t._v("Your browser does not support the "),i("code",[t._v("audio")]),t._v(" element.")])])])})),i("pagination",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"-1>0"}],attrs:{total:t.bgMusicTotal,page:t.bgMusicListQuery.current,limit:t.bgMusicListQuery.size},on:{"update:page":function(e){return t.$set(t.bgMusicListQuery,"current",e)},"update:limit":function(e){return t.$set(t.bgMusicListQuery,"size",e)},pagination:t.fetchMusicList}})],2)],1),i("el-form-item",{attrs:{label:"推荐到团团站"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.recommendTtz,callback:function(e){t.$set(t.activity.advancedSetting,"recommendTtz",e)},expression:"activity.advancedSetting.recommendTtz"}})],1)],1):t._e()],1)],1)},Ce=[],Ae={name:"AdvancedVote",components:{Pagination:Ht["a"]},props:{activity:{type:Object,default:function(){return{}}},dataObj:{type:Object,default:function(){return{token:""}}}},data:function(){return{rules:{},bgMusicList:[],bgMusicTotal:0,bgMusicListQuery:{searchStr:"",current:1,size:1e3}}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.fetchMusicList()},fetchMusicList:function(){var t=this;Object(Xt["c"])(this.bgMusicListQuery).then((function(e){"200"===e.code?(t.bgMusicList=e.data.records,t.bgMusicTotal=e.data.total):t.$message({type:"error",message:"出了点问题"})}))},chooseMusic:function(t){var e=this;this.bgMusicList.forEach((function(i,a){i.url==t&&(e.activity.advancedSetting.bgMusicName=i.name)}))},beforeUpload:function(t){t.type;var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},handleSuccess1:function(t,e){this.activity.advancedSetting.posterUrl="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleRemove1:function(t){this.activity.advancedSetting.posterUrl=""},handleRemovePost:function(){this.activity.advancedSetting.posterUrl=""},handleSuccess2:function(t,e){this.activity.advancedSetting.qrCodeUrl="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleRemove2:function(t){this.activity.advancedSetting.qrCodeUrl=""},handleRemoveQrCode:function(){this.activity.advancedSetting.qrCodeUrl=""}}},Ie=Ae,ke=(a("3bb9"),Object(I["a"])(Ie,xe,Ce,!1,null,"457dabaf",null)),_e=ke.exports,we=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form",{ref:"third",attrs:{rules:t.rules,model:t.activity,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"高级功能"}},[i("div",[t._v("（该功能为VIP会员专享）")]),i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.enableAdvancedSetting,callback:function(e){t.$set(t.activity,"enableAdvancedSetting",e)},expression:"activity.enableAdvancedSetting"}})],1),t.activity.enableAdvancedSetting>0?i("div",[i("el-form-item",{attrs:{label:"活动分销"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.enableUserSale,callback:function(e){t.$set(t.activity,"enableUserSale",e)},expression:"activity.enableUserSale"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("合理设置分销佣金，人人都是推广员(总佣金不能超过付款金额)")])],1),t.activity.enableUserSale?i("el-form-item",{attrs:{label:"一级佣金",prop:""}},[i("el-input",{attrs:{type:"digit",placeholder:"请输入"},model:{value:t.activity.userSaleSetting.levelOne,callback:function(e){t.$set(t.activity.userSaleSetting,"levelOne",e)},expression:"activity.userSaleSetting.levelOne"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("按每单多少元计算")])],1):t._e(),t.activity.enableUserSale?i("el-form-item",{attrs:{label:"二级佣金",prop:""}},[i("el-input",{attrs:{type:"digit",placeholder:"不填写则默认开启一级分销"},model:{value:t.activity.userSaleSetting.levelTwo,callback:function(e){t.$set(t.activity.userSaleSetting,"levelTwo",e)},expression:"activity.userSaleSetting.levelTwo"}}),i("div",{staticStyle:{"font-size":"12px",color:"#999"}},[t._v("按每单多少元计算")])],1):t._e(),t.activity.enableUserSale?i("el-form-item",{attrs:{label:"用户付款后即返佣金"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":1,"inactive-value":0},model:{value:t.activity.userSaleSetting.isVerification,callback:function(e){t.$set(t.activity.userSaleSetting,"isVerification",e)},expression:"activity.userSaleSetting.isVerification"}})],1):t._e(),i("el-form-item",{attrs:{label:"虚拟报名人气"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.virtual,callback:function(e){t.$set(t.activity.advancedSetting,"virtual",e)},expression:"activity.advancedSetting.virtual"}})],1),t.activity.advancedSetting.virtual?i("el-form-item",{attrs:{label:"虚拟浏览量",prop:""}},[i("el-input",{attrs:{placeholder:"请输入"},model:{value:t.activity.advancedSetting.virtualViewCount,callback:function(e){t.$set(t.activity.advancedSetting,"virtualViewCount",e)},expression:"activity.advancedSetting.virtualViewCount"}})],1):t._e(),t.activity.advancedSetting.virtual?i("el-form-item",{attrs:{label:"虚拟参与量",prop:""}},[i("el-input",{attrs:{placeholder:"（最大数500）"},model:{value:t.activity.advancedSetting.virtualPersonCount,callback:function(e){t.$set(t.activity.advancedSetting,"virtualPersonCount",e)},expression:"activity.advancedSetting.virtualPersonCount"}})],1):t._e(),i("el-form-item",{attrs:{label:"自定义海报"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.customPoster,callback:function(e){t.$set(t.activity.advancedSetting,"customPoster",e)},expression:"activity.advancedSetting.customPoster"}})],1),t.activity.advancedSetting.customPoster?i("el-form-item",{attrs:{label:"海报",prop:""}},[i("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":t.handleSuccess1,"on-remove":t.handleRemove1,"before-upload":t.beforeUpload}},[t.activity.advancedSetting.posterUrl?i("img",{staticClass:"avatar",attrs:{src:t.activity.advancedSetting.posterUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("尺寸650*1034")])]),t.activity.advancedSetting.posterUrl?i("el-button",{staticStyle:{"vertical-align":"top: margin-left: 30px"},attrs:{type:"danger",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.handleRemovePost(e)}}},[t._v("删除")]):t._e()],1):t._e(),i("el-form-item",{attrs:{label:"添加二维码"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.customQrCode,callback:function(e){t.$set(t.activity.advancedSetting,"customQrCode",e)},expression:"activity.advancedSetting.customQrCode"}})],1),t.activity.advancedSetting.customQrCode?i("el-form-item",{attrs:{label:"描述",prop:""}},[i("el-input",{attrs:{placeholder:"如:扫码进群领取资料(不超于30字)"},model:{value:t.activity.advancedSetting.qrCodeDesc,callback:function(e){t.$set(t.activity.advancedSetting,"qrCodeDesc",e)},expression:"activity.advancedSetting.qrCodeDesc"}})],1):t._e(),t.activity.advancedSetting.customQrCode?i("el-form-item",{attrs:{label:"二维码",prop:""}},[i("el-upload",{staticClass:"avatar-uploader",staticStyle:{display:"inline-block","vertical-align":"top"},attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":t.handleSuccess2,"on-remove":t.handleRemove2,"before-upload":t.beforeUpload}},[t.activity.advancedSetting.qrCodeUrl?i("img",{staticClass:"avatar1",attrs:{src:t.activity.advancedSetting.qrCodeUrl}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon1"}),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("尺寸134*134")])]),t.activity.advancedSetting.qrCodeUrl?i("el-button",{staticStyle:{"vertical-align":"top: margin-left: 30px"},attrs:{type:"danger",plain:"",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return e.preventDefault(),t.handleRemoveQrCode(e)}}},[t._v("删除")]):t._e()],1):t._e(),i("el-form-item",{attrs:{label:"背景音乐",prop:""}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择","popper-class":"paginationSelect"},on:{change:t.chooseMusic},model:{value:t.activity.advancedSetting.bgMusicUrl,callback:function(e){t.$set(t.activity.advancedSetting,"bgMusicUrl",e)},expression:"activity.advancedSetting.bgMusicUrl"}},[t._l(t.bgMusicList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.id+"-"+e.firstClass+"-"+e.secondClass+"-"+e.name,value:e.url}},[i("span",{staticClass:"label-item"},[t._v(t._s(e.id))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.firstClass))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.secondClass))]),t._v("- "),i("span",{staticClass:"label-item"},[t._v(t._s(e.name))]),i("span",{staticClass:"label-item",staticStyle:{"padding-left":"20px"}},[i("audio",{staticStyle:{display:"inline-block",height:"24px",width:"220px","vertical-align":"middle"},attrs:{preload:"none",controls:"",src:e.url}},[t._v("Your browser does not support the "),i("code",[t._v("audio")]),t._v(" element.")])])])})),i("pagination",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"-1>0"}],attrs:{total:t.bgMusicTotal,page:t.bgMusicListQuery.current,limit:t.bgMusicListQuery.size},on:{"update:page":function(e){return t.$set(t.bgMusicListQuery,"current",e)},"update:limit":function(e){return t.$set(t.bgMusicListQuery,"size",e)},pagination:t.fetchMusicList}})],2)],1),i("el-form-item",{attrs:{label:"推荐到团团站"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.activity.advancedSetting.recommendTtz,callback:function(e){t.$set(t.activity.advancedSetting,"recommendTtz",e)},expression:"activity.advancedSetting.recommendTtz"}})],1)],1):t._e()],1)],1)},ze=[],Oe={name:"AdvancedApply",components:{Pagination:Ht["a"]},props:{activity:{type:Object,default:function(){return{}}},dataObj:{type:Object,default:function(){return{token:""}}}},data:function(){return{rules:{},bgMusicList:[],bgMusicTotal:0,bgMusicListQuery:{searchStr:"",current:1,size:1e3}}},created:function(){this.init()},mounted:function(){},methods:{init:function(){this.fetchMusicList()},fetchMusicList:function(){var t=this;Object(Xt["c"])(this.bgMusicListQuery).then((function(e){"200"===e.code?(t.bgMusicList=e.data.records,t.bgMusicTotal=e.data.total):t.$message({type:"error",message:"出了点问题"})}))},chooseMusic:function(t){var e=this;this.bgMusicList.forEach((function(i,a){i.url==t&&(e.activity.advancedSetting.bgMusicName=i.name)}))},beforeUpload:function(t){t.type;var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},handleSuccess1:function(t,e){this.activity.advancedSetting.posterUrl="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleRemove1:function(t){this.activity.advancedSetting.posterUrl=""},handleRemovePost:function(){this.activity.advancedSetting.posterUrl=""},handleSuccess2:function(t,e){this.activity.advancedSetting.qrCodeUrl="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleRemove2:function(t){this.activity.advancedSetting.qrCodeUrl=""},handleRemoveQrCode:function(){this.activity.advancedSetting.qrCodeUrl=""}}},Ye=Oe,Ze=(a("f1fe"),Object(I["a"])(Ye,we,ze,!1,null,"08d54974",null)),Te=Ze.exports,$e={name:"ActivityEditor",components:{BaseApplySetting:M,BaseGroupSetting:R,BaseCutSetting:J,BaseVoteSetting:tt,BaseDiscountSetting:lt,BaseSeckillSetting:mt,TypeApplySetting:ht,TypeGroupSetting:It,TypeCutSetting:Yt,TypeVoteSetting:Mt,TypeDiscountSetting:Rt,TypeSeckillSetting:Jt,AdvancedApplySetting:ie,AdvancedGroupSetting:oe,AdvancedCutSetting:pe,AdvancedVoteSetting:_e,AdvancedDiscountSetting:Se,AdvancedSeckillSetting:Te},props:{isEdit:{type:Boolean,default:!1}},created:function(){var t=this.$route.params&&1*this.$route.params.type,e=this.$route.params&&this.$route.params.mid;if(this.type=t,this.merchantId=e,this.activity.type=t,this.activity.activitySetting=JSON.parse(JSON.stringify(this.activitySetting[t])),this.activity.advancedSetting=JSON.parse(JSON.stringify(this.advancedSetting[t])),this.activity.activityRule=JSON.parse(JSON.stringify(this.activityRule[t])),this.activity.merchantId=e,this.getMerchant(e),this.fetchToken(),this.isEdit){var i=this.$route.params&&this.$route.params.id;this.id=i,this.fetchData(i)}},data:function(){return{id:"",type:0,merchantId:"",activity:{id:0,cover:[],title:"",startTime:"",endTime:"",enableActivityTime:0,activityStartTime:"",activityEndTime:"",merchantId:0,type:0,address:{province:"",city:"",distinct:"",detail:"",tips:""},content:[{type:"text",value:""}],activityRule:"<p>1.点击立即报名提交相关信息后即可参与;</p><br/><p>2.本次活动以先到先得原则，先成功完成报名获得电子券的才有资格获得商品;</p><br/><p>3.报名完成后凭电子券与客服核销;</p><br/><p>4.活动最终解释权归发布者所有，与团团站平台无关。</p>",storeIds:"",requireColumns:[],activitySetting:{advancePay:"",buttonText:"",fullPay:!0,individualLimit:"",leaveMsg:!0,listShowType:1,needCheck:!1,registerCost:"0",registerNum:""},advancedSetting:{bgMusicName:"",bgMusicUrl:"",distributionCommission:"",recommendTtz:!0,registerOnlyAcceptWord:!1,registerWord:"",showCommission:!1,supportedActivityDistribution:!1,virtualPersonCount:""},enableUserSale:0,userSaleSetting:{isVerification:0,levelOne:"",levelTwo:"",showFee:0},enableAdvancedSetting:0},dataObj:{token:""},activityRule:{0:"",1:"<p>1.点击立即报名提交相关信息后即可参与;</p><br/><p>2.本次活动以先到先得原则，先成功完成报名获得电子券的才有资格获得商品;</p><br/><p>3.报名完成后凭电子券与客服核销;</p><br/><p>4.活动最终解释权归发布者所有，与团团站平台无关。</p>",4:"<p>1.点击我要砍价，报名成功后并邀请好友帮砍，砍至底价（心理预期价位）后可直接付款购买;</p><br/><p>2.本次活动以先到先得原则，先完成砍价获得电子券的才有资格获得商品;</p><br/><p>3.砍价完成后凭电子券与商家兑换商品; 若为预付款商品，则需付完剩余款项方可兑换商品;</p><br/><p>4.本次活动不可赠送或转让，以砍价活动信息为准;</p><br/><p>5.活动最终解释权归发布者所有，与团团站平台无关。</p>",5:"<p>1.点击立即报名提交相关信息后即可参与;</p><br/><p>2.本次活动以先到先得原则，先成功完成报名获得电子券的才有资格获得商品;</p><br/><p>3.报名完成后凭电子券与客服核销;</p><br/><p>4.活动最终解释权归发布者所有，与团团站平台无关。</p>",6:"<p>1. 开团成为团长，并邀请好友参团，在拼团有效时间内凑齐成团人数，即可拼团成功；也可直接参与其它团长的团;</p><br/><p>2. 拼团有效时间内未凑齐成团人数，即拼团失败。系统自动取消订单并全额退款，支付金额将会原路退回付款账户；</p><br/><p>3. 拼团有效时间为24小时，即拼团允许邀请好友参团的时间，可在拼团详情页查看倒计时；</p><br/><p>4.拼团成功后，可在【电子券】中，查看自己的拼团订单;</p><br/><p>5.活动最终解释权归发布者所有，与团团站平台无关。</p>",7:"<p>1.每个用户每天只能给同一个候选对象投1票;</p><br/><p>2.参赛选手在活动结束前每天都可以邀请好友给你投票;</p><br/><p>3.严禁刷票，一经发现将取消其参赛资格;</p><br/><p>4.活动最终解释权归发布者所有，与团团站平台无关。</p>",10:"",11:"",12:"",13:"","-1":""},activitySetting:{0:{},1:{advancePay:"",buttonText:"",fullPay:!0,individualLimit:"",leaveMsg:!0,listShowType:1,needCheck:!1,registerCost:"0",registerNum:""},4:{productNum:0,originPrice:"",basePrice:"",advancePay:"",totalTimes:"",quotaPrePerson:"",timeLimit:"",buttonText:"",fullPay:!0,leaveMsg:!1,listShowType:0,showPhone:!1},5:{advancePay:"",basePrice:"",buttonText:"",fullPay:!0,individualLimit:"",leaveMsg:!0,listShowType:1,originPrice:"",originStock:"",repertory:""},6:{advancePay:"",agglomerationTime:"",buttonText:"",fullPay:!0,groups:[{personNum:"",price:"",commodityAmount:""}],leaderDiscount:!1,leaderFree:!1,discountFee:"0",leaveMsg:!1,listShowType:0,originPrice:""},7:{buttonText:"立即参加",totalVoteNumLimit:0,voteNumForDayLimit:0,supportRepeatVote:!1,voterPhoneNum:!1,supportOnlineApply:!1,needCheck:!1,defaultVote:"",groupNames:""},10:{consumeThreshold:"",couponFrom:"",couponNum:"",couponPrice:"",couponType:"",discount:"",exclusive:!1,experiencePrice:"",necessary:!1,originalPrice:"",reduceAmount:"",title:"",needShare:!1,shareNum:""},11:{consumeThreshold:"",couponFrom:"",couponNum:"",couponPrice:"",couponType:"",discount:"",exclusive:!1,experiencePrice:"",necessary:!1,originalPrice:"",reduceAmount:"",title:"",needShare:!1,shareNum:""},12:{consumeThreshold:"",couponFrom:"",couponNum:"",couponPrice:"",couponType:"",discount:"",exclusive:!1,experiencePrice:"",necessary:!1,originalPrice:"",reduceAmount:"",title:"",needShare:!1,shareNum:""},13:{consumeThreshold:"",couponFrom:"",couponNum:"",couponPrice:"",couponType:"",discount:"",exclusive:!1,experiencePrice:"",necessary:!1,originalPrice:"",reduceAmount:"",title:"",needShare:!1,shareNum:""},"-1":null},advancedSetting:{0:{},1:{bgMusicName:"",bgMusicUrl:"",customPoster:!1,posterUrl:"",customQrCode:!1,qrCodeDesc:"",qrCodeUrl:"",distributionCommission:"",recommendTtz:!0,registerOnlyAcceptWord:!1,registerWord:"",showCommission:!1,supportedActivityDistribution:!1,virtual:!1,virtualViewCount:"",virtualPersonCount:""},4:{buyOnlyBasePrice:!1,bgMusicName:"",bgMusicUrl:"",customPoster:!1,posterUrl:"",customQrCode:!1,qrCodeDesc:"",qrCodeUrl:"",cutBySelf:!1,needPassword:!1,password:"",registerOnlyAcceptWord:"",recommendTtz:!0,virtual:!1,virtualViewCount:"",virtualPersonCount:""},5:{bgMusicName:"",bgMusicUrl:"",customPoster:!1,posterUrl:"",customQrCode:!1,qrCodeDesc:"",qrCodeUrl:"",recommendTtz:!0,virtual:!1,virtualViewCount:"",virtualPersonCount:""},6:{bgMusicName:"",bgMusicUrl:"",customPoster:!1,posterUrl:"",customQrCode:!1,qrCodeDesc:"",qrCodeUrl:"",distributionCommission:"",distributionNum:"",recommendTtz:!0,showCommission:!1,supportedActivityDistribution:!1,supportedAutoGroup:!1,supportedOriginalPrice:!1,virtual:!1,virtualViewCount:"",virtualPersonCount:"",registerOnlyAcceptWord:!1,registerWord:"",shibbolethHint:""},7:{bgMusicName:"",bgMusicUrl:"",customPoster:!1,posterUrl:"",customQrCode:!1,qrCodeDesc:"",qrCodeUrl:"",recommendTtz:!0,virtual:!1,virtualViewCount:"",virtualPersonCount:"",registerOnlyAcceptWord:!1,registerWord:"",shibbolethHint:""},10:null,11:null,12:null,13:null,"-1":null},merchant:{id:"",name:""},pageLoading:!1,isFullScreen:!1,activeTabName:"first",activityTypes:{1:"报名",2:"抽奖",3:"海报",4:"砍价",5:"秒杀",6:"拼团",7:"投票",8:"预约",9:"助力",10:"代金券",11:"折扣券",12:"兑换券",13:"体验券","-1":"团购"},discountTypes:[10,11,12,13],disabledPublishButton:!1}},methods:{fetchData:function(t){var e=this;this.pageLoading=!0,Object(l["j"])(t).then((function(t){t.data?(t.data.cover=JSON.parse(t.data.cover),t.data.activitySetting=JSON.parse(t.data.activitySetting),t.data.activitySetting.defaultVote&&"string"===t.data.activitySetting.defaultVote&&(t.data.activitySetting.defaultVote=JSON.parse(t.data.activitySetting.defaultVote)),t.data.address=JSON.parse(t.data.address),t.data.content=JSON.parse(t.data.content),t.data.content.forEach((function(e,i){var a=Z()(),n=Object.assign({},e,{id:a});t.data.content[i]=n})),t.data.requireColumns=JSON.parse(t.data.requireColumns),t.data.storeIds=JSON.parse(t.data.storeIds),t.data.advancedSetting=JSON.parse(t.data.advancedSetting),t.data.userSaleSetting=JSON.parse(t.data.userSaleSetting),e.activity=t.data):e.$message({type:"error",message:"出了点问题"}),e.pageLoading=!1}))},getMerchant:function(t){var e=this;Object(c["d"])(t).then((function(t){t.data?e.merchant=t.data:e.$message({type:"error",message:"出了点问题"})}))},fetchToken:function(){var t=this;Object(o["a"])().then((function(e){var i=e.data;t._data.dataObj.token=i}))},init:function(){var t=this;this.coverFileList=[],this.activity.cover.forEach((function(e,i){console.log("init cover...");var a={name:"",uid:i,url:e,status:"success"};t.coverFileList.push(a)})),this.smallImgFileList=[],this.activity.content.forEach((function(e,i){if("smallImg"===e.type){var a=[];e.value.forEach((function(t,e){var i={name:"",uid:e,url:t,status:"success"};a.push(i)})),t.smallImgFileList.push(a)}else t.smallImgFileList.push([])}))},publish:function(){var t=this;this.disabledPublishButton=!0;var e={};e=JSON.parse(JSON.stringify(this.activity)),e.cover=JSON.stringify(e.cover),e.activitySetting.groups&&(e.activitySetting.groups=this.adJustObjectArray(e.activitySetting.groups)),e.activitySetting.defaultVote&&(e.activitySetting.defaultVote=this.adJustObjectArray(e.activitySetting.defaultVote)),e.activitySetting=JSON.stringify(e.activitySetting),e.address=JSON.stringify(e.address),e.content.forEach((function(t,i){var a={type:t.type,value:t.value};e.content[i]=a})),e.content=JSON.stringify(e.content),e.requireColumns=JSON.stringify(e.requireColumns),e.storeIds=JSON.stringify(e.storeIds),e.advancedSetting=JSON.stringify(e.advancedSetting),e.userSaleSetting=JSON.stringify(e.userSaleSetting),console.log(e);var i=this;this.isEdit?(console.log("edit..."),Object(l["u"])(e).then((function(e){e.data?t.$message({type:"success",message:"修改成功",onClose:function(){i.activity.type<10?i.$router.push({path:"/activity/list"}):i.$router.push({path:"/activity/discount"})}}):t.$message({type:"error",message:res.msg})})).catch((function(){})).then((function(){i.disabledPublishButton=!1}))):(console.log("create..."),Object(l["c"])(e).then((function(e){e.data?t.$message({type:"success",message:"创建成功！",onClose:function(){i.activity.type<10?i.$router.push({path:"/activity/list"}):i.$router.push({path:"/activity/discount"})}}):t.$message({type:"error",message:res.msg})})).catch((function(){})).then((function(){i.disabledPublishButton=!1})))},goList:function(){this.$router.push({path:"/activity/list"})},adJustObjectArray:function(t){var e=[];return t.forEach((function(t,i){for(var a in e[i]=0,t)(t[a]+"").trim()?e[i]=e[i]+1:e[i]=e[i]+0})),e.forEach((function(e,i){e<1&&t.splice(i,1)})),t},adJustArray:function(t){var e=[];return t.forEach((function(t,i){e[i]=0,t.trim()?e[i]=e[i]+1:e[i]=e[i]+0})),e.forEach((function(e,i){e<1&&t.splice(i,1)})),t}}},je=$e,Ue=(a("9ab0"),a("2e71"),Object(I["a"])(je,n,s,!1,null,"0db88e92",null));e["a"]=Ue.exports},a139:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("activity-editor",{attrs:{"is-edit":!0}})},n=[],s=i("9cd2"),l={name:"HdEdit",components:{ActivityEditor:s["a"]}},c=l,o=i("2877"),r=Object(o["a"])(c,a,n,!1,null,null,null);e["default"]=r.exports},a5ba:function(t,e,i){},aed0:function(t,e,i){"use strict";i("1628")},af8e:function(t,e,i){},c5f3:function(t,e,i){},ca41:function(t,e,i){"use strict";i.d(e,"q",(function(){return n})),i.d(e,"i",(function(){return s})),i.d(e,"a",(function(){return l})),i.d(e,"h",(function(){return c})),i.d(e,"f",(function(){return o})),i.d(e,"v",(function(){return r})),i.d(e,"l",(function(){return u})),i.d(e,"j",(function(){return d})),i.d(e,"n",(function(){return m})),i.d(e,"s",(function(){return v})),i.d(e,"t",(function(){return p})),i.d(e,"k",(function(){return g})),i.d(e,"p",(function(){return y})),i.d(e,"c",(function(){return f})),i.d(e,"u",(function(){return h})),i.d(e,"d",(function(){return b})),i.d(e,"o",(function(){return S})),i.d(e,"g",(function(){return x})),i.d(e,"b",(function(){return C})),i.d(e,"e",(function(){return A})),i.d(e,"m",(function(){return I})),i.d(e,"r",(function(){return k})),i.d(e,"w",(function(){return _})),i.d(e,"x",(function(){return w}));i("e9c4"),i("b64b");var a=i("b775");function n(t,e){return Object(a["a"])({url:"/system/management/activity/getSpecialActivity?size="+t.size+"&current="+t.current,method:"post",data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var i in t)""===t[i]&&delete t[i];return t=JSON.stringify(t),t}]})}function s(t,e){return Object(a["a"])({url:"/system/activity/getActivityScheme?size="+t.size+"&current="+t.current,method:"post",data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var i in t)""===t[i]&&delete t[i];return t=JSON.stringify(t),t}]})}function l(t){return Object(a["a"])({url:"/system/activity/addActivityScheme",method:"post",data:t,transformRequest:[function(t){console.log(t);var e=Object.keys(t).length,i=0,a="";for(var n in t)a+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]),i<e-1&&(a+="&",i++);return a}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function c(t){return Object(a["a"])({url:"/system/activity/getActivitySchemeInfo",method:"get",params:{schemeId:t}})}function o(t){return Object(a["a"])({url:"/system/activity/deleteScheme",method:"delete",params:{schemeId:t}})}function r(t){return Object(a["a"])({url:"/system/activity/updateActivityScheme",method:"post",data:t,transformRequest:[function(t){console.log(t);var e=Object.keys(t).length,i=0,a="";for(var n in t)a+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]),i<e-1&&(a+="&",i++);return a}],headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function u(t,e){return Object(a["a"])({url:"/system/activity/getActivitys",method:"post",params:t,data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var i in t)""===t[i]&&delete t[i];return t=JSON.stringify(t),t}]})}function d(t){return Object(a["a"])({url:"/system/activity/getActivityInfo",method:"post",params:{id:t}})}function m(t,e){return Object(a["a"])({url:"/system/activity/getCouponActivityList",method:"post",params:t,data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var i in t)""===t[i]&&delete t[i];return t=JSON.stringify(t),t}]})}function v(t){return Object(a["a"])({url:"/system/management/activity/setActivityWithGoodOrRecommend",method:"post",params:t})}function p(t){return Object(a["a"])({url:"/system/management/setWeight",method:"get",params:t})}function g(t,e){return Object(a["a"])({url:"/system/activity/getActivityOptions",method:"post",params:t,data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var i in t)""===t[i]&&delete t[i];return t=JSON.stringify(t),t}]})}function y(){return Object(a["a"])({url:Object({VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:"/dash-ui/"}).VUE_APP_XIAOCHENGXU_API+"/api/v1/activity/config/require/column",method:"get"})}function f(t){return Object(a["a"])({url:"/api/v1/activity/common/create",method:"post",data:t,headers:{loginToken:"adminLoginToken"}})}function h(t){return Object(a["a"])({url:Object({VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:"/dash-ui/"}).VUE_APP_XIAOCHENGXU_API+"/api/v1/activity/common/update",method:"post",data:t,headers:{loginToken:"adminLoginToken"}})}function b(t){return Object(a["a"])({url:Object({VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:"/dash-ui/"}).VUE_APP_XIAOCHENGXU_API+"/api/v1/activity/common/deleteActivityById/"+t,method:"delete",headers:{loginToken:"adminLoginToken"}})}function S(){return Object(a["a"])({url:"/system/activity/getJoinCount",method:"get"})}function x(t){return Object(a["a"])({url:"/system/scheme/adviser/pageAdvisers",method:"get",params:t})}function C(t){return Object(a["a"])({url:"/system/scheme/adviser/addOrUpdate",method:"post",data:t})}function A(t){return Object(a["a"])({url:"/system/scheme/adviser/delete/"+t,method:"get"})}function I(t){return Object(a["a"])({url:"/system/scheme/adviser/get/"+t,method:"get"})}function k(t){return Object(a["a"])({url:Object({VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:"/dash-ui/"}).VUE_APP_XIAOCHENGXU_API+"/api/v1/order/vote/queryOrderVoteByVoteGroupId",method:"get",params:t})}function _(t){return Object(a["a"])({url:Object({VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:"/dash-ui/"}).VUE_APP_XIAOCHENGXU_API+"/api/v1/order/vote/updateOrderVoteBy",method:"post",data:t,headers:{"Content-Type":"application/json"}})}function w(t){return Object(a["a"])({url:Object({VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:"/dash-ui/"}).VUE_APP_XIAOCHENGXU_API+"/api/v1/order/vote/hide/"+t,method:"get"})}},d20e:function(t,e,i){},d215:function(t,e,i){},d433:function(t,e,i){"use strict";i("a5ba")},d997:function(t,e,i){"use strict";i("0a00")},dbae:function(t,e,i){"use strict";i("d20e")},e141:function(t,e,i){"use strict";i("9039")},e498:function(t,e,i){"use strict";i("1c18")},ed08:function(t,e,i){"use strict";i.d(e,"e",(function(){return n})),i.d(e,"a",(function(){return s})),i.d(e,"c",(function(){return l})),i.d(e,"d",(function(){return c})),i.d(e,"b",(function(){return o}));var a=i("53ca");i("ac1f"),i("00b4"),i("5319"),i("4d63"),i("2c3e"),i("25f0"),i("d3b7"),i("4d90"),i("a15b"),i("d81d"),i("b64b"),i("1276"),i("fb6a"),i("159b"),i("a630"),i("3ca3"),i("6062"),i("ddb0"),i("466d"),i("7db0");function n(t,e){if(0===arguments.length)return null;var i,n=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(a["a"])(t)?i=t:("string"===typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"===typeof t&&10===t.toString().length&&(t*=1e3),i=new Date(t));var s={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()},l=n.replace(/{([ymdhisa])+}/g,(function(t,e){var i=s[e];return"a"===e?["日","一","二","三","四","五","六"][i]:i.toString().padStart(2,"0")}));return l}function s(t,e,i){var a,n,s,l,c,o=function o(){var r=+new Date-l;r<e&&r>0?a=setTimeout(o,e-r):(a=null,i||(c=t.apply(s,n),a||(s=n=null)))};return function(){for(var n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];s=this,l=+new Date;var d=i&&!a;return a||(a=setTimeout(o,e)),d&&(c=t.apply(s,r),s=r=null),c}}function l(t){var e=t.split("."),i=e[e.length-1],a=["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"],n="";return i&&(i=i.toLocaleLowerCase(),n=a.find((function(t){return t===i}))),!!n}function c(t){var e=t.split("."),i=e[e.length-1],a=["mp4","webm","avi","rmvb","3gp","flv"],n="";return i&&(i=i.toLocaleLowerCase(),n=a.find((function(t){return t===i}))),!!n}function o(t){var e=t.split("."),i=e[e.length-1];return i}},eee9:function(t,e,i){},f1fe:function(t,e,i){"use strict";i("af8e")},f2d8:function(t,e,i){},f336:function(t,e,i){"use strict";i("9cb8")}}]);