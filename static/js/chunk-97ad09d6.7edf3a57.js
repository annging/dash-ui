(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-97ad09d6"],{"104b":function(t,e,n){},"28b5":function(t,e,n){"use strict";n("104b")},3123:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n("b775");function i(){return Object(a["a"])({url:Object({VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:"/dash-ui/"}).VUE_APP_XIAOCHENGXU_API+"/api/v1/upload/token",method:"get"})}},"54f0":function(t,e,n){"use strict";n("563b")},"563b":function(t,e,n){},6575:function(t,e,n){"use strict";n("e0a0")},"794e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-content"},[n("div",{staticClass:"left-container"},[n("el-menu",{staticStyle:{"margin-bottom":"20px"},attrs:{"default-active":"5",mode:"horizontal",router:""}},[n("el-menu-item",{attrs:{index:"1",route:{path:"/merchant/index"}}},[t._v("已入驻商家")]),n("el-menu-item",{attrs:{index:"3",route:{path:"/merchant/paid"}}},[t._v("付费商家")]),n("el-menu-item",{attrs:{index:"4",route:{path:"/merchant/recommend"}}},[t._v("推荐商家")]),n("el-menu-item",{attrs:{index:"2",route:{path:"/merchant/dailingqu"}}},[t._v("待领取商家")]),n("el-menu-item",{attrs:{index:"5",route:{path:"/merchant/edit/"+t.id}}},[t._v("编辑商家")])],1),n("el-row",[n("el-form",{ref:"merchantForm",attrs:{rules:t.rules,model:t.merchantForm,"label-width":"100px",size:"small"}},[n("el-form-item",{attrs:{label:"品牌名称",prop:"name"}},[n("el-input",{model:{value:t.merchantForm.name,callback:function(e){t.$set(t.merchantForm,"name",e)},expression:"merchantForm.name"}})],1),n("el-form-item",{attrs:{label:"品牌Logo",prop:"logo"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":function(e,n){return t.handleDataSuccess(e,n,"logo")},"on-remove":t.handleRemove,"before-upload":t.beforeUpload}},[t.merchantForm.logo?n("img",{staticClass:"avatar",attrs:{src:t.merchantForm.logo}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（尺寸为140*140最佳）")])])],1),n("el-form-item",{attrs:{label:"品牌简介"}},[n("Tinymce",{ref:"editor1",attrs:{height:150,toolbar:[""],menubar:"false",hasUpload:!1},model:{value:t.merchantForm.intro,callback:function(e){t.$set(t.merchantForm,"intro",e)},expression:"merchantForm.intro"}})],1),n("el-form-item",{attrs:{label:"品牌相册",prop:"introImgs"}},[n("div",[t._v(t._s(t.merchantForm.introImgs.length)+"/9")]),n("el-upload",{ref:"upload",attrs:{data:t.dataObj,multiple:"",limit:9,"list-type":"picture-card","file-list":t.fileList,action:"http://upload-z2.qiniup.com","on-success":t.handleSuccess_IntroImgs,"on-remove":t.handleRemove_IntroImgs,"before-upload":t.beforeUpload,"on-change":t.handleChange,"on-exceed":t.handleExceed}},[n("i",{staticClass:"el-icon-plus"}),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（尺寸为750*400最佳,最多9张）")])])],1),n("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[t._l(t.merchantForm.phone,(function(e,a){return n("div",{key:a,staticStyle:{display:"flex","margin-bottom":"8px"}},[n("el-input",{model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"item.content"}}),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return n.preventDefault(),t.removePhone(e,a)}}},[t._v("删除")])],1)})),n("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addPhone()}}},[t._v("+添加")])],2),n("el-form-item",{attrs:{label:"微信"}},[n("el-input",{model:{value:t.merchantForm.wechat,callback:function(e){t.$set(t.merchantForm,"wechat",e)},expression:"merchantForm.wechat"}})],1),n("el-form-item",{attrs:{label:"所在地址"}},[n("el-input",{attrs:{value:(t.merchantForm.address.province===t.merchantForm.address.city?"":t.merchantForm.address.province)+t.merchantForm.address.city+t.merchantForm.address.distinct+t.merchantForm.address.detail}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-location-outline"},on:{click:function(e){return e.preventDefault(),t.getLocation()}},slot:"append"})],1)],1),n("el-form-item",{attrs:{label:"详细地址"}},[n("el-input",{model:{value:t.merchantForm.address.tips,callback:function(e){t.$set(t.merchantForm.address,"tips",e)},expression:"merchantForm.address.tips"}})],1),n("el-form-item",{attrs:{label:"宣传片"}},[n("div",{staticStyle:{display:"flex","align-items":"flex-start"}},[n("el-upload",{staticClass:"avatar-uploader",staticStyle:{"margin-right":"10px"},attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","on-success":t.handleSuccess_introVideo,"on-remove":t.handleRemove_introVideo,"before-upload":t.beforeUpload_introVideo}},[t.merchantForm.introVideo?n("video",{staticClass:"avatar2",attrs:{controls:"",width:"500"}},[n("source",{attrs:{src:t.merchantForm.introVideo}}),t._v(" Sorry, your browser doesn't support embedded videos. ")]):n("i",{staticClass:"el-icon-plus avatar-uploader-icon2"}),n("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("（尺寸为690*410最佳）")])]),n("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.removeVideo()}}},[t._v("删除")])],1)]),n("el-form-item",{attrs:{label:"团队展示"}},[n("div",{staticStyle:{"font-size":"12px",color:"#666","margin-top":"4px"}},[t._v("（尺寸为208*208最佳）")]),t._l(t.merchantForm.teamIntros,(function(e,a){return n("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":function(e,n){return t.handleDataSuccess(e,n,"teamIntros",a,"img")},"before-upload":t.beforeUpload}},[e.img?n("img",{staticClass:"avatar",staticStyle:{width:"90px",height:"90px"},attrs:{src:e.img}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"90px",height:"90px","line-height":"90px"}})]),n("div",{staticStyle:{margin:"0 10px",width:"500px"}},[n("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"姓名"},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"item.name"}}),n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"简介"},model:{value:e.intro,callback:function(n){t.$set(e,"intro",n)},expression:"item.intro"}})],1),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return n.preventDefault(),t.removeTeam(e,a)}}},[t._v("删除")])],1)})),n("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addTeam()}}},[t._v("+添加")])],2),n("el-form-item",{attrs:{label:"作品展示"}},[n("div",{staticStyle:{"font-size":"12px",color:"#666","margin-top":"4px"}},[t._v("（尺寸为650*344最佳）")]),t._l(t.merchantForm.productIntros,(function(e,a){return n("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[n("el-upload",{staticClass:"avatar-uploader",attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":function(e,n){return t.handleDataSuccess(e,n,"productIntros",a,"img")},"before-upload":t.beforeUpload}},[e.img?n("img",{staticClass:"avatar",staticStyle:{width:"90px",height:"90px"},attrs:{src:e.img}}):n("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{width:"90px",height:"90px","line-height":"90px"}})]),n("div",{staticStyle:{margin:"0 10px",width:"500px"}},[n("el-input",{attrs:{type:"textarea",rows:4,placeholder:"作品简介"},model:{value:e.intro,callback:function(n){t.$set(e,"intro",n)},expression:"item.intro"}})],1),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return n.preventDefault(),t.removeProduct(e,a)}}},[t._v("删除")])],1)})),n("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addProduct()}}},[t._v("+添加")])],2),n("el-form-item",{attrs:{label:"品牌优势"}},[t._l(t.merchantForm.advantage,(function(e,a){return n("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[n("div",{staticStyle:{margin:"0 10px 0 0",width:"610px"}},[n("el-input",{staticStyle:{"margin-bottom":"5px"},attrs:{placeholder:"标题"},model:{value:e.title,callback:function(n){t.$set(e,"title",n)},expression:"item.title"}}),n("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"内容"},model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"item.content"}})],1),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return n.preventDefault(),t.removeAdvantage(e,a)}}},[t._v("删除")])],1)})),n("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addAdvantage()}}},[t._v("+添加")])],2),n("el-form-item",{attrs:{label:"申请体验"}},[n("div",[n("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-color":"#13ce66","inactive-color":"#808080"},model:{value:t.merchantForm.showApplyTry,callback:function(e){t.$set(t.merchantForm,"showApplyTry",e)},expression:"merchantForm.showApplyTry"}})],1),t._l(t.merchantForm.applyTry,(function(e,a){return n("div",{key:a,staticStyle:{display:"flex","align-items":"flex-start","margin-top":"10px"}},[n("div",{staticStyle:{margin:"0 10px 0 0",width:"610px"}},[n("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"给用户免费体验的内容或赠送礼品（例：免费提供20分钟任意试听课程）"},model:{value:e.content,callback:function(n){t.$set(e,"content",n)},expression:"item.content"}})],1),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return n.preventDefault(),t.removeApplyTry(e,a)}}},[t._v("删除")])],1)})),n("el-button",{attrs:{size:"mini"},on:{click:function(e){return e.preventDefault(),t.addApplyTry()}}},[t._v("+添加")])],2),n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即提交")]),n("el-button",{on:{click:function(e){return t.resetForm("merchantForm")}}},[t._v("取消")])],1)],1)],1),n("el-dialog",{attrs:{title:"地图",width:"800px",visible:t.mapDialogTableVisible,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(e){t.mapDialogTableVisible=e}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.markerDetail.address,expression:"markerDetail.address"}],attrs:{id:"address",type:"textbox"},domProps:{value:t.markerDetail.address},on:{input:function(e){e.target.composing||t.$set(t.markerDetail,"address",e.target.value)}}}),n("button",{on:{click:function(e){return e.preventDefault(),t.codeAddress(t.markerDetail.address)}}},[t._v("搜索")]),n("div",{staticStyle:{"min-height":"400px"},attrs:{id:"mapContainer"}}),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.mapDialogTableVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.mapDialogTableVisible=!1,t.merchantForm.address=Object.assign({},t.markersResult)}}},[t._v("确 定")])],1)])],1)])},r=[],o=(n("e9c4"),n("d3b7"),n("159b"),n("498a"),n("a434"),n("99af"),n("d81d"),n("8492")),s=n("3123"),c=n("008f"),l=n.n(c),u=n("8256"),d="UUSBZ-O7S3K-US5JP-AY4LI-KQA7K-O2B6S",m={name:"MerchantEdit",components:{Tinymce:u["a"]},data:function(){var t=this,e=function(e,n,a){var i=JSON.parse(JSON.stringify(n));if(t.adJustObjectArray(i).length<1)return a(new Error("请至少输入一个联系电话"));a()};return{id:"",merchantForm:{id:0,name:"",logo:"",intro:"",introImgs:[],phone:[{content:""}],wechat:"",address:{province:"",city:"",distinct:"",detail:"",tips:""},introVideo:"",teamIntros:[{img:"",name:"",intro:""}],productIntros:[{img:"",intro:""}],advantage:[{title:"",content:""}],showApplyTry:0,applyTry:[{content:""}],authStatus:5},vipLevels:[{key:0,label:"免费会员"},{key:1,label:"体验会员"},{key:2,label:"VIP会员"},{key:3,label:"旗舰会员"}],fileList:[],rules:{name:[{required:!0,message:"品牌名称",trigger:"blur"}],logo:[{required:!1,message:"请上传品牌Logo",trigger:"change"}],phone:[{validator:e,required:!0,trigger:"blur"}]},dialogVisible:!1,dialogVisible1:!1,dataObj:{token:""},map:null,geocoder:null,mapDialogTableVisible:!1,markersArray:[],markerDetail:{address:"北京,海淀区,海淀大街58号",latLng:{}},markersResult:{province:"",city:"",distinct:"",detail:"",tips:""}}},created:function(){this.id=this.$route.params&&this.$route.params.id,this.id>0&&this.fetchData(),this.fetchToken()},mounted:function(){},methods:{onSubmit:function(){var t=this,e=this;this.$refs.merchantForm.validate((function(n){var a=JSON.parse(JSON.stringify(t.merchantForm));return Object(o["p"])(a).then((function(n){1*n.code==200?t.$message({message:t.id>0?"修改成功":"添加成功",type:"success",onClose:function(){e.merchantForm.authStatus<5?e.$router.push({path:"/merchant/index"}):e.$router.push({path:"/merchant/dailingqu"})}}):t.$message({message:n.msg,type:"error"})})),console.log("error submit!!"),!1}))},resetForm:function(t){console.log("reset"),this.$refs[t].resetFields()},adJustObjectArray:function(t){var e=[];return t.forEach((function(t,n){for(var a in e[n]=0,t)t[a].trim()?e[n]=e[n]+1:e[n]=e[n]+0})),e.forEach((function(e,n){e<1&&t.splice(n,1)})),t},adJustArray:function(t){var e=[];return t.forEach((function(t,n){e[n]=0,t.trim()?e[n]=e[n]+1:e[n]=e[n]+0})),e.forEach((function(e,n){e<1&&t.splice(n,1)})),t},fetchData:function(){var t=this;Object(o["d"])(this.id).then((function(e){if("200"===e.code){if(e.data){for(var n in e.data.introImgs=JSON.parse(e.data.introImgs),e.data.phone=JSON.parse(e.data.phone),e.data.address=JSON.parse(e.data.address),e.data.teamIntros=JSON.parse(e.data.teamIntros),e.data.productIntros=JSON.parse(e.data.productIntros),e.data.advantage=JSON.parse(e.data.advantage),e.data.applyTry=JSON.parse(e.data.applyTry),t.merchantForm)"applyTry"===n||"phone"===n?(t.merchantForm[n]=[],e.data[n].forEach((function(e){t.merchantForm[n].push({content:e})}))):t.merchantForm[n]=e.data[n];t.merchantForm.phone.length<1&&t.addPhone(),t.merchantForm.teamIntros.length<1&&t.addTeam(),t.merchantForm.productIntros.length<1&&t.addProduct(),t.merchantForm.advantage.length<1&&t.addAdvantage(),t.merchantForm.applyTry.length<1&&t.addApplyTry(),t.merchantForm.introImgs.forEach((function(e,n){var a={name:"",uid:n,url:e,status:"success"};t.fileList.push(a)}))}}else t.$message({type:"error",message:e.msg})}))},fetchToken:function(){var t=this;return new Promise((function(e,n){Object(s["a"])().then((function(n){var a=n.data;t._data.dataObj.token=a,e(!0)})).catch((function(t){console.log(t),n(!1)}))}))},beforeUpload:function(t){var e=t.size/1024/1024<20;return e||this.$message.error("上传图片大小不能超过 20MB!"),e},beforeUpload_introVideo:function(t){console.log("")},handleRemove:function(t,e){console.log(t,e)},handleRemove_IntroImgs:function(t,e){var n="";n=t.response?"https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.response.key:t.url;var a=this.merchantForm.introImgs.indexOf(n);a>-1&&this.merchantForm.introImgs.splice(a,1)},handleRemove_introVideo:function(t,e){this.merchantForm.introVideo=""},handleSuccess_IntroImgs:function(t,e){this.merchantForm.introImgs.push("https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key)},handleSuccess_introVideo:function(t,e){this.merchantForm.introVideo="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleDataSuccess:function(t,e,n,a,i){a>-1?this.merchantForm[n][a][i]="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key:this.merchantForm[n]="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handleChange:function(t,e){this.fileList=e},subPics:function(){this.$refs.upload.submit()},handleExceed:function(t,e){this.$message.warning("最多传9张，加上此次选取的 ".concat(t.length," 张图片, 总共 ").concat(t.length+e.length))},removeVideo:function(){this.merchantForm.introVideo=""},removePhone:function(t,e){this.merchantForm.phone.splice(e,1)},addPhone:function(){this.merchantForm.phone.push({content:""})},removeTeam:function(t,e){this.merchantForm.teamIntros.splice(e,1)},addTeam:function(){this.merchantForm.teamIntros.push({img:"",name:"",intro:""})},removeProduct:function(t,e){this.merchantForm.productIntros.splice(e,1)},addProduct:function(){this.merchantForm.productIntros.push({img:"",intro:""})},removeAdvantage:function(t,e){this.merchantForm.advantage.splice(e,1)},addAdvantage:function(){this.merchantForm.advantage.push({title:"",content:""})},removeApplyTry:function(t,e){this.merchantForm.applyTry.splice(e,1)},addApplyTry:function(){this.merchantForm.applyTry.push({content:""})},initMap:function(){var t=this,e=this;l.a.init(d,(function(){var n=new qq.maps.LatLng(39.916527,116.397128),a={zoom:8,center:n,mapTypeId:qq.maps.MapTypeId.ROADMAP};t.map=new qq.maps.Map(document.getElementById("mapContainer"),a),qq.maps.event.addDomListener(t.map,"click",(function(t){e.deleteOverlays(),e.addMarker(t.latLng),e.codeLatLng(t.latLng)}));var i=new qq.maps.InfoWindow({map:t.map});t.geocoder=new qq.maps.Geocoder,t.geocoder.setComplete((function(t){console.log(t),e.deleteOverlays(),e.map.setCenter(t.detail.location);var n=e.addMarker(t.detail.location);e.markersResult.province=t.detail.addressComponents.province||"",e.markersResult.city=t.detail.addressComponents.city||"",e.markersResult.distinct=t.detail.addressComponents.distinct||"",e.markersResult.detail=(t.detail.addressComponents.town||"")+(t.detail.addressComponents.village||"")+(t.detail.addressComponents.street||"")+(t.detail.addressComponents.streetNumber||""),e.markerDetail.address=t.detail.address,e.markerDetail.latLng=t.detail.location,qq.maps.event.addListener(n,"click",(function(){i.open(),i.setContent('<div style="width:280px;height:100px;">'+t.detail.address+"<br />("+t.detail.location+")</div>"),i.setPosition(t.detail.location)}))})),t.geocoder.setError((function(){alert("出错了，请输入正确的地址！！！")}))}))},clearOverlays:function(){if(this.markersArray)for(i in this.markersArray)this.markersArray[i].setMap(null)},deleteOverlays:function(){if(console.log("deleteOverlays"),this.markersArray){for(var t in this.markersArray)this.markersArray[t].setMap(null);this.markersArray=[]}},addMarker:function(t){var e=new qq.maps.Marker({position:t,map:this.map});return this.markersArray.push(e),e},codeAddress:function(t){this.geocoder.getLocation(t)},codeLatLng:function(t){this.geocoder.getAddress(t)},getLocation:function(){this.mapDialogTableVisible=!0,this.initMap()}}},p=m,h=(n("6575"),n("f90f"),n("2877")),f=Object(h["a"])(p,a,r,!1,null,"0b331fe5",null);e["default"]=f.exports},8256:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[n("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),t.hasUpload?n("div",{staticClass:"editor-custom-btn-container"},[n("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1):t._e()])},i=[],r=(n("b680"),n("a9e3"),n("ac1f"),n("00b4"),n("d3b7"),n("159b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-container"},[n("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" 上传图片 ")]),n("el-dialog",{attrs:{visible:t.dialogVisible,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-upload",{staticClass:"editor-slide-upload",attrs:{data:t.dataObj,multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"http://upload-z2.qiniup.com","list-type":"picture-card"}},[n("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" 点击上传 ")])],1),n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" 取消 ")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" 确认 ")])],1)],1)}),o=[],s=(n("b64b"),n("d81d"),n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("3123")),c={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[],dataObj:{token:""}}},created:function(){this.fetchToken()},methods:{fetchToken:function(){var t=this;return new Promise((function(e,n){Object(s["a"])().then((function(n){var a=n.data;t._data.dataObj.token=a,e(!0)})).catch((function(t){console.log(t),n(!1)}))}))},checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var n=e.uid,a=Object.keys(this.listObj),i=0,r=a.length;i<r;i++)if(this.listObj[a[i]].uid===n)return this.listObj[a[i]].url="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key,void(this.listObj[a[i]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,n=Object.keys(this.listObj),a=0,i=n.length;a<i;a++)if(this.listObj[n[a]].uid===e)return void delete this.listObj[n[a]]},beforeUpload:function(t){var e=this,n=window.URL||window.webkitURL,a=t.uid;return this.listObj[a]={},new Promise((function(i,r){var o=new Image;o.src=n.createObjectURL(t),o.onload=function(){e.listObj[a]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},i(!0)}))}}},l=c,u=(n("54f0"),n("2877")),d=Object(u["a"])(l,r,o,!1,null,"0958cc86",null),m=d.exports,p=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],h=p,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],g=f,v=n("b85c"),b=[];function y(){return window.tinymce}var k=function(t,e){var n=document.getElementById(t),a=e||function(){};if(!n){var i=document.createElement("script");i.src=t,i.id=t,document.body.appendChild(i),b.push(a);var r="onload"in i?o:s;r(i)}function o(e){e.onload=function(){this.onerror=this.onload=null;var t,n=Object(v["a"])(b);try{for(n.s();!(t=n.n()).done;){var a=t.value;a(null,e)}}catch(i){n.e(i)}finally{n.f()}b=null},e.onerror=function(){this.onerror=this.onload=null,a(new Error("Failed to load "+t),e)}}function s(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,n=Object(v["a"])(b);try{for(n.s();!(e=n.n()).done;){var a=e.value;a(null,t)}}catch(i){n.e(i)}finally{n.f()}b=null}}}n&&a&&(y()?a(null,n):b.push(a))},_=k,w="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",x={name:"Tinymce",components:{editorImage:m},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"},hasUpload:{type:Boolean,required:!1,default:!0}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;_(w,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:g,menubar:this.menubar,plugins:h,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(n){e.value&&n.setContent(e.value),e.hasInit=!0,n.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",n.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},O=x,S=(n("28b5"),Object(u["a"])(O,a,i,!1,null,"507d25da",null));e["a"]=S.exports},8492:function(t,e,n){"use strict";n.d(e,"c",(function(){return i})),n.d(e,"m",(function(){return r})),n.d(e,"e",(function(){return o})),n.d(e,"n",(function(){return s})),n.d(e,"l",(function(){return c})),n.d(e,"d",(function(){return l})),n.d(e,"j",(function(){return u})),n.d(e,"o",(function(){return d})),n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return p})),n.d(e,"p",(function(){return h})),n.d(e,"q",(function(){return f})),n.d(e,"r",(function(){return g})),n.d(e,"k",(function(){return v})),n.d(e,"h",(function(){return b})),n.d(e,"i",(function(){return y})),n.d(e,"f",(function(){return k})),n.d(e,"g",(function(){return _}));n("e9c4");var a=n("b775");function i(t,e){return Object(a["a"])({url:"/system/merchant/getMerchants?size="+t.size+"&current="+t.current,method:"post",data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var n in t)""===t[n]&&delete t[n];return t=JSON.stringify(t),t}]})}function r(t){return Object(a["a"])({url:"/system/merchant/isOrNoAuthentication",method:"post",params:t})}function o(t,e){return Object(a["a"])({url:"/system/merchant/getApplyGetMerchant?size="+t.size+"&current="+t.current,method:"post",data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var n in t)""===t[n]&&delete t[n];return t=JSON.stringify(t),t}]})}function s(t){return Object(a["a"])({url:"/system/merchant/isOrNoGetAuthentication",method:"post",params:t})}function c(t){return Object(a["a"])({url:"/system/merchant/groundingOrUndercarriage",method:"get",params:t})}function l(t){return Object(a["a"])({url:"/system/merchant/getMerchantInfo",method:"post",params:{merchantId:t}})}function u(t,e){return Object(a["a"])({url:"/system/merchant/getRecommendedMerchants",method:"post",params:t,data:e,transformRequest:[function(t,e){for(var n in t)""===t[n]&&delete t[n];return t=JSON.stringify(t),t}]})}function d(t){return Object(a["a"])({url:"/system/merchant/recommendMerchant",method:"get",params:t})}function m(t){return Object(a["a"])({url:"/system/merchant/CancelRecommended",method:"get",params:t})}function p(t){return Object(a["a"])({url:"/api/v1/merchant/dataAnalysis",method:"get",params:t,headers:{loginToken:"adminLoginToken"}})}function h(t){return Object(a["a"])({url:"/api/v1/merchant/update",method:"post",data:t,headers:{loginToken:"adminLoginToken"}})}function f(t){return Object(a["a"])({url:"/system/merchant/updateMerchantViPEndTime",method:"get",params:t})}function g(t){return Object(a["a"])({url:"/system/merchant/vip/update",method:"get",params:t})}function v(t){return Object(a["a"])({url:"/api/v1/store/query/merchant",method:"get",params:t,headers:{loginToken:"adminLoginToken"}})}function b(t){return Object(a["a"])({url:"/system/wallet/get/"+t,method:"get"})}function y(t,e){return Object(a["a"])({url:"/system/wallet/getDetail/"+e,method:"get",params:t})}function k(t,e){return Object(a["a"])({url:"/system/merchant/vip/changePages",method:"post",params:t,data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var n in t)""===t[n]&&delete t[n];return t=JSON.stringify(t),t}]})}function _(t,e){return Object(a["a"])({url:"/system/merchant/vip/rechargePages",method:"post",params:t,data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var n in t)""===t[n]&&delete t[n];return t=JSON.stringify(t),t}]})}},"8dfc":function(t,e,n){},e0a0:function(t,e,n){},f90f:function(t,e,n){"use strict";n("8dfc")}}]);