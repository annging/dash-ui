(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44dba192"],{"068d":function(t,e,i){"use strict";i("95c1")},"09f4":function(t,e,i){"use strict";i.d(e,"a",(function(){return r})),Math.easeInOutQuad=function(t,e,i,n){return t/=n/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function o(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function a(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(t,e,i){var r=a(),l=t-r,c=20,s=0;e="undefined"===typeof e?500:e;var u=function t(){s+=c;var a=Math.easeInOutQuad(s,r,l,e);o(a),s<e?n(t):i&&"function"===typeof i&&i()};u()}},"104b":function(t,e,i){},"1c18":function(t,e,i){},"28b5":function(t,e,i){"use strict";i("104b")},3123:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("b775");function o(){return Object(n["a"])({url:Object({VUE_APP_BASE_API:"/prod-api",NODE_ENV:"production",BASE_URL:"/dash-ui/"}).VUE_APP_XIAOCHENGXU_API+"/api/v1/upload/token",method:"get"})}},"333d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pagination-container",class:{hidden:t.hidden}},[i("el-pagination",t._b({attrs:{background:t.background,"current-page":t.currentPage,"page-size":t.pageSize,layout:t.layout,"page-sizes":t.pageSizes,total:t.total},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}},"el-pagination",t.$attrs,!1))],1)},o=[],a=(i("a9e3"),i("09f4")),r={name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(t){this.$emit("update:page",t)}},pageSize:{get:function(){return this.limit},set:function(t){this.$emit("update:limit",t)}}},methods:{handleSizeChange:function(t){this.$emit("pagination",{page:this.currentPage,limit:t}),this.autoScroll&&Object(a["a"])(0,800)},handleCurrentChange:function(t){this.$emit("pagination",{page:t,limit:this.pageSize}),this.autoScroll&&Object(a["a"])(0,800)}}},l=r,c=(i("e498"),i("2877")),s=Object(c["a"])(l,n,o,!1,null,"6af373ef",null);e["a"]=s.exports},4506:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main-content"},[i("div",{staticClass:"left-container"},[i("el-menu",{staticStyle:{"margin-bottom":"20px"},attrs:{"default-active":"2",mode:"horizontal",router:""}},[i("el-menu-item",{attrs:{index:"1",route:{path:"/school/article/index"}}},[t._v("文章列表")]),i("el-menu-item",{attrs:{index:"3",route:{path:"/school/article/rec"}}},[t._v("推荐文章")]),i("el-menu-item",{attrs:{index:"2",route:{path:"/school/article/create"}}},[t._v("添加文章")])],1),i("el-row",[i("el-form",{ref:"form",attrs:{rules:t.rules,model:t.articleForm,"label-width":"100px",size:"small"}},[i("el-form-item",{attrs:{label:"标题",prop:"title"}},[i("el-input",{attrs:{placeholder:"标题"},model:{value:t.articleForm.title,callback:function(e){t.$set(t.articleForm,"title",e)},expression:"articleForm.title"}})],1),i("el-form-item",{attrs:{label:"封面图",prop:"cover"}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{data:t.dataObj,multiple:!1,action:"http://upload-z2.qiniup.com","show-file-list":!1,"on-success":t.handleSuccess,"on-preview":t.handlePicturePreview,"on-remove":t.handleRemove,"before-upload":t.beforeUpload}},[t.articleForm.cover?i("img",{staticClass:"avatar",attrs:{src:t.articleForm.cover}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),i("el-form-item",{attrs:{label:"类型",prop:"type"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"类型"},on:{change:t.typeChange},model:{value:t.articleForm.type,callback:function(e){t.$set(t.articleForm,"type",e)},expression:"articleForm.type"}},[i("el-option",{attrs:{label:"文章",value:1}}),i("el-option",{attrs:{label:"链接",value:2}})],1)],1),1*t.articleForm.type===1?i("el-form-item",{attrs:{label:"导师",prop:"tutorId"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择导师","popper-class":"paginationSelect"},model:{value:t.articleForm.tutorId,callback:function(e){t.$set(t.articleForm,"tutorId",e)},expression:"articleForm.tutorId"}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.tutorListLoading,expression:"tutorListLoading"}]},[t._l(t.tutorList,(function(e){return t.tutorList.length>0?i("el-option",{key:e.id,attrs:{label:e.id+"-"+e.name,value:e.id}},[i("span",{staticClass:"label-id"},[t._v(t._s(e.id))]),t._v("- "),i("span",{staticClass:"label-title"},[t._v(t._s(e.name))])]):t._e()})),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.tutorTotal>0,expression:"tutorTotal>0"}],attrs:{total:t.tutorTotal,page:t.tutorListQuery.offset,limit:t.tutorListQuery.limit},on:{"update:page":function(e){return t.$set(t.tutorListQuery,"offset",e)},"update:limit":function(e){return t.$set(t.tutorListQuery,"limit",e)},pagination:t.getTutorList}})],2)])],1):t._e(),1*t.articleForm.type===1?i("el-form-item",{attrs:{label:"内容",prop:"content"}},[i("Tinymce",{ref:"editor1",attrs:{height:300,menubar:"false"},model:{value:t.articleForm.content,callback:function(e){t.$set(t.articleForm,"content",e)},expression:"articleForm.content"}})],1):t._e(),1*t.articleForm.type===2?i("el-form-item",{attrs:{label:"链接",prop:"content"}},[i("el-input",{attrs:{placeholder:"链接"},model:{value:t.articleForm.content,callback:function(e){t.$set(t.articleForm,"content",e)},expression:"articleForm.content"}})],1):t._e(),i("el-form-item",{attrs:{label:"简介",prop:"brief"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:6},placeholder:"简介"},model:{value:t.articleForm.brief,callback:function(e){t.$set(t.articleForm,"brief",e)},expression:"articleForm.brief"}})],1),i("el-form-item",{attrs:{label:"真实浏览量",prop:"viewCount"}},[i("el-input",{attrs:{type:"number",placeholder:"真实浏览量",disabled:!0},model:{value:t.articleForm.viewCount,callback:function(e){t.$set(t.articleForm,"viewCount",e)},expression:"articleForm.viewCount"}})],1),i("el-form-item",{attrs:{label:"虚拟浏览量",prop:"virtulViewCount"}},[i("el-input",{attrs:{type:"number",placeholder:"虚拟浏览量"},model:{value:t.articleForm.virtulViewCount,callback:function(e){t.$set(t.articleForm,"virtulViewCount",e)},expression:"articleForm.virtulViewCount"}})],1),i("el-form-item",{attrs:{label:"是否推荐"}},[i("el-switch",{attrs:{"active-color":"#13ce66","active-value":!0,"inactive-value":!1},model:{value:t.articleForm.isRecommend,callback:function(e){t.$set(t.articleForm,"isRecommend",e)},expression:"articleForm.isRecommend"}})],1),i("el-form-item",{attrs:{label:"权重"}},[i("el-input",{model:{value:t.articleForm.weight,callback:function(e){t.$set(t.articleForm,"weight",e)},expression:"articleForm.weight"}}),i("div",{staticClass:"tips",staticStyle:{"font-size":"13px",color:"#999"}},[t._v("数值越大，排序越靠前")])],1),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("立即添加")]),i("el-button",[t._v("取消")])],1)],1)],1)],1)])},o=[],a=(i("d3b7"),i("caa4")),r=i("3123"),l=i("8256"),c=i("333d"),s={name:"CreateArticle",components:{Tinymce:l["a"],Pagination:c["a"]},data:function(){return{articleForm:{title:"",cover:"",type:1,tutorId:"",brief:"",content:"",weight:0,isRecommend:!1,viewCount:0,virtulViewCount:0},rules:{title:[{required:!0,message:"请输入标题",trigger:"blur"},{min:3,max:50,message:"长度在 3 到 100 个字符",trigger:"blur"}],cover:[{required:!0,message:"请上传封面图",trigger:"change"}],tutorId:[{required:!1,message:"请选择导师",trigger:"change"}]},dataObj:{token:""},tutorList:[],tutorTotal:0,tutorListQuery:{offset:0,limit:10},tutorListLoading:!0}},created:function(){this.fetchToken(),this.getTutorList()},methods:{onSubmit:function(){var t=this;console.log("submit!"),Object(a["a"])(this.articleForm).then((function(e){1*e.code==200?(t.$message({message:"创建成功",type:"success"}),setTimeout((function(){t.$router.push({path:"/school/article/index"})}),1500)):t.$message({message:e.msg,type:"error"})}))},typeChange:function(){setTimeout(this.changeFunction,200)},changeFunction:function(){this.$set(this.articleForm,"content",""),this.$set(this.articleForm,"tutorId","")},beforeUpload:function(t){t.type;var e=t.size/1024/1024<20;return e||this.$message.error("上传头像图片大小不能超过 20MB!"),e},getTutorList:function(){var t=this;this.tutorListLoading=!0,Object(a["f"])(this.tutorListQuery).then((function(e){t.tutorList=e.data.records,t.tutorTotal=e.data.total,t.tutorListLoading=!1}))},fetchToken:function(){var t=this;return new Promise((function(e,i){Object(r["a"])().then((function(i){var n=i.data;t._data.dataObj.token=n,e(!0)})).catch((function(t){console.log(t),i(!1)}))}))},handleRemove:function(t,e){console.log(t,e)},handleSuccess:function(t,e){this.articleForm.cover="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key},handlePicturePreview:function(){this.dialogVisible=!0},handleRemove1:function(t,e){console.log(t,e)},handlePicturePreview1:function(){this.dialogVisible1=!0}}},u=s,d=(i("068d"),i("c1d4"),i("2877")),m=Object(d["a"])(u,n,o,!1,null,"02159636",null);e["default"]=m.exports},"54f0":function(t,e,i){"use strict";i("563b")},"563b":function(t,e,i){},"6cb4":function(t,e,i){},8256:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tinymce-container",class:{fullscreen:t.fullscreen},style:{width:t.containerWidth}},[i("textarea",{staticClass:"tinymce-textarea",attrs:{id:t.tinymceId}}),t._v(" "),t.hasUpload?i("div",{staticClass:"editor-custom-btn-container"},[i("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:t.imageSuccessCBK}})],1):t._e()])},o=[],a=(i("b680"),i("a9e3"),i("ac1f"),i("00b4"),i("d3b7"),i("159b"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v(" 上传图片 ")]),i("el-dialog",{attrs:{visible:t.dialogVisible,"modal-append-to-body":!1,"append-to-body":!0},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{data:t.dataObj,multiple:!0,"file-list":t.fileList,"show-file-list":!0,"on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload,action:"http://upload-z2.qiniup.com","list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v(" 点击上传 ")])],1),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v(" 取消 ")]),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v(" 确认 ")])],1)],1)}),r=[],l=(i("b64b"),i("d81d"),i("3ca3"),i("ddb0"),i("2b3d"),i("9861"),i("3123")),c={name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[],dataObj:{token:""}}},created:function(){this.fetchToken()},methods:{fetchToken:function(){var t=this;return new Promise((function(e,i){Object(l["a"])().then((function(i){var n=i.data;t._data.dataObj.token=n,e(!0)})).catch((function(t){console.log(t),i(!1)}))}))},checkAllSuccess:function(){var t=this;return Object.keys(this.listObj).every((function(e){return t.listObj[e].hasSuccess}))},handleSubmit:function(){var t=this,e=Object.keys(this.listObj).map((function(e){return t.listObj[e]}));this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("Please wait for all images to be uploaded successfully. If there is a network problem, please refresh the page and upload again!")},handleSuccess:function(t,e){for(var i=e.uid,n=Object.keys(this.listObj),o=0,a=n.length;o<a;o++)if(this.listObj[n[o]].uid===i)return this.listObj[n[o]].url="https://ttz-user-file.qiniu.tuantuanzhan.cn/"+t.key,void(this.listObj[n[o]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=Object.keys(this.listObj),n=0,o=i.length;n<o;n++)if(this.listObj[i[n]].uid===e)return void delete this.listObj[i[n]]},beforeUpload:function(t){var e=this,i=window.URL||window.webkitURL,n=t.uid;return this.listObj[n]={},new Promise((function(o,a){var r=new Image;r.src=i.createObjectURL(t),r.onload=function(){e.listObj[n]={hasSuccess:!1,uid:t.uid,width:this.width,height:this.height}},o(!0)}))}}},s=c,u=(i("54f0"),i("2877")),d=Object(u["a"])(s,a,r,!1,null,"0958cc86",null),m=d.exports,h=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"],p=h,f=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"],b=f,g=i("b85c"),v=[];function y(){return window.tinymce}var w=function(t,e){var i=document.getElementById(t),n=e||function(){};if(!i){var o=document.createElement("script");o.src=t,o.id=t,document.body.appendChild(o),v.push(n);var a="onload"in o?r:l;a(o)}function r(e){e.onload=function(){this.onerror=this.onload=null;var t,i=Object(g["a"])(v);try{for(i.s();!(t=i.n()).done;){var n=t.value;n(null,e)}}catch(o){i.e(o)}finally{i.f()}v=null},e.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+t),e)}}function l(t){t.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;var e,i=Object(g["a"])(v);try{for(i.s();!(e=i.n()).done;){var n=e.value;n(null,t)}}catch(o){i.e(o)}finally{i.f()}v=null}}}i&&n&&(y()?n(null,i):v.push(n))},_=w,k="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js",C={name:"Tinymce",components:{editorImage:m},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"},hasUpload:{type:Boolean,required:!1,default:!0}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth:function(){var t=this.width;return/^[\d]+(\.[\d]+)?$/.test(t)?"".concat(t,"px"):t}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick((function(){return window.tinymce.get(e.tinymceId).setContent(t||"")}))}},mounted:function(){this.init()},activated:function(){window.tinymce&&this.initTinymce()},deactivated:function(){this.destroyTinymce()},destroyed:function(){this.destroyTinymce()},methods:{init:function(){var t=this;_(k,(function(e){e?t.$message.error(e.message):t.initTinymce()}))},initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#".concat(this.tinymceId),language:this.languageTypeList["zh"],height:this.height,body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:b,menubar:this.menubar,plugins:p,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,nonbreaking_force_tab:!0,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",(function(){t.hasChange=!0,t.$emit("input",i.getContent())}))},setup:function(t){t.on("FullscreenStateChanged",(function(t){e.fullscreen=t.state}))}})},destroyTinymce:function(){var t=window.tinymce.get(this.tinymceId);this.fullscreen&&t.execCommand("mceFullScreen"),t&&t.destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach((function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'.concat(t.url,'" >'))}))}}},j=C,O=(i("28b5"),Object(u["a"])(j,n,o,!1,null,"507d25da",null));e["a"]=O.exports},"95c1":function(t,e,i){},c1d4:function(t,e,i){"use strict";i("6cb4")},caa4:function(t,e,i){"use strict";i.d(e,"e",(function(){return o})),i.d(e,"a",(function(){return a})),i.d(e,"g",(function(){return r})),i.d(e,"c",(function(){return l})),i.d(e,"f",(function(){return c})),i.d(e,"b",(function(){return s})),i.d(e,"d",(function(){return u})),i.d(e,"h",(function(){return d}));var n=i("b775");function o(t){return Object(n["a"])({url:"/school/article/pageArticles",method:"get",params:t})}function a(t){return Object(n["a"])({url:"/school/article/addOrUpdate",method:"post",data:t})}function r(t){return Object(n["a"])({url:"/school/article/get/"+t,method:"get"})}function l(t){return Object(n["a"])({url:"/school/article/delete/"+t,method:"get"})}function c(t){return Object(n["a"])({url:"/school/tutor/pageTutors",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/school/tutor/addOrUpdate",method:"post",data:t})}function u(t){return Object(n["a"])({url:"/school/tutor/delete/"+t,method:"get"})}function d(t){return Object(n["a"])({url:"/school/tutor/get/"+t,method:"get"})}},e498:function(t,e,i){"use strict";i("1c18")}}]);