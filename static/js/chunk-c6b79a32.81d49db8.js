(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c6b79a32"],{1392:function(t,e,a){},1604:function(t,e,a){},"1b13":function(t,e,a){},"2e14":function(t,e,a){"use strict";a("1b13")},"4ba0":function(t,e,a){"use strict";a("1392")},"77a6":function(t,e,a){},8245:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}]},[a("el-row",{staticClass:"filter-container",staticStyle:{display:"none"},attrs:{type:"flex"}},[a("div",{staticClass:"filter",staticStyle:{float:"right",position:"relative","z-index":"9"}},[a("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(e){return t.pickTime(7)}}},[t._v("近7日")]),a("el-button",{attrs:{plain:"",size:"mini"},on:{click:function(e){return t.pickTime(15)}}},[t._v("近15日")]),a("el-date-picker",{attrs:{type:"daterange",size:"mini","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.data_time_end,callback:function(e){t.data_time_end=e},expression:"data_time_end"}})],1)]),a("panel-activitys",{attrs:{activityDataStatistics:t.activityDataStatistics}}),t.activityTurnoverRate.series?a("panel-activityp",{attrs:{activityTurnoverRate:t.activityTurnoverRate}}):t._e(),a("panel-discounts",{attrs:{couponStatistics:t.couponStatistics}}),t.actualIncome.series?a("panel-income",{attrs:{actualIncome:t.actualIncome}}):t._e(),t.userAnalysis?a("panel-user",{attrs:{userAnalysis:t.userAnalysis}}):t._e()],1)},s=[],n=(a("d81d"),a("b0c0"),a("8492")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title"},[a("div",{staticClass:"left"},[t._v("活动数据统计")]),a("div",{staticClass:"right",staticStyle:{display:"none"}},[a("svg-icon",{attrs:{"icon-class":"filter"}}),a("span",[t._v("筛选")])],1)]),a("el-row",{staticClass:"panel-group",staticStyle:{clear:"both"},attrs:{gutter:20}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 发布活动(场) ")]),a("div",{staticClass:"card-panel-num"},[t._v(t._s(t.activityDataStatistics.activityStatistics))])])])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 浏览量(次数) ")]),a("div",{staticClass:"card-panel-num"},[t._v(t._s(t.activityDataStatistics.pageView))])])])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 转发次数 ")]),a("div",{staticClass:"card-panel-num"},[t._v(t._s(t.activityDataStatistics.forwardingNumber))])])])])],1)],1)},c=[],o={name:"PanelActivitys",components:{},props:{activityDataStatistics:{type:Object,default:function(){return{activityStatistics:"-",pageView:"-",forwardingNumber:"-"}}}},methods:{}},l=o,d=(a("4ba0"),a("2877")),u=Object(d["a"])(l,r,c,!1,null,"0586d200",null),p=u.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title"},[a("div",{staticClass:"left"},[t._v("活动成交率漏斗")]),a("div",{staticClass:"right",staticStyle:{display:"none"}},[a("svg-icon",{attrs:{"icon-class":"filter"}}),a("span",[t._v("筛选")])],1)]),a("el-row",{staticClass:"panel-group",staticStyle:{clear:"both"},attrs:{gutter:20}},[a("el-col",{staticClass:"card-panel-col",staticStyle:{"background-color":"#F2F6FC",padding:"30px 0",margin:"10px"},attrs:{xs:12,sm:12,lg:18}},[a("funnel-chart",{attrs:{width:"100%",chartData:t.activityTurnoverRate}})],1)],1)],1)},h=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width},attrs:{id:t.id}})},f=[],g=a("313e"),y=a.n(g),b=a("ed08"),_={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(b["a"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};a("817d");var C={mixins:[_],props:{className:{type:String,default:"chart"},id:{type:String,default:"chart"},width:{type:String,default:"200px"},height:{type:String,default:"200px"},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},mounted:function(){this.initChart()},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=y.a.init(document.getElementById(this.id),"macarons"),this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c}"},toolbox:{feature:{dataView:{readOnly:!1},restore:{},saveAsImage:{}}},legend:{},series:[{name:"漏斗图",type:"funnel",left:"10%",top:60,bottom:60,width:"80%",min:0,max:100,minSize:"0%",maxSize:"100%",sort:"descending",gap:2,label:{show:!0,position:"inside",formatter:"{b}: {c}人"},labelLine:{length:10,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{fontSize:20}},data:this.chartData.series}]})}}},S=C,w=Object(d["a"])(S,v,f,!1,null,null,null),$=w.exports,E={name:"PanelActivityp",components:{FunnelChart:$},props:{activityTurnoverRate:{type:Object,default:function(){return{}}}},methods:{}},z=E,O=(a("85c2"),Object(d["a"])(z,m,h,!1,null,"3e57dd3c",null)),R=O.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title"},[a("div",{staticClass:"left"},[t._v("优惠券数据统计")]),a("div",{staticClass:"right",staticStyle:{display:"none"}},[a("svg-icon",{attrs:{"icon-class":"filter"}}),a("span",[t._v("筛选")])],1)]),a("el-row",{staticClass:"panel-group",staticStyle:{clear:"both"},attrs:{gutter:20}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 浏览量(次数) ")]),a("div",{staticClass:"card-panel-num"},[t._v(t._s(t.couponStatistics.pageView))])])])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 领取量(张) ")]),a("div",{staticClass:"card-panel-num"},[t._v(t._s(t.couponStatistics.drawNum))])])])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 已使用(张) ")]),a("div",{staticClass:"card-panel-num"},[t._v(t._s(t.couponStatistics.used))])])])])],1)],1)},x=[],D={name:"PanelActivitys",components:{},props:{couponStatistics:{type:Object,default:function(){return{drawNum:"-",pageView:"-",used:"-"}}}},methods:{}},T=D,N=(a("be21"),Object(d["a"])(T,j,x,!1,null,"06ee807a",null)),A=N.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title"},[a("div",{staticClass:"left"},[t._v("实际收支")]),a("div",{staticClass:"right",staticStyle:{display:"none"}},[a("svg-icon",{attrs:{"icon-class":"filter"}}),a("span",[t._v("筛选")])],1)]),a("el-row",{staticClass:"panel-group",staticStyle:{clear:"both"},attrs:{gutter:20}},[a("el-col",{staticClass:"card-panel-col",staticStyle:{"background-color":"#F2F6FC",padding:"30px 0",margin:"10px"},attrs:{xs:24,sm:24,lg:18}},[a("pie-chart",{attrs:{width:"100%",chartData:t.actualIncome}})],1)],1)],1)},k=[],I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:t.className,style:{height:t.height,width:t.width}})},H=[],P={data:function(){return{$_sidebarElm:null,$_resizeHandler:null}},mounted:function(){var t=this;this.$_resizeHandler=Object(b["a"])((function(){t.chart&&t.chart.resize()}),100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated:function(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated:function(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent:function(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent:function(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler:function(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent:function(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent:function(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}};a("817d");var V={mixins:[P],props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"300px"},chartData:{type:Object,required:!0}},data:function(){return{chart:null}},mounted:function(){var t=this;this.$nextTick((function(){t.initChart()}))},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=y.a.init(this.$el,"macarons"),this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:["活动收入","优惠券收入","佣金支出","退款金额"]},series:[{name:"实际收入",type:"pie",roseType:"radius",radius:[50,70],center:["50%","38%"],data:this.chartData.series,animationEasing:"cubicInOut",animationDuration:2600}]})}}},U=V,q=Object(d["a"])(U,I,H,!1,null,null,null),M=q.exports,F={name:"PanelIncome",components:{PieChart:M},props:{actualIncome:{type:Object,default:function(){return{}}}},methods:{}},J=F,B=(a("91a4"),Object(d["a"])(J,L,k,!1,null,"523f55de",null)),G=B.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"title"},[a("div",{staticClass:"left"},[t._v("用户分析")]),a("div",{staticClass:"right",staticStyle:{display:"none"}},[a("svg-icon",{attrs:{"icon-class":"filter"}}),a("span",[t._v("筛选")])],1)]),a("el-row",{staticClass:"panel-group",staticStyle:{clear:"both"},attrs:{gutter:20}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 新客人数 ")]),a("div",{staticClass:"card-panel-num"},[t._v(t._s(t.userAnalysis.newUser))])])])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel"},[a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 老客人数 ")]),a("div",{staticClass:"card-panel-num"},[t._v(t._s(t.userAnalysis.oldUser))])])])])],1)],1)},Y=[],K={name:"PanelUser",components:{},props:{userAnalysis:{type:Object,default:function(){return{}}}},methods:{}},Q=K,X=(a("c2fa"),Object(d["a"])(Q,W,Y,!1,null,"648ea464",null)),Z=X.exports,tt={name:"Statistics",components:{PanelActivitys:p,PanelActivityp:R,PanelDiscounts:A,PanelIncome:G,PanelUser:Z},data:function(){return{id:"",pageLoading:!1,analysisData:{activityDataStatistics:{activityStatistics:"-",pageView:"-",forwardingNumber:"-"},activityTurnoverRate:{},couponStatistics:{drawNum:"-",used:"-",pageView:"-"},actualIncome:{},userAnalysis:{newUser:"-",oldUser:"-"},accessNumbers:{},userActivation:{},spectrophotometer:{}},activityDataStatistics:{activityStatistics:"-",pageView:"-",forwardingNumber:"-"},activityTurnoverRate:{},couponStatistics:{pageView:"-",drawNum:"-",used:""},actualIncome:{},userAnalysis:{},message:"",data_time_end:[]}},computed:{activeTabMenu:function(){var t=this.$route,e=(t.meta,t.path);return e}},created:function(){this.id=this.$route.params&&this.$route.params.id,this.fetchData(this.id)},methods:{fetchData:function(t){var e=this;this.pageLoading=!0,Object(n["b"])({merchantId:t}).then((function(t){var a=t.data;e.$set(e.activityDataStatistics,"activityStatistics",a.activityDataStatistics.activityStatistics),e.$set(e.activityDataStatistics,"pageView",a.activityDataStatistics.pageView),e.$set(e.activityDataStatistics,"forwardingNumber",a.activityDataStatistics.forwardingNumber),e.$set(e.couponStatistics,"drawNum",a.couponStatistics.drawNum),e.$set(e.couponStatistics,"pageView",a.couponStatistics.pageView),e.$set(e.couponStatistics,"used",a.couponStatistics.used);var i=a.activityTurnoverRate.series.map((function(t){return{value:t.data?t.data:0,name:t.name}}));e.$set(e.activityTurnoverRate,"series",i);var s=a.actualIncome.series.map((function(t){return{value:t.data?t.data:0,name:t.name}}));e.$set(e.actualIncome,"series",s),e.$set(e.userAnalysis,"newUser",a.userAnalysis.newUser),e.$set(e.userAnalysis,"oldUser",a.userAnalysis.oldUser),e.pageLoading=!1})).catch((function(t){console.log(t)}))},pickTime:function(t){var e=new Date,a=new Date;this.data_time_end=[],a.setTime(a.getTime()-864e5*t),this.data_time_end.push(a),this.data_time_end.push(e)}}},et=tt,at=(a("2e14"),Object(d["a"])(et,i,s,!1,null,"258dab09",null));e["default"]=at.exports},8492:function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"m",(function(){return n})),a.d(e,"e",(function(){return r})),a.d(e,"n",(function(){return c})),a.d(e,"l",(function(){return o})),a.d(e,"d",(function(){return l})),a.d(e,"j",(function(){return d})),a.d(e,"o",(function(){return u})),a.d(e,"a",(function(){return p})),a.d(e,"b",(function(){return m})),a.d(e,"p",(function(){return h})),a.d(e,"q",(function(){return v})),a.d(e,"r",(function(){return f})),a.d(e,"k",(function(){return g})),a.d(e,"h",(function(){return y})),a.d(e,"i",(function(){return b})),a.d(e,"f",(function(){return _})),a.d(e,"g",(function(){return C}));a("e9c4");var i=a("b775");function s(t,e){return Object(i["a"])({url:"/system/merchant/getMerchants?size="+t.size+"&current="+t.current,method:"post",data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var a in t)""===t[a]&&delete t[a];return t=JSON.stringify(t),t}]})}function n(t){return Object(i["a"])({url:"/system/merchant/isOrNoAuthentication",method:"post",params:t})}function r(t,e){return Object(i["a"])({url:"/system/merchant/getApplyGetMerchant?size="+t.size+"&current="+t.current,method:"post",data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var a in t)""===t[a]&&delete t[a];return t=JSON.stringify(t),t}]})}function c(t){return Object(i["a"])({url:"/system/merchant/isOrNoGetAuthentication",method:"post",params:t})}function o(t){return Object(i["a"])({url:"/system/merchant/groundingOrUndercarriage",method:"get",params:t})}function l(t){return Object(i["a"])({url:"/system/merchant/getMerchantInfo",method:"post",params:{merchantId:t}})}function d(t,e){return Object(i["a"])({url:"/system/merchant/getRecommendedMerchants",method:"post",params:t,data:e,transformRequest:[function(t,e){for(var a in t)""===t[a]&&delete t[a];return t=JSON.stringify(t),t}]})}function u(t){return Object(i["a"])({url:"/system/merchant/recommendMerchant",method:"get",params:t})}function p(t){return Object(i["a"])({url:"/system/merchant/CancelRecommended",method:"get",params:t})}function m(t){return Object(i["a"])({url:"/api/v1/merchant/dataAnalysis",method:"get",params:t,headers:{loginToken:"adminLoginToken"}})}function h(t){return Object(i["a"])({url:"/api/v1/merchant/update",method:"post",data:t,headers:{loginToken:"adminLoginToken"}})}function v(t){return Object(i["a"])({url:"/system/merchant/updateMerchantViPEndTime",method:"get",params:t})}function f(t){return Object(i["a"])({url:"/system/merchant/vip/update",method:"get",params:t})}function g(t){return Object(i["a"])({url:"/api/v1/store/query/merchant",method:"get",params:t,headers:{loginToken:"adminLoginToken"}})}function y(t){return Object(i["a"])({url:"/system/wallet/get/"+t,method:"get"})}function b(t,e){return Object(i["a"])({url:"/system/wallet/getDetail/"+e,method:"get",params:t})}function _(t,e){return Object(i["a"])({url:"/system/merchant/vip/changePages",method:"post",params:t,data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var a in t)""===t[a]&&delete t[a];return t=JSON.stringify(t),t}]})}function C(t,e){return Object(i["a"])({url:"/system/merchant/vip/rechargePages",method:"post",params:t,data:e,headers:{"Content-Type":"application/json"},transformRequest:[function(t,e){for(var a in t)""===t[a]&&delete t[a];return t=JSON.stringify(t),t}]})}},"85c2":function(t,e,a){"use strict";a("d6bf")},"91a4":function(t,e,a){"use strict";a("ae33")},ae33:function(t,e,a){},be21:function(t,e,a){"use strict";a("77a6")},c2fa:function(t,e,a){"use strict";a("1604")},d6bf:function(t,e,a){},ed08:function(t,e,a){"use strict";a.d(e,"e",(function(){return s})),a.d(e,"a",(function(){return n})),a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return c})),a.d(e,"b",(function(){return o}));var i=a("53ca");a("ac1f"),a("00b4"),a("5319"),a("4d63"),a("2c3e"),a("25f0"),a("d3b7"),a("4d90"),a("a15b"),a("d81d"),a("b64b"),a("1276"),a("fb6a"),a("159b"),a("a630"),a("3ca3"),a("6062"),a("ddb0"),a("466d"),a("7db0");function s(t,e){if(0===arguments.length)return null;var a,s=e||"{y}-{m}-{d} {h}:{i}:{s}";"object"===Object(i["a"])(t)?a=t:("string"===typeof t&&(t=/^[0-9]+$/.test(t)?parseInt(t):t.replace(new RegExp(/-/gm),"/")),"number"===typeof t&&10===t.toString().length&&(t*=1e3),a=new Date(t));var n={y:a.getFullYear(),m:a.getMonth()+1,d:a.getDate(),h:a.getHours(),i:a.getMinutes(),s:a.getSeconds(),a:a.getDay()},r=s.replace(/{([ymdhisa])+}/g,(function(t,e){var a=n[e];return"a"===e?["日","一","二","三","四","五","六"][a]:a.toString().padStart(2,"0")}));return r}function n(t,e,a){var i,s,n,r,c,o=function o(){var l=+new Date-r;l<e&&l>0?i=setTimeout(o,e-l):(i=null,a||(c=t.apply(n,s),i||(n=s=null)))};return function(){for(var s=arguments.length,l=new Array(s),d=0;d<s;d++)l[d]=arguments[d];n=this,r=+new Date;var u=a&&!i;return i||(i=setTimeout(o,e)),u&&(c=t.apply(n,l),n=l=null),c}}function r(t){var e=t.split("."),a=e[e.length-1],i=["png","jpg","jpeg","bmp","gif","webp","psd","svg","tiff"],s="";return a&&(a=a.toLocaleLowerCase(),s=i.find((function(t){return t===a}))),!!s}function c(t){var e=t.split("."),a=e[e.length-1],i=["mp4","webm","avi","rmvb","3gp","flv"],s="";return a&&(a=a.toLocaleLowerCase(),s=i.find((function(t){return t===a}))),!!s}function o(t){var e=t.split("."),a=e[e.length-1];return a}}}]);